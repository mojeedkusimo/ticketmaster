!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=53)}([function(t,e,n){var r=n(24);t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}},function(t,e,n){t.exports=n(54)},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){Object({NODE_ENV:"production",TMAUTHADAPTOR_TAG:"secure-accounts-widget",TMAUTHADAPTOR_URL:void 0,IFRAME_URL:"https://identity.ticketmaster.com/sign-in",BIND_PHONE_IFRAME_URL:"https://identity.ticketmaster.com/bind-phone",DESTINATION_DOMAIN:"https://auth.ticketmaster.com",IS_SIGNED_IN:"https://identity.ticketmaster.com/json/signed-in",SIGNED_OUT:"https://identity.ticketmaster.com/json/sign-out",AUTH_SIGNED_OUT:"https://auth.ticketmaster.com/sign-out",GET_USER:"https://identity.ticketmaster.com/json/user",REDIRECT_URI:"https%3A%2F%2Fauth.ticketmaster.com%2Fsecure-accounts%2Fwidget%2Fcomplete",SSO_DOMAINS:"https://identity.ticketmaster.com/v1/me/sso,https://identity.concerts.livenation.com/v1/me/sso,https://identity.livenation.com/v1/me/sso,https://identity.ticketmaster.ca/v1/me/sso,https://identity.ticketmaster.com.mx/v1/me/sso,https://identity.ticketmaster.com.au/v1/me/sso,https://identity.ticketmaster.co.nz/v1/me/sso,https://identity.tmverifiedfan.com/v1/me/sso,https://identity.ontouraccess.com/v1/me/sso,https://identity.ticketsnow.com/v1/me/sso,https://identity.eventinventory.com/v1/me/sso,https://identity.ticketexchangebyticketmaster.com/v1/me/sso,https://identity.houseofblues.com/v1/me/sso,https://identity.ticketstoday.com/v1/me/sso,https://identity.ticketmaster.co.uk/v1/me/sso,https://identity.ticketmaster.ie/v1/me/sso"}).ZOID_FRAME_ONLY?(t.exports=n(55),t.exports.default=t.exports):(t.exports=n(59),t.exports.default=t.exports)},function(t,e,n){"use strict";var r=n(0),o=n.n(r),i=n(26),s=n.n(i);e.a={get:function(t){var e=t.url,n=t.query,r=void 0===n?{}:n,i=t.config,a=void 0===i?{}:i;return new s.a(o()({},a,{get:{url:e,query:r}})).get()},post:function(t){var e=t.url,n=t.data,r=void 0===n?{}:n,i=t.config,a=void 0===i?{}:i;return new s.a(o()({},a,{post:{url:e,send:r}})).post()}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(30),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){function n(t,e,n,r,o,i,s){try{var a=t[i](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var s=t.apply(e,r);function a(t){n(s,o,i,a,u,"next",t)}function u(t){n(s,o,i,a,u,"throw",t)}a(void 0)})}}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(18),o=n(63),i=n(64),s="[object Null]",a="[object Undefined]",u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?a:s:u&&u in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(19)(Object,"create");t.exports=r},function(t,e,n){var r=n(80),o=n(81),i=n(82),s=n(83),a=n(84);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(14);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){var r=n(86);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(60);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(10),o=n(7),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&r(t)==i}},function(t,e,n){var r=n(6).Symbol;t.exports=r},function(t,e,n){var r=n(71),o=n(75);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(10),o=n(2),i="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==s||e==a||e==i||e==u}},function(t,e,n){var r=n(36);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(20),o=n(42);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";var r=n(16),o=n(94),i=n(135),s=n(138),a=1e3;function u(t){if(this.options=o(t,{refresh:a,throttle:{max:3,refresh:a,cb:null}}),this.initResponse=void 0,this.inflightPromise,this.inflightRequest,this.inflightMethod,this.inflightTimeout,this.aborted=!1,this.inflightDelayedPromise,this.throttleProps={enabled:!1,count:0,savedResPollLink:null,resetGate:!1},void 0===this.options.get&&void 0===this.options.post)throw new Error("missing arg: get/post")}i.config({cancellation:!0}),u.prototype.abort=function(){this.aborted=!0,this.resetInFlights(),this.inflightDelayedPromise&&(this.inflightDelayedPromise.cancel(),delete this.inflightDelayedPromise)},u.prototype.resetInFlights=function(){this.inflightPromise&&(this.inflightPromise.cancel(),delete this.inflightPromise),this.inflightRequest&&(this.inflightRequest.abort(),delete this.inflightRequest),this.inflightTimeout&&(clearTimeout(this.inflightTimeout),delete this.inflightTimeout)},u.prototype.onCancel=function(){var t=this.options.onCancel;t&&"function"===typeof t&&t.apply(this)},u.prototype.throttle=function(t){if(this.aborted)return i.reject(new Error("Aborted Throttle"));var e=this;t||(t="get");var n=e[e.inflightMethod||t];if(!n)throw new Error("unknown method");var o=(n=n.bind(e))();return e.throttleProps.enabled=!0,this.inflightDelayedPromise=o,e.options.throttle.cb&&e.options.throttle.cb(e.throttleProps,o),o.catch(function(n){var o=429===r(n,"response.statusCode");if(o&&e.throttleProps.savedResPollLink&&e.throttleProps.resetGate){if(e.throttleProps.count=0,!e.options.get){var s=e.throttleProps.savedResPollLink;Object.assign(e.options,{get:{url:s}})}e.options.get.url=e.throttleProps.savedResPollLink,e.throttleProps.resetGate=!1}return o&&e.throttleProps.count<e.options.throttle.max?(e.resetInFlights(),i.delay(e.options.throttle.refresh).then(function(){return e.throttleProps.count++,e.throttle(t)})):(e.inflightMethod=void 0,e.throttleProps.enabled=!1,i.reject(n))})},u.prototype.get=function(){var t=this;if(this.inflightPromise)return this.inflightPromise;var e=new i(function(e,n,r){r(t.onCancel.bind(t));var o=s.get(t.options.get.url).query(t.options.get.query||{});t.options.withCredentials&&o.withCredentials(),t.inflightRequest=o,t.options.get.beforeDispatch&&t.options.get.beforeDispatch(o),o.end(t.firstResponseHandler.bind(t,e,n))});return this.inflightPromise=e,e},u.prototype.post=function(){var t=this;if(this.inflightPromise)return this.inflightPromise;var e=new i(function(e,n,r){r(t.onCancel.bind(t));var o=s.post(t.options.post.url);t.options.withCredentials&&o.withCredentials(),t.inflightRequest=o,t.options.post.beforeDispatch&&t.options.post.beforeDispatch(o),t.options.post.query&&o.query(t.options.post.query),t.options.post.send&&o.send(t.options.post.send),o.end(t.firstResponseHandler.bind(t,e,n))});return this.inflightPromise=e,e},u.prototype.firstResponseHandler=function(t,e,n,o){n||o.error||this.isErrorCode(r(o,"status"))?e(this.createError(n,o)):this.checkReady(t,e,o)},u.prototype.createError=function(t,e){var n;return(n=t instanceof Error?t:new Error(t||r(e,"body.message"))).response=e,n},u.prototype.checkReady=function(t,e,n,o){var i=this,a=(i.options.checkResponse||i.checkResponse.bind(i))(t,e,o||n);if(a){i.throttleProps.enabled&&(i.throttleProps.resetGate=!0);var u,c=Number(a)>1?Number(a):i.options.refresh,f=r(i.options,"poll.beforeDispatch")||i.pollBeforeDispatch.bind(i),l=r(n,"body._link.source"),h=r(o,"body._link.source",l)||i.throttleProps.savedResPollLink;if(i.options.poll?f(u=s.get(i.options.poll.url).query(i.options.poll.query||{}),n):h?(u=s.get(h),i.throttleProps.enabled&&(i.throttleProps.savedResPollLink=h)):e(new Error("[003] no poll link"),n),!this.aborted){i.inflightMethod="get",i.inflightRequest=u;var d=setTimeout(function(){u.end(function(o,s){o||s.error||i.isErrorCode(r(s,"status"))?e(i.createError(o,s)):i.checkReady(t,e,n,s)})},c);i.inflightTimeout=d}}},u.prototype.pollBeforeDispatch=function(t,e){var n=u.hasToken(r(e,"body")),o=n?{token:n}:{};t.query(o)},u.prototype.checkResponse=function(t,e,n){var o=u.hasToken(r(n,"body"));if(this.isErrorCode(r(n,"body.responseCode")))e(this.createError(null,n));else{if(o||202===n.status||202===r(n,"body.responseCode"))return!0;this.throttleProps.enabled=!1,t(n)}return!1},u.prototype.isErrorCode=function(t){var e=t/100|0;return 4===e||5===e},u.hasToken=function(t){return r(t,"pollingToken")},t.exports=u},function(t,e,n){var r=n(144);function o(t){return t}function i(t,e){const n=(e=e||{}).delimiter||".",i=e.maxDepth,s=e.transformKey||o,a={};return function t(o,u,c){c=c||1,Object.keys(o).forEach(function(f){const l=o[f],h=e.safe&&Array.isArray(l),d=Object.prototype.toString.call(l),p=r(l),v="[object Object]"===d||"[object Array]"===d,y=u?u+n+s(f):s(f);if(!h&&!p&&v&&Object.keys(l).length&&(!e.maxDepth||c<i))return t(l,y,c+1);a[y]=l})}(t),a}t.exports=i,i.flatten=i,i.unflatten=function t(e,n){n=n||{};const s=n.delimiter||".";const a=n.overwrite||!1;const u=n.transformKey||o;const c={};const f=r(e);if(f||"[object Object]"!==Object.prototype.toString.call(e))return e;function l(t){const e=Number(t);return isNaN(e)||-1!==t.indexOf(".")||n.object?t:e}e=Object.keys(e).reduce((t,r)=>{const o=Object.prototype.toString.call(e[r]),a="[object Object]"===o||"[object Array]"===o;return!a||function(t){const e=Object.prototype.toString.call(t),n="[object Array]"===e,r="[object Object]"===e;if(!t)return!0;if(n)return!t.length;if(r)return!Object.keys(t).length}(e[r])?(t[r]=e[r],t):function(t,e,n){return Object.keys(n).reduce(function(e,r){return e[t+s+r]=n[r],e},e)}(r,t,i(e[r],n))},{});Object.keys(e).forEach(function(r){const o=r.split(s).map(u);let i=l(o.shift()),f=l(o[0]),h=c;for(;void 0!==f;){const t=Object.prototype.toString.call(h[i]),e="[object Object]"===t||"[object Array]"===t;if(!a&&!e&&"undefined"!==typeof h[i])return;(a&&!e||!a&&null==h[i])&&(h[i]="number"!==typeof f||n.object?{}:[]),h=h[i],o.length>0&&(i=l(o.shift()),f=l(o[0]))}h[i]=t(e[r],n)});return c}},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(1),o=n.n(r),i=n(8),s=n.n(i),a=n(4),u={NONE:0,ERROR:1,ALL:2};e.b=s()(o.a.mark(function t(){var e,n,r,i,s=arguments;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.length>0&&void 0!==s[0]?s[0]:{},n=e.ssoDomains,r=e.logLevel,i=void 0===r?u.NONE:r,n){t.next=3;break}return t.abrupt("return",i>=u.ERROR&&console.error("no sso domains found"));case 3:Array.isArray(n)&&n.forEach(function(t){a.a.get({url:"".concat(t,"/logout?i=1"),config:{withCredentials:!0}}).then(function(e){return i>=u.ALL&&console.log(t,e)}).catch(function(e){return i>=u.ERROR&&console.error(t,e)})});case 4:case"end":return t.stop()}},t)}))},function(t,e,n){"use strict";(function(t){var r=n(56),o=n(57),i=n(58);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),o=(t=a(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?a(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(f(e),t=a(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(t).length;default:if(r)return M(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,o){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,o);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,o){var i,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var f=-1;for(i=n;i<a;i++)if(c(t,i)===c(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*s}else-1!==f&&(i-=i-f),f=-1}else for(n+u>a&&(n=a-u),i=n;i>=0;i--){for(var l=!0,h=0;h<u;h++)if(c(t,i+h)!==c(e,h)){l=!1;break}if(l)return i}return-1}function w(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function g(t,e,n,r){return z(M(e,t.length-n),t,n,r)}function _(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function b(t,e,n,r){return _(t,e,n,r)}function E(t,e,n,r){return z(B(e),t,n,r)}function x(t,e,n,r){return z(function(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function O(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,s,a,u,c=t[o],f=null,l=c>239?4:c>223?3:c>191?2:1;if(o+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128===(192&(i=t[o+1]))&&(u=(31&c)<<6|63&i)>127&&(f=u);break;case 3:i=t[o+1],s=t[o+2],128===(192&i)&&128===(192&s)&&(u=(15&c)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128===(192&i)&&128===(192&s)&&128===(192&a)&&(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),o+=l}return function(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=P));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return f(e),e<=0?a(t,e):void 0!==n?"string"===typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return O(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,o){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(i,s),c=this.slice(r,o),f=t.slice(e,n),l=0;l<a;++l)if(c[l]!==f[l]){i=c[l],s=f[l];break}return i<s?-1:s<i?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return g(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function T(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function A(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=U(t[i]);return o}function j(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function k(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function S(t,e,n,r,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function I(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function N(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,i){return i||N(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,i){return i||N(t,0,n,8),o.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var o=e-t;n=new u(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},u.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||k(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||S(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||S(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);S(this,t,e,n,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);S(this,t,e,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(i=e;i<n;++i)this[i]=t;else{var s=u.isBuffer(t)?t:M(new u(t,r).toString()),a=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%a]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function M(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function B(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(W,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function z(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(5))},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(5))},function(t,e,n){var r=n(68),o=n(85),i=n(87),s=n(88),a=n(89);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(19)(n(6),"Map");t.exports=r},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(35),o=n(95),i=n(96);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(19),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=o},function(t,e,n){var r=n(101),o=n(38),i=n(107),s=n(109),a=n(2),u=n(46),c=n(45);t.exports=function t(e,n,f,l,h){e!==n&&i(n,function(i,u){if(a(i))h||(h=new r),s(e,n,u,f,t,l,h);else{var d=l?l(c(e,u),i,u+"",e,n,h):void 0;void 0===d&&(d=i),o(e,u,d)}},u)}},function(t,e,n){var r=n(21),o=n(14);t.exports=function(t,e,n){(void 0===n||o(t[e],n))&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(117)(Object.getPrototypeOf,Object);t.exports=r},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(118),o=n(7),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e,n){(function(t){var r=n(6),o=n(120),i=e&&!e.nodeType&&e,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===i?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||o;t.exports=u}).call(this,n(22)(t))},function(t,e,n){var r=n(122),o=n(123),i=n(124),s=i&&i.isTypedArray,a=s?o(s):r;t.exports=a},function(t,e){t.exports=function(t,e){if("__proto__"!=e)return t[e]}},function(t,e,n){var r=n(128),o=n(130),i=n(23);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?n:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],f=!1,l=-1;function h(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!f){var t=a(h);f=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||f||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";t.exports=function(t){return null!==t&&"object"===typeof t}},function(t,e,n){var r=n(145),o=n(146),i=n(147);t.exports=function(t){return r(t)||o(t)||i()}},function(t,e,n){"use strict";var r={CLEAR_CUSTOM_CONFIG:"clearCustomConfig"};e.a=function(t){return function(e,n){Object.values(r).includes(n)&&(t[n]=e)}}},function(t,e,n){"use strict";var r=n(3),o={onAuthSuccess:{type:"function",required:!1,default:function(){return function(){}}},hideCloseButton:{type:"boolean",required:!1,default:function(){return!1}},integratorId:{type:"string",required:!0},placementId:{type:"string",required:!0},locale:{type:"string",required:!0},widgetOffset:{type:"string",required:!1,default:function(){return""}},widgetMobileOffset:{type:"string",required:!1,default:function(){return""}},hideLeftPanel:{type:"boolean",required:!1,default:function(){return!1}}},i="\n  html, body {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    top: 0;\n    left: 0;\n    margin: 0;\n    text-align: center;\n  }\n  \n  .wrapper {\n    width: 100%;\n    height: 100%;\n    margin: 0 auto;\n    z-index: 1000;\n  }\n\n  .loader {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  }\n\n  .outer-ring {\n    width: 80px;\n    height: 80px;\n  }\n\n  .outer-ring div {\n    box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n\n    display: block;\n    position: absolute;\n    width: 80px;\n    height: 80px;\n    margin: 0px;\n    border-radius: 100%;\n    border: 3px solid #904eba;\n    border-color: #904eba transparent transparent transparent;\n    animation: outer-ring 2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    -webkit-animation: outer-ring 2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  }\n\n  .outer-ring div:nth-child(1) {\n    -webkit-animation-delay: -0.45s;\n    animation-delay: -0.45s;\n  }\n\n  .outer-ring div:nth-child(2) {\n    -webkit-animation-delay: -0.3s;\n    animation-delay: -0.3s;\n  }\n\n  .outer-ring div:nth-child(3) {\n    -webkit-animation-delay: -0.15s;\n    animation-delay: -0.15s;\n  }\n\n  @-webkit-keyframes outer-ring {\n    0% {\n      -webkit-transform: rotate(0deg);transform: rotate(0deg);\n    }\n    100% {\n      -webkit-transform: rotate(360deg);transform: rotate(360deg);\n    }\n  }\n\n  @keyframes outer-ring {\n    0% {\n      -webkit-transform: rotate(0deg);transform: rotate(0deg);\n    }\n    100% {\n      -webkit-transform: rotate(360deg);transform: rotate(360deg);\n    }\n  }\n\n  .middle-ring {\n    display: inline-block;\n    position: absolute;\n    width: 80px;\n    height: 80px;\n  }\n\n  .middle-ring div {\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    display: block;\n    position: absolute;\n    width: 60px;\n    height: 60px;\n    margin-top: 7px;\n    margin-left: 7px;\n    border-radius: 100%;\n    border: 3px solid #14a1a3;\n    border-color: #14a1a3 transparent transparent transparent;\n    animation: middle-ring 2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    -webkit-animation: middle-ring 2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  }\n\n  .middle-ring div:nth-child(1) {\n    -webkit-animation-delay: -0.45s;\n    animation-delay: -0.45s;\n  }\n\n  .middle-ring div:nth-child(2) {\n    -webkit-animation-delay: -0.3s;\n    animation-delay: -0.3s;\n  }\n\n  .middle-ring div:nth-child(3) {\n    -webkit-animation-delay: -0.15s;\n    animation-delay: -0.15s;\n  }\n\n  @-webkit-keyframes middle-ring {\n    0% {\n      -webkit-transform: rotate(0deg);\n      transform: rotate(0deg);\n    }\n    100% {\n      -webkit-transform: rotate(360deg);\n      transform: rotate(360deg);\n    }\n  }\n\n  @keyframes middle-ring {\n    0% {\n      -webkit-transform: rotate(0deg);\n      transform: rotate(0deg);\n    }\n    100% {\n      -webkit-transform: rotate(360deg);\n      transform: rotate(360deg);\n    }\n  }\n\n  .innermost-ring {\n    display: inline-block;\n    position: absolute;\n    width: 80px;\n    height: 80px;\n  }\n\n  .innermost-ring div {\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    display: block;\n    position: absolute;\n    width: 40px;\n    height: 40px;\n    margin-top: 7px;\n    margin-left: 7px;\n    border-radius: 100%;\n    border: 3px solid #026cdf;\n    border-color: #026cdf transparent transparent transparent;\n    animation: innermost-ring 2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    -webkit-animation: innermost-ring 2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  }\n\n  .innermost-ring div:nth-child(1) {\n    -webkit-animation-delay: -0.45s;\n    animation-delay: -0.45s;}\n\n  .innermost-ring div:nth-child(2) {\n    -webkit-animation-delay: -0.3s;\n    animation-delay: -0.3s;\n  }\n\n  .innermost-ring div:nth-child(3) {\n    -webkit-animation-delay: -0.15s;\n    animation-delay: -0.15s;\n  }\n\n  @-webkit-keyframes innermost-ring {\n    0% {\n      -webkit-transform: rotate(0deg);\n      transform: rotate(0deg);\n    }\n    100% {\n      -webkit-transform: rotate(360deg);\n      transform: rotate(360deg);\n    }\n  }\n\n  @keyframes innermost-ring {\n    0% {\n      -webkit-transform: rotate(0deg);\n      transform: rotate(0deg);\n    }\n    100% {\n      -webkit-transform: rotate(360deg);\n      transform: rotate(360deg);\n    }\n  }\n";function s(t){var e=t.doc,n=e.createElement("div");n.classList.add("innermost-ring"),n.appendChild(e.createElement("div")),n.appendChild(e.createElement("div")),n.appendChild(e.createElement("div")),n.appendChild(e.createElement("div"));var r=e.createElement("div");r.classList.add("middle-ring"),r.appendChild(e.createElement("div")),r.appendChild(e.createElement("div")),r.appendChild(n),r.appendChild(e.createElement("div")),r.appendChild(e.createElement("div"));var o=e.createElement("div");o.classList.add("outer-ring"),o.appendChild(e.createElement("div")),o.appendChild(e.createElement("div")),o.appendChild(r),o.appendChild(e.createElement("div")),o.appendChild(e.createElement("div"));var s=e.createElement("div");s.classList.add("loader"),s.appendChild(o);var a=e.createElement("div");a.classList.add("wrapper"),a.appendChild(s);var u=e.createElement("style");u.appendChild(e.createTextNode(i));var c=e.createElement("body");c.appendChild(u),c.appendChild(a);var f=e.createElement("html");return f.appendChild(c),f}function a(t){return"".concat(function(t){if("number"===typeof t)return t;var e=t.match(/^([0-9]+)(px|%)$/);if(!e)throw new Error("Could not match css value from ".concat(t));return parseInt(e[1],10)}(t),"px")}function u(t){return"number"===typeof t?a(t):"string"===typeof(e=t)&&/^[0-9]+%$/.test(e)?t:a(t);var e}var c="697px",f="32px",l={VISIBLE:"visible",INVISIBLE:"invisible"};function h(t){var e=t.uid,n=t.frame,o=t.prerenderFrame,i=t.doc,s=t.props,a=s.cspNonce,h=s.widgetOffset,d=s.widgetMobileOffset,p=s.renderInline,v=t.event,y=t.dimensions,m=y.width,w=y.height,g=i.createElement("div"),_=i.createElement("style");return a&&_.setAttribute("nonce",a),_.appendChild(i.createTextNode("\n    #".concat(e," {\n      width: ").concat(m,";\n      height: ").concat(w,";\n      margin-top: ").concat(h||0,";\n      height: calc(").concat(w," - ").concat(h||"0px",");\n\n      ").concat(p?"\n        display: inline-block;\n        position: relative;\n        width: 100%;\n        box-sizing: border-box;\n        max-height: ".concat(c,";\n      "):"\n        position: fixed;\n        top: 0;\n        left: 0;\n        background-color: rgba(0, 0, 0, .8);\n      ","\n    }\n\n    @media only screen and (max-width: 480px) {\n      #").concat(e," {\n        margin-top: ").concat(d||0,";\n        height: calc(").concat(w," - ").concat(d||"0px",");\n      }\n    }\n\n    #").concat(e," > iframe {\n        display: inline-block;\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        transition: opacity .2s ease-in-out;\n    }\n\n    @media only screen and (min-width: 481px) {\n      #").concat(e," > iframe {\n        margin-top: ").concat(f,";\n        height: calc(100% - ").concat(f," - ").concat(f,");\n      }\n    }\n\n    #").concat(e," > iframe.").concat(l.INVISIBLE," {\n        opacity: 0;\n    }\n\n    #").concat(e," > iframe.").concat(l.VISIBLE," {\n        opacity: 1;\n    }\n  "))),g.setAttribute("id",e),g.appendChild(n),g.appendChild(o),g.appendChild(_),o.classList.add(l.VISIBLE),n.classList.add(l.INVISIBLE),v.on(r.EVENT.RENDERED,function(){o.classList.remove(l.VISIBLE),o.classList.add(l.INVISIBLE),n.classList.remove(l.INVISIBLE),n.classList.add(l.VISIBLE),setTimeout(function(){var t;(t=o)&&t.parentNode&&t.parentNode.removeChild(t)})}),v.on(r.EVENT.RESIZE,function(t){var e=t.width,n=t.height;"number"===typeof e&&(g.style.width=u(e)),"number"===typeof n&&(g.style.height=u(n))}),g}var d=n(0),p=n.n(d),v=n(16),y=n.n(v),m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mainContent,n={sidebarTitle:t.sidebarTitle&&t.sidebarTitle.substring(0,80),sidebarContent:t.sidebarContent&&t.sidebarContent.substring(0,256)};return e&&(n=p()({},n,{mainContent:{title:y()(t,"mainContent.title","").substring(0,28),subTitle:y()(t,"mainContent.subTitle","").substring(0,96)}})),n},w=n(24),g=n.n(w),_=n(27),b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(_.flatten)(t),r=Array.isArray(e)&&e.length?e:Object.keys(n);return Object(_.unflatten)(r.reduce(function(t,e){return t[e]?p()({},t,g()({},e,encodeURIComponent(t[e]))):t},n))},E=n(50),x=n.n(E),C=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.reduce(function(t,e){return Array.isArray(t)?e.apply(void 0,x()(t)):e(t)},n)}},O=Object({NODE_ENV:"production",TMAUTHADAPTOR_TAG:"secure-accounts-widget",TMAUTHADAPTOR_URL:void 0,IFRAME_URL:"https://identity.ticketmaster.com/sign-in",BIND_PHONE_IFRAME_URL:"https://identity.ticketmaster.com/bind-phone",DESTINATION_DOMAIN:"https://auth.ticketmaster.com",IS_SIGNED_IN:"https://identity.ticketmaster.com/json/signed-in",SIGNED_OUT:"https://identity.ticketmaster.com/json/sign-out",AUTH_SIGNED_OUT:"https://auth.ticketmaster.com/sign-out",GET_USER:"https://identity.ticketmaster.com/json/user",REDIRECT_URI:"https%3A%2F%2Fauth.ticketmaster.com%2Fsecure-accounts%2Fwidget%2Fcomplete",SSO_DOMAINS:"https://identity.ticketmaster.com/v1/me/sso,https://identity.concerts.livenation.com/v1/me/sso,https://identity.livenation.com/v1/me/sso,https://identity.ticketmaster.ca/v1/me/sso,https://identity.ticketmaster.com.mx/v1/me/sso,https://identity.ticketmaster.com.au/v1/me/sso,https://identity.ticketmaster.co.nz/v1/me/sso,https://identity.tmverifiedfan.com/v1/me/sso,https://identity.ontouraccess.com/v1/me/sso,https://identity.ticketsnow.com/v1/me/sso,https://identity.eventinventory.com/v1/me/sso,https://identity.ticketexchangebyticketmaster.com/v1/me/sso,https://identity.houseofblues.com/v1/me/sso,https://identity.ticketstoday.com/v1/me/sso,https://identity.ticketmaster.co.uk/v1/me/sso,https://identity.ticketmaster.ie/v1/me/sso"}),P=O.TMAUTHADAPTOR_TAG,T=O.IFRAME_URL,R=O.BIND_PHONE_IFRAME_URL,A=O.DESTINATION_DOMAIN,j=O.REDIRECT_URI,k=C(m,b,JSON.stringify,btoa),S=C(b,JSON.stringify,btoa),I=function(t){var e=t.isBindPhone,n=void 0!==e&&e,i=t.locale,a=t.placementId,u=t.integratorId,c=t.messages,f=t.customStyles,l=t.hideLeftPanel;return Object(r.create)({tag:P,url:"".concat(n?R:T,"?lang=").concat(i,"&placementId=").concat(a,"&integratorId=").concat(u,"&redirectUri=").concat(j).concat(c&&c.constructor===Object?"&messages=".concat(k(c)):"").concat(f&&f.constructor===Object?"&customStyles=".concat(S(f,["companyName"])):"","&hideLeftPanel=").concat(!!l),domain:A,autoResize:!0,dimensions:{width:"100%",height:"100%"},props:o,prerenderTemplate:s,containerTemplate:h})};n.d(e,"a",function(){return I})},function(t,e,n){"use strict";n.r(e),function(t){var e=n(1),r=n.n(e),o=n(8),i=n.n(o),s=n(0),a=n.n(s),u=n(25),c=n.n(u),f=n(3),l=n(4),h=n(52),d=n(28),p=n(51);if(!t.TMAuthAdaptor){var v,y=Object({NODE_ENV:"production",TMAUTHADAPTOR_TAG:"secure-accounts-widget",TMAUTHADAPTOR_URL:void 0,IFRAME_URL:"https://identity.ticketmaster.com/sign-in",BIND_PHONE_IFRAME_URL:"https://identity.ticketmaster.com/bind-phone",DESTINATION_DOMAIN:"https://auth.ticketmaster.com",IS_SIGNED_IN:"https://identity.ticketmaster.com/json/signed-in",SIGNED_OUT:"https://identity.ticketmaster.com/json/sign-out",AUTH_SIGNED_OUT:"https://auth.ticketmaster.com/sign-out",GET_USER:"https://identity.ticketmaster.com/json/user",REDIRECT_URI:"https%3A%2F%2Fauth.ticketmaster.com%2Fsecure-accounts%2Fwidget%2Fcomplete",SSO_DOMAINS:"https://identity.ticketmaster.com/v1/me/sso,https://identity.concerts.livenation.com/v1/me/sso,https://identity.livenation.com/v1/me/sso,https://identity.ticketmaster.ca/v1/me/sso,https://identity.ticketmaster.com.mx/v1/me/sso,https://identity.ticketmaster.com.au/v1/me/sso,https://identity.ticketmaster.co.nz/v1/me/sso,https://identity.tmverifiedfan.com/v1/me/sso,https://identity.ontouraccess.com/v1/me/sso,https://identity.ticketsnow.com/v1/me/sso,https://identity.eventinventory.com/v1/me/sso,https://identity.ticketexchangebyticketmaster.com/v1/me/sso,https://identity.houseofblues.com/v1/me/sso,https://identity.ticketstoday.com/v1/me/sso,https://identity.ticketmaster.co.uk/v1/me/sso,https://identity.ticketmaster.ie/v1/me/sso"}),m=y.IS_SIGNED_IN,w=y.SIGNED_OUT,g=y.AUTH_SIGNED_OUT,_=y.GET_USER,b=y.SSO_DOMAINS,E=function(t,e){t&&e||console.error("Missing required arguments")},x=function(t){var e=a()({},t,{register:P});return function(t){return v||(v=Object(h.a)(t))}(e)(e)},C=function(){v=null,Object(f.destroy)()},O=function(e,n){var r,o=x(e);return r=function(){return o.close()},t.TMAuthAdaptor.close=r,o.render(n)};t.TMAuthAdaptor={close:c.a,clearCustomConfig:c.a,signIn:function(t,e){return E(t,e),C(),O(t,e)},bindPhone:function(t,e){var n=a()({},t,{isBindPhone:!0});return E(n,e),C(),O(n,e)},isSignedIn:function(){var t=i()(r.a.mark(function t(e){var n,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=m||"")){t.next=12;break}return t.prev=2,t.next=5,l.a.get({url:n,query:{hard:Boolean(e)},config:{withCredentials:!0}});case 5:return o=t.sent,t.abrupt("return",o.body);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",t.t0);case 12:return console.error("URL not available"),t.abrupt("return",null);case 14:case"end":return t.stop()}},t,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}(),signOut:function(){var t=i()(r.a.mark(function t(){var e,n,o,i,s,a=arguments;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:"",n=w||"",o=g||"",i=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(",").map(function(t){return t.trim()}).filter(function(t){return t})}(b)||[],Object(d.b)({ssoDomains:i,logLevel:d.a.NONE}),!n||!o){t.next=19;break}return t.prev=7,t.next=10,l.a.post({url:n,data:{accessToken:e},config:{withCredentials:!0}});case 10:return s=t.sent,t.next=13,l.a.get({url:o,config:{withCredentials:!0}});case 13:return t.abrupt("return",s.body);case 16:return t.prev=16,t.t0=t.catch(7),t.abrupt("return",t.t0);case 19:return console.error("URL not available"),t.abrupt("return",null);case 21:case"end":return t.stop()}},t,null,[[7,16]])}));return function(){return t.apply(this,arguments)}}(),getUser:function(){var t=i()(r.a.mark(function t(e){var n,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=_||"")){t.next=12;break}return t.prev=2,t.next=5,l.a.get({url:n,query:{hard:Boolean(e)},config:{withCredentials:!0}});case 5:return o=t.sent,t.abrupt("return",o.body);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",t.t0);case 12:return console.error("URL not available"),t.abrupt("return",void 0);case 14:case"end":return t.stop()}},t,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}()}}var P=Object(p.a)(t.TMAuthAdaptor)}.call(this,n(5))},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function u(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),s=new T(r||[]);return i._invoke=function(t,e,n){var r=f;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=C(s,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?d:l,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,s),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=u;var f="suspendedStart",l="suspendedYield",h="executing",d="completed",p={};function v(){}function y(){}function m(){}var w={};w[i]=function(){return this};var g=Object.getPrototypeOf,_=g&&g(g(R([])));_&&_!==n&&r.call(_,i)&&(w=_);var b=m.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(t){var e;this._invoke=function(n,o){function i(){return new Promise(function(e,i){!function e(n,o,i,s){var a=c(t[n],t,o);if("throw"!==a.type){var u=a.arg,f=u.value;return f&&"object"===typeof f&&r.call(f,"__await")?Promise.resolve(f.__await).then(function(t){e("next",t,i,s)},function(t){e("throw",t,i,s)}):Promise.resolve(f).then(function(t){u.value=t,i(u)},function(t){return e("throw",t,i,s)})}s(a.arg)}(n,o,e,i)})}return e=e?e.then(i,i):i()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=c(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function R(t){if(t){var n=t[i];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:A}}function A(){return{value:e,done:!0}}return y.prototype=b.constructor=m,m.constructor=y,m[a]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},E(x.prototype),x.prototype[s]=function(){return this},t.AsyncIterator=x,t.async=function(e,n,r,o){var i=new x(u(e,n,r,o));return t.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(b),b[a]="Generator",b[i]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=R,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){(function(e){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return{}.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,n,r){"use strict";r.r(n);var o={};function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function s(t){try{if(!t)return!1;if("undefined"!=typeof Promise&&t instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&t instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&t instanceof window.constructor)return!1;var e={}.toString;if(e){var n=e.call(t);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof t.then)return!0}catch(r){return!1}return!1}r.r(o),r.d(o,"WeakMap",function(){return X});var a,u=[],c=[],f=0;function l(){if(!f&&a){var t=a;a=null,t.resolve()}}function h(){f+=1}function d(){f-=1,l()}var p=function(){function t(t){var e=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var n,r,o=!1,i=!1,s=!1;h();try{t(function(t){s?e.resolve(t):(o=!0,n=t)},function(t){s?e.reject(t):(i=!0,r=t)})}catch(a){return d(),void this.reject(a)}d(),s=!0,o?this.resolve(n):i&&this.reject(r)}}var e=t.prototype;return e.resolve=function(t){if(this.resolved||this.rejected)return this;if(s(t))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=t,this.dispatch(),this},e.reject=function(t){var e=this;if(this.resolved||this.rejected)return this;if(s(t))throw new Error("Can not reject promise with another promise");if(!t){var n=t&&"function"==typeof t.toString?t.toString():{}.toString.call(t);t=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=t,this.errorHandled||setTimeout(function(){e.errorHandled||function(t,e){if(-1===u.indexOf(t)){u.push(t),setTimeout(function(){throw t},1);for(var n=0;n<c.length;n++)c[n](t,e)}}(t,e)},1),this.dispatch(),this},e.asyncReject=function(t){return this.errorHandled=!0,this.reject(t),this},e.dispatch=function(){var e=this,n=this.resolved,r=this.rejected,o=this.handlers;if(!this.dispatching&&(n||r)){this.dispatching=!0,h();for(var i=function(i){var a=o[i],u=a.onSuccess,c=a.onError,f=a.promise,l=void 0;if(n)try{l=u?u(e.value):e.value}catch(h){return f.reject(h),"continue"}else if(r){if(!c)return f.reject(e.error),"continue";try{l=c(e.error)}catch(h){return f.reject(h),"continue"}}l instanceof t&&(l.resolved||l.rejected)?(l.resolved?f.resolve(l.value):f.reject(l.error),l.errorHandled=!0):s(l)?l instanceof t&&(l.resolved||l.rejected)?l.resolved?f.resolve(l.value):f.reject(l.error):l.then(function(t){f.resolve(t)},function(t){f.reject(t)}):f.resolve(l)},a=0;a<o.length;a++)i(a);o.length=0,this.dispatching=!1,d()}},e.then=function(e,n){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new t;return this.handlers.push({promise:r,onSuccess:e,onError:n}),this.errorHandled=!0,this.dispatch(),r},e.catch=function(t){return this.then(void 0,t)},e.finally=function(e){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.finally expected a function");return this.then(function(n){return t.try(e).then(function(){return n})},function(n){return t.try(e).then(function(){throw n})})},e.timeout=function(t,e){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){n.resolved||n.rejected||n.reject(e||new Error("Promise timed out after "+t+"ms"))},t);return this.then(function(t){return clearTimeout(r),t})},e.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},t.resolve=function(e){return e instanceof t?e:s(e)?new t(function(t,n){return e.then(t,n)}):(new t).resolve(e)},t.reject=function(e){return(new t).reject(e)},t.asyncReject=function(e){return(new t).asyncReject(e)},t.all=function(e){var n=new t,r=e.length,o=[];if(!r)return n.resolve(o),n;for(var i=function(i){var a=e[i];if(a instanceof t){if(a.resolved)return o[i]=a.value,r-=1,"continue"}else if(!s(a))return o[i]=a,r-=1,"continue";t.resolve(a).then(function(t){o[i]=t,0==(r-=1)&&n.resolve(o)},function(t){n.reject(t)})},a=0;a<e.length;a++)i(a);return 0===r&&n.resolve(o),n},t.hash=function(e){var n={};return t.all(Object.keys(e).map(function(r){return t.resolve(e[r]).then(function(t){n[r]=t})})).then(function(){return n})},t.map=function(e,n){return t.all(e.map(n))},t.onPossiblyUnhandledException=function(t){return function(t){return c.push(t),{cancel:function(){c.splice(c.indexOf(t),1)}}}(t)},t.try=function(e,n,r){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var o;h();try{o=e.apply(n,r||[])}catch(i){return d(),t.reject(i)}return d(),t.resolve(o)},t.delay=function(e){return new t(function(t){setTimeout(t,e)})},t.isPromise=function(e){return!!(e&&e instanceof t)||s(e)},t.flush=function(){return e=a=a||new t,l(),e;var e},t}();function v(t){return"[object RegExp]"==={}.toString.call(t)}var y={MOCK:"mock:",FILE:"file:",ABOUT:"about:"},m="*",w={IFRAME:"iframe",POPUP:"popup"},g="Call was rejected by callee.\r\n";function _(t){return void 0===t&&(t=window),t.location.protocol===y.ABOUT}function b(t){if(void 0===t&&(t=window),t)try{if(t.parent&&t.parent!==t)return t.parent}catch(e){}}function E(t){if(void 0===t&&(t=window),t&&!b(t))try{return t.opener}catch(e){}}function x(t){try{return!0}catch(e){}return!1}function C(t){var e=(t=t||window).location;if(!e)throw new Error("Can not read window location");var n=e.protocol;if(!n)throw new Error("Can not read window protocol");if(n===y.FILE)return y.FILE+"//";if(n===y.ABOUT){var r=b(t);return r&&x()?C(r):y.ABOUT+"//"}var o=e.host;if(!o)throw new Error("Can not read window host");return n+"//"+o}function O(t){var e=C(t=t||window);return e&&t.mockDomain&&0===t.mockDomain.indexOf(y.MOCK)?t.mockDomain:e}function P(t){if(!function(t){try{if(t===window)return!0}catch(n){}try{var e=Object.getOwnPropertyDescriptor(t,"location");if(e&&!1===e.enumerable)return!1}catch(n){}try{if(_(t)&&x())return!0}catch(n){}try{if(C(t)===C(window))return!0}catch(n){}return!1}(t))return!1;try{if(t===window)return!0;if(_(t)&&x())return!0;if(O(window)===O(t))return!0}catch(e){}return!1}function T(t){if(!P(t))throw new Error("Expected window to be same domain");return t}function R(t,e){if(!t||!e)return!1;var n=b(e);return n?n===t:-1!==function(t){var e=[];try{for(;t.parent!==t;)e.push(t.parent),t=t.parent}catch(n){}return e}(e).indexOf(t)}function A(t){var e,n,r=[];try{e=t.frames}catch(u){e=t}try{n=e.length}catch(u){}if(0===n)return r;if(n){for(var o=0;o<n;o++){var i=void 0;try{i=e[o]}catch(u){continue}r.push(i)}return r}for(var s=0;s<100;s++){var a=void 0;try{a=e[s]}catch(u){return r}if(!a)return r;r.push(a)}return r}function j(t){for(var e=[],n=0,r=A(t);n<r.length;n++){var o=r[n];e.push(o);for(var i=0,s=j(o);i<s.length;i++)e.push(s[i])}return e}function k(t){if(t){try{if(t.top)return t.top}catch(o){}if(b(t)===t)return t;try{if(R(window,t)&&window.top)return window.top}catch(o){}try{if(R(t,window)&&window.top)return window.top}catch(o){}for(var e=0,n=j(t);e<n.length;e++){var r=n[e];try{if(r.top)return r.top}catch(o){}if(b(r)===r)return r}}}function S(t){var e=k(t);if(!e)throw new Error("Can not determine top window");return[].concat(j(e),[e])}var I=[],D=[];function N(t,e){void 0===e&&(e=!0);try{if(t===window)return!1}catch(o){return!0}try{if(!t)return!0}catch(o){return!0}try{if(t.closed)return!0}catch(o){return!o||o.message!==g}if(e&&P(t))try{if(t.mockclosed)return!0}catch(o){}try{if(!t.parent||!t.top)return!0}catch(o){}var n=function(t,e){for(var n=0;n<t.length;n++)try{if(t[n]===e)return n}catch(o){}return-1}(I,t);if(-1!==n){var r=D[n];if(r&&function(t){if(!t.contentWindow)return!0;if(!t.parentNode)return!0;var e=t.ownerDocument;return!(!e||!e.documentElement||e.documentElement.contains(t))}(r))return!0}return!1}function F(t){return void 0===t&&(t=window),E(t=t||window)||b(t)||void 0}function L(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],o=0;o<e.length;o++)if(r===e[o])return!0;return!1}function W(t){void 0===t&&(t=window);for(var e=0,n=t;n;)(n=b(n))&&(e+=1);return e}function U(t,e){var n=k(t)||t,r=k(e)||e;try{if(n&&r)return n===r}catch(u){}var o=S(t),i=S(e);if(L(o,i))return!0;var s=E(n),a=E(r);return!(s&&L(S(s),i)||(a&&L(S(a),o),1))}function M(t,e){if("string"==typeof t){if("string"==typeof e)return t===m||e===t;if(v(e))return!1;if(Array.isArray(e))return!1}return v(t)?v(e)?t.toString()===e.toString():!Array.isArray(e)&&Boolean(e.match(t)):!!Array.isArray(t)&&(Array.isArray(e)?JSON.stringify(t)===JSON.stringify(e):!v(e)&&t.some(function(t){return M(t,e)}))}function B(t){return t.match(/^(https?|mock|file):\/\//)?t.split("/").slice(0,3).join("/"):O()}function z(t,e,n,r){var o;return void 0===n&&(n=1e3),void 0===r&&(r=1/0),function i(){if(N(t))return o&&clearTimeout(o),e();r<=0?clearTimeout(o):(r-=n,o=setTimeout(i,n))}(),{cancel:function(){o&&clearTimeout(o)}}}function q(t){try{if(t===window)return!0}catch(e){if(e&&e.message===g)return!0}try{if("[object Window]"==={}.toString.call(t))return!0}catch(e){if(e&&e.message===g)return!0}try{if(window.Window&&t instanceof window.Window)return!0}catch(e){if(e&&e.message===g)return!0}try{if(t&&t.self===t)return!0}catch(e){if(e&&e.message===g)return!0}try{if(t&&t.parent===t)return!0}catch(e){if(e&&e.message===g)return!0}try{if(t&&t.top===t)return!0}catch(e){if(e&&e.message===g)return!0}try{if(t&&"__unlikely_value__"===t.__cross_domain_utils_window_check__)return!1}catch(e){return!0}return!1}function H(t,e){for(var n=0;n<t.length;n++)try{if(t[n]===e)return n}catch(r){}return-1}var V,G,Y=Object.defineProperty,$=Date.now()%1e9,X=function(){function t(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,$+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+$,function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var t=new WeakMap,e={};return Object.freeze(e),t.set(e,"__testvalue__"),"__testvalue__"===t.get(e)}catch(n){return!1}}())try{this.weakmap=new WeakMap}catch(t){}this.keys=[],this.values=[]}var e=t.prototype;return e._cleanupClosedWindows=function(){for(var t=this.weakmap,e=this.keys,n=0;n<e.length;n++){var r=e[n];if(q(r)&&N(r)){if(t)try{t.delete(r)}catch(o){}e.splice(n,1),this.values.splice(n,1),n-=1}}},e.isSafeToReadWrite=function(t){return!q(t)},e.set=function(t,e){if(!t)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(t,e)}catch(u){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var r=this.name,o=t[r];return void(o&&o[0]===t?o[1]=e:Y(t,r,{value:[t,e],writable:!0}))}catch(u){}this._cleanupClosedWindows();var i=this.keys,s=this.values,a=H(i,t);-1===a?(i.push(t),s.push(e)):s[a]=e},e.get=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(t))return e.get(t)}catch(o){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];return n&&n[0]===t?n[1]:void 0}catch(o){}this._cleanupClosedWindows();var r=H(this.keys,t);if(-1!==r)return this.values[r]},e.delete=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.delete(t)}catch(i){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];n&&n[0]===t&&(n[0]=n[1]=void 0)}catch(i){}this._cleanupClosedWindows();var r=this.keys,o=H(r,t);-1!==o&&(r.splice(o,1),this.values.splice(o,1))},e.has=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(t))return!0}catch(r){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];return!(!n||n[0]!==t)}catch(r){}return this._cleanupClosedWindows(),-1!==H(this.keys,t)},e.getOrSet=function(t,e){if(this.has(t))return this.get(t);var n=e();return this.set(t,n),n},t}();function J(t){if("function"==typeof btoa)return btoa(t);if("undefined"!=typeof e)return e.from(t,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}function Q(){var t="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return t.charAt(Math.floor(Math.random()*t.length))})+"_"+J((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function Z(t){try{return JSON.stringify([].slice.call(t),function(t,e){return"function"==typeof e?"memoize["+function(t){if(V=V||new X,null==t||"object"!=typeof t&&"function"!=typeof t)throw new Error("Invalid object");var e=V.get(t);return e||(e=typeof t+":"+Q(),V.set(t,e)),e}(e)+"]":e})}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}}function K(t){var e={};function n(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=Z(r);return e.hasOwnProperty(i)?e[i]:(e[i]=t.apply(this,arguments).finally(function(){delete e[i]}),e[i])}return n.reset=function(){e={}},n}function tt(t,e,n){void 0===n&&(n=[]);var r=t.__inline_memoize_cache__=t.__inline_memoize_cache__||{},o=Z(n);return r.hasOwnProperty(o)?r[o]:r[o]=e.apply(void 0,n)}function et(){}function nt(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}function rt(t,e){if(void 0===e&&(e=1),e>=3)return"stringifyError stack overflow";try{if(!t)return"<unknown error: "+{}.toString.call(t)+">";if("string"==typeof t)return t;if(t instanceof Error){var n=t&&t.stack,r=t&&t.message;if(n&&r)return-1!==n.indexOf(r)?n:r+"\n"+n;if(n)return n;if(r)return r}return t&&t.toString&&"function"==typeof t.toString?t.toString():{}.toString.call(t)}catch(o){return"Error while stringifying error: "+rt(o,e+1)}}function ot(t){return"string"==typeof t?t:t&&t.toString&&"function"==typeof t.toString?t.toString():{}.toString.call(t)}function it(t,e){if(!e)return t;if(Object.assign)return Object.assign(t,e);for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function st(t,e){var n;return function r(){n=setTimeout(function(){t(),r()},e)}(),{cancel:function(){clearTimeout(n)}}}function at(t){return[].slice.call(t)}function ut(t){return null!=t}function ct(t){return"[object RegExp]"==={}.toString.call(t)}function ft(t,e,n){if(t.hasOwnProperty(e))return t[e];var r=n();return t[e]=r,r}function lt(t){var e=[],n=!1;return{set:function(e,r){return n||(t[e]=r,this.register(function(){delete t[e]})),r},register:function(t){n?t():e.push(nt(t))},all:function(){var t=[];for(n=!0;e.length;){var r=e.pop();t.push(r())}return p.all(t).then(et)}}}function ht(t,e){if(null==e)throw new Error("Expected "+t+" to be present");return e}function dt(){return Boolean(document.body)&&"complete"===document.readyState}function pt(t){return t.replace(/\?/g,"%3F").replace(/&/g,"%26").replace(/#/g,"%23").replace(/\+/g,"%2B")}function vt(){return tt(vt,function(){return new p(function(t){if(dt())return t();var e=setInterval(function(){if(dt())return clearInterval(e),t()},10)})})}function yt(t){return tt(yt,function(){var e={};if(!t)return e;if(-1===t.indexOf("="))return e;for(var n=0,r=t.split("&");n<r.length;n++){var o=r[n];(o=o.split("="))[0]&&o[1]&&(e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}return e},[t])}function mt(t,e){return void 0===e&&(e={}),e&&Object.keys(e).length?(void 0===(n=i({},yt(t),e))&&(n={}),Object.keys(n).filter(function(t){return"string"==typeof n[t]}).map(function(t){return pt(t)+"="+pt(n[t])}).join("&")):t;var n}function wt(t){return t instanceof window.Element||null!==t&&"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}function gt(t,e){return void 0===e&&(e=document),wt(t)?t:"string"==typeof t?e.querySelector(t):void 0}function _t(t){return new p(function(e,n){var r=ot(t),o=gt(t);if(o)return e(o);if(dt())return n(new Error("Document is ready and element "+r+" does not exist"));var i=setInterval(function(){return(o=gt(t))?(clearInterval(i),e(o)):dt()?(clearInterval(i),n(new Error("Document is ready and element "+r+" does not exist"))):void 0},10)})}function bt(t){this.message=t}function Et(t){if((G=G||new X).has(t)){var e=G.get(t);if(e)return e}var n=new p(function(e,n){t.addEventListener("load",function(){(function(t){if(function(){for(var t=0;t<I.length;t++){var e=!1;try{e=I[t].closed}catch(n){}e&&(D.splice(t,1),I.splice(t,1))}}(),t&&t.contentWindow)try{I.push(t.contentWindow),D.push(t)}catch(e){}})(t),e(t)}),t.addEventListener("error",function(r){t.contentWindow?e(t):n(r)})});return G.set(t,n),n}function xt(t){return Et(t).then(function(t){if(!t.contentWindow)throw new Error("Could not find window in iframe");return t.contentWindow})}function Ct(t,e){void 0===t&&(t={});var n=t.style||{},r=function(t,e,n){void 0===t&&(t="div"),void 0===e&&(e={}),t=t.toLowerCase();var r,o,i,s=document.createElement(t);if(e.style&&it(s.style,e.style),e.class&&(s.className=e.class.join(" ")),e.id&&s.setAttribute("id",e.id),e.attributes)for(var a=0,u=Object.keys(e.attributes);a<u.length;a++){var c=u[a];s.setAttribute(c,e.attributes[c])}if(e.styleSheet&&(r=s,o=e.styleSheet,void 0===i&&(i=window.document),r.styleSheet?r.styleSheet.cssText=o:r.appendChild(i.createTextNode(o))),e.html){if("iframe"===t)throw new Error("Iframe html can not be written unless container provided and iframe in DOM");s.innerHTML=e.html}return s}("iframe",{attributes:i({allowTransparency:"true"},t.attributes||{}),style:i({backgroundColor:"transparent",border:"none"},n),html:t.html,class:t.class}),o=window.navigator.userAgent.match(/MSIE|Edge/i);return r.hasAttribute("id")||r.setAttribute("id",Q()),Et(r),e&&function(t,e){void 0===e&&(e=document);var n=gt(t,e);if(n)return n;throw new Error("Can not find element: "+ot(t))}(e).appendChild(r),(t.url||o)&&r.setAttribute("src",t.url||"about:blank"),r}function Ot(t,e,n){return t.addEventListener(e,n),{cancel:function(){t.removeEventListener(e,n)}}}function Pt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Tt(t){return!t||!t.parentNode}function Rt(t,e,n){var r=void 0===n?{}:n,o=r.width,i=void 0===o||o,s=r.height,a=void 0===s||s,u=r.interval,c=void 0===u?100:u,f=r.win,l=void 0===f?window:f,h=t.offsetWidth,d=t.offsetHeight;e({width:h,height:d});var p,v,y=function(){var n=t.offsetWidth,r=t.offsetHeight;(i&&n!==h||a&&r!==d)&&e({width:n,height:r}),h=n,d=r};return void 0!==l.ResizeObserver?(p=new l.ResizeObserver(y)).observe(t):void 0!==l.MutationObserver?((p=new l.MutationObserver(y)).observe(t,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),l.addEventListener("resize",y)):function t(){y(),v=setTimeout(t,c)}(),{cancel:function(){p.disconnect(),window.removeEventListener("resize",y),clearTimeout(v)}}}function At(t){return"string"==typeof t&&/^[0-9]+%$/.test(t)}function jt(t){return"string"==typeof t&&/^[0-9]+px$/.test(t)}function kt(t){return function(t){if("number"==typeof t)return t;var e=t.match(/^([0-9]+)(px|%)$/);if(!e)throw new Error("Could not match css value from "+t);return parseInt(e[1],10)}(t)+"px"}function St(t){return"number"==typeof t?kt(t):At(t)?t:kt(t)}bt.prototype=Object.create(Error.prototype);var It={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},Dt="*",Nt={CROSS_DOMAIN_ZALGO_PROMISE:"cross_domain_zalgo_promise",CROSS_DOMAIN_FUNCTION:"cross_domain_function",CROSS_DOMAIN_WINDOW:"cross_domain_window"};function Ft(t){return void 0===t&&(t=window),t!==window?t.__post_robot_10_0_18__:t.__post_robot_10_0_18__=t.__post_robot_10_0_18__||{}}var Lt=function(){return{}};function Wt(t,e){return void 0===t&&(t="store"),void 0===e&&(e=Lt),ft(Ft(),t,function(){var t=e();return{has:function(e){return t.hasOwnProperty(e)},get:function(e,n){return t.hasOwnProperty(e)?t[e]:n},set:function(e,n){return t[e]=n,n},del:function(e){delete t[e]},getOrSet:function(e,n){return ft(t,e,n)},reset:function(){t=e()},keys:function(){return Object.keys(t)}}})}var Ut=function(){};function Mt(){var t=Ft();return t.WINDOW_WILDCARD=t.WINDOW_WILDCARD||new Ut,t.WINDOW_WILDCARD}function Bt(t,e){return void 0===t&&(t="store"),void 0===e&&(e=Lt),Wt("windowStore").getOrSet(t,function(){var n=new X,r=function(t){return n.getOrSet(t,e)};return{has:function(e){return r(e).hasOwnProperty(t)},get:function(e,n){var o=r(e);return o.hasOwnProperty(t)?o[t]:n},set:function(e,n){return r(e)[t]=n,n},del:function(e){delete r(e)[t]},getOrSet:function(e,n){return ft(r(e),t,n)}}})}function zt(){return Wt("instance").getOrSet("instanceID",Q)}function qt(t){return Bt("helloPromises").getOrSet(t,function(){return new p})}function Ht(t,e){return(0,e.send)(t,It.HELLO,{instanceID:zt()},{domain:Dt,timeout:-1}).then(function(e){var n=e.origin,r=e.data.instanceID;return qt(t).resolve({win:t,domain:n}),{win:t,domain:n,instanceID:r}})}function Vt(t,e){var n=e.send;return Bt("windowInstanceIDPromises").getOrSet(t,function(){return Ht(t,{send:n}).then(function(t){return t.instanceID})})}function Gt(t){Bt("knownWindows").set(t,!0)}var Yt,$t={FUNCTION:"function",ERROR:"error",PROMISE:"promise",REGEX:"regex",DATE:"date",ARRAY:"array",OBJECT:"object",STRING:"string",NUMBER:"number",BOOLEAN:"boolean",NULL:"null",UNDEFINED:"undefined"};function Xt(t){return"object"==typeof t&&null!==t&&"string"==typeof t.__type__}function Jt(t){return void 0===t?$t.UNDEFINED:null===t?$t.NULL:Array.isArray(t)?$t.ARRAY:"function"==typeof t?$t.FUNCTION:"object"==typeof t?t instanceof Error?$t.ERROR:"function"==typeof t.then?$t.PROMISE:"[object RegExp]"==={}.toString.call(t)?$t.REGEX:"[object Date]"==={}.toString.call(t)?$t.DATE:$t.OBJECT:"string"==typeof t?$t.STRING:"number"==typeof t?$t.NUMBER:"boolean"==typeof t?$t.BOOLEAN:void 0}function Qt(t,e){return{__type__:t,__val__:e}}var Zt,Kt=((Yt={})[$t.FUNCTION]=function(){},Yt[$t.ERROR]=function(t){return Qt($t.ERROR,{message:t.message,stack:t.stack,code:t.code})},Yt[$t.PROMISE]=function(){},Yt[$t.REGEX]=function(t){return Qt($t.REGEX,t.source)},Yt[$t.DATE]=function(t){return Qt($t.DATE,t.toJSON())},Yt[$t.ARRAY]=function(t){return t},Yt[$t.OBJECT]=function(t){return t},Yt[$t.STRING]=function(t){return t},Yt[$t.NUMBER]=function(t){return t},Yt[$t.BOOLEAN]=function(t){return t},Yt[$t.NULL]=function(t){return t},Yt),te={},ee=((Zt={})[$t.FUNCTION]=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},Zt[$t.ERROR]=function(t){var e=t.stack,n=t.code,r=new Error(t.message);return r.code=n,r.stack=e+"\n\n"+r.stack,r},Zt[$t.PROMISE]=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},Zt[$t.REGEX]=function(t){return new RegExp(t)},Zt[$t.DATE]=function(t){return new Date(t)},Zt[$t.ARRAY]=function(t){return t},Zt[$t.OBJECT]=function(t){return t},Zt[$t.STRING]=function(t){return t},Zt[$t.NUMBER]=function(t){return t},Zt[$t.BOOLEAN]=function(t){return t},Zt[$t.NULL]=function(t){return t},Zt),ne={};function re(){for(var t=Wt("idToProxyWindow"),e=0,n=t.keys();e<n.length;e++){var r=n[e];t.get(r).shouldClean()&&t.del(r)}}function oe(t,e,n){var r,o=n.send;return{id:t,type:E(e)?w.POPUP:w.IFRAME,getInstanceID:K(function(){return Vt(e,{send:o})}),close:function(){return p.try(function(){!function(t){try{t.close()}catch(e){}}(e)})},getName:function(){return p.try(function(){if(!N(e))return r})},focus:function(){return p.try(function(){e.focus()})},isClosed:function(){return p.try(function(){return N(e)})},setLocation:function(t){return p.try(function(){if(P(e))try{if(e.location&&"function"==typeof e.location.replace)return void e.location.replace(t)}catch(n){}e.location=t})},setName:function(t){return p.try(function(){(e=T(e)).name=t,e.frameElement&&e.frameElement.setAttribute("name",t),r=t})}}}new p(function(t){if(window.document&&window.document.body)return t(window.document.body);var e=setInterval(function(){if(window.document&&window.document.body)return clearInterval(e),t(window.document.body)},10)});var ie=function(){function t(t,e,n){var r=n.send;this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.serializedWindow=t,this.actualWindowPromise=new p,this.send=r,e&&this.setWindow(e)}var e=t.prototype;return e.getType=function(){return this.serializedWindow.type},e.isPopup=function(){return this.getType()===w.POPUP},e.isIframe=function(){return this.getType()===w.IFRAME},e.setLocation=function(t){var e=this;return this.serializedWindow.setLocation(t).then(function(){return e})},e.setName=function(t){var e=this;return this.serializedWindow.setName(t).then(function(){return e})},e.close=function(){var t=this;return this.serializedWindow.close().then(function(){return t})},e.focus=function(){var t=this;return p.try(function(){return p.all([t.isPopup()&&t.serializedWindow.getName().then(function(t){t&&window.open("",t)}),t.serializedWindow.focus()])}).then(function(){return t})},e.isClosed=function(){return this.serializedWindow.isClosed()},e.getWindow=function(){return this.actualWindow},e.setWindow=function(t){this.actualWindow=t,this.serializedWindow=oe(this.serializedWindow.id,t,{send:this.send}),this.actualWindowPromise.resolve(t)},e.awaitWindow=function(){return this.actualWindowPromise},e.matchWindow=function(t){var e=this;return p.try(function(){return e.actualWindow?t===e.actualWindow:p.hash({proxyInstanceID:e.getInstanceID(),knownWindowInstanceID:Vt(t,{send:e.send})}).then(function(n){var r=n.proxyInstanceID===n.knownWindowInstanceID;return r&&e.setWindow(t),r})})},e.unwrap=function(){return this.actualWindow||this},e.getInstanceID=function(){return this.serializedWindow.getInstanceID()},e.serialize=function(){return this.serializedWindow},e.shouldClean=function(){return this.actualWindow&&N(this.actualWindow)},t.unwrap=function(e){return t.isProxyWindow(e)?e.unwrap():e},t.serialize=function(e,n){var r=n.send;return re(),t.toProxyWindow(e,{send:r}).serialize()},t.deserialize=function(e,n){var r=n.on,o=n.send;return re(),Wt("idToProxyWindow").getOrSet(e.id,function(){return new t(e,null,{on:r,send:o})})},t.isProxyWindow=function(t){return Boolean(t&&!q(t)&&t.isProxyWindow)},t.toProxyWindow=function(e,n){var r=n.send;if(re(),t.isProxyWindow(e))return e;var o=e;return Bt("winToProxyWindow").getOrSet(e,function(){var e=Q(),n=new t(oe(e,o,{send:r}),o,{send:r});return Wt("idToProxyWindow").set(e,n)})},t}();function se(t,e,n,r,o){var i=Bt("methodStore"),s=Wt("proxyWindowMethods");ie.isProxyWindow(r)?s.set(t,{val:e,name:n,domain:o,source:r}):(s.del(t),i.getOrSet(r,function(){return{}})[t]={domain:o,name:n,val:e,source:r})}function ae(t,e){var n=Bt("methodStore"),r=Wt("proxyWindowMethods");return n.getOrSet(t,function(){return{}})[e]||r.get(e)}function ue(t,e,n,r,o){!function(t){var e=o.on;Wt("builtinListeners").getOrSet("functionCalls",function(){return e(It.METHOD,{domain:Dt},function(t){var e=t.source,n=t.origin,r=t.data,o=r.id,i=r.name,s=ae(e,o);if(!s)throw new Error("Could not find method '"+r.name+"' with id: "+r.id+" in "+O(window));var a=s.source,u=s.domain,c=s.val;return p.try(function(){if(!M(u,n))throw new Error("Method '"+r.name+"' domain "+JSON.stringify(ct(s.domain)?s.domain.source:s.domain)+" does not match origin "+n+" in "+O(window));if(ie.isProxyWindow(a))return a.matchWindow(e).then(function(t){if(!t)throw new Error("Method call '"+r.name+"' failed - proxy window does not match source in "+O(window))})}).then(function(){return c.apply({source:e,origin:n},r.args)},function(t){return p.try(function(){if(c.onError)return c.onError(t)}).then(function(){throw t.stack&&(t.stack="Remote call to "+i+"()\n\n"+t.stack),t})}).then(function(t){return{result:t,id:o,name:i}})})})}();var i=n.__id__||Q();t=ie.unwrap(t);var s=n.__name__||n.name||r;return ie.isProxyWindow(t)?(se(i,n,s,t,e),t.awaitWindow().then(function(t){se(i,n,s,t,e)})):se(i,n,s,t,e),Qt(Nt.CROSS_DOMAIN_FUNCTION,{id:i,name:s})}function ce(t,e,n,r){var o,i=r.on,s=r.send;return function(t,e){void 0===e&&(e=te);var n=JSON.stringify(t,function(t){var n=this[t];if(Xt(this))return n;var r=Jt(n);if(!r)return n;var o=e[r]||Kt[r];return o?o(n,t):n});return void 0===n?$t.UNDEFINED:n}(n,((o={})[$t.PROMISE]=function(n,r){return function(t,e,n,r,o){return Qt(Nt.CROSS_DOMAIN_ZALGO_PROMISE,{then:ue(t,e,function(t,e){return n.then(t,e)},r,{on:o.on,send:o.send})})}(t,e,n,r,{on:i,send:s})},o[$t.FUNCTION]=function(n,r){return ue(t,e,n,r,{on:i,send:s})},o[$t.OBJECT]=function(t){return q(t)||ie.isProxyWindow(t)?Qt(Nt.CROSS_DOMAIN_WINDOW,ie.serialize(t,{send:s})):t},o))}function fe(t,e,n,r){var o,i=r.on,s=r.send;return function(t,e){if(void 0===e&&(e=ne),t!==$t.UNDEFINED)return JSON.parse(t,function(t,n){if(Xt(this))return n;var r,o;if(Xt(n)?(r=n.__type__,o=n.__val__):(r=Jt(n),o=n),!r)return o;var i=e[r]||ee[r];return i?i(o,t):o})}(n,((o={})[Nt.CROSS_DOMAIN_ZALGO_PROMISE]=function(t){return new p(t.then)},o[Nt.CROSS_DOMAIN_FUNCTION]=function(n){return function(t,e,r,o){var i=n.id,s=n.name,a=o.send,u=function(n){function r(){var o=arguments;return ie.toProxyWindow(t,{send:a}).awaitWindow().then(function(t){var u=ae(t,i);if(u&&u.val!==r)return u.val.apply({source:window,origin:O()},o);var c={domain:e,fireAndForget:n.fireAndForget},f=[].slice.call(o);return a(t,It.METHOD,{id:i,name:s,args:f},c).then(function(t){if(!n.fireAndForget)return t.data.result})}).catch(function(t){throw t})}return void 0===n&&(n={}),r.__name__=s,r.__origin__=e,r.__source__=t,r.__id__=i,r.origin=e,r},c=u();return c.fireAndForget=u({fireAndForget:!0}),c}(t,e,0,{on:i,send:s})},o[Nt.CROSS_DOMAIN_WINDOW]=function(t){return ie.deserialize(t,{on:(e={on:i,send:s}).on,send:e.send});var e},o))}var le={};function he(t,e,n,r){var o,s=r.on,a=r.send;if(N(t))throw new Error("Window is closed");for(var u=ce(t,e,((o={}).__post_robot_10_0_18__=i({id:Q(),origin:O(window)},n),o),{on:s,send:a}),c=Object.keys(le),f=[],l=0;l<c.length;l++){var h=c[l];try{le[h](t,u,e)}catch(d){f.push(d)}}if(f.length===c.length)throw new Error("All post-robot messaging strategies failed:\n\n"+f.map(rt).join("\n\n"))}le.postrobot_post_message=function(t,e,n){(Array.isArray(n)?n:"string"==typeof n?[n]:[Dt]).map(function(t){return 0===t.indexOf(y.FILE)?Dt:t}).forEach(function(n){t.postMessage(e,n)})},le.postrobot_global=function(t,e){if(function(t){return(t=t||window).navigator.mockUserAgent||t.navigator.userAgent}(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i)){if(!P(t))throw new Error("Post message through global disabled between different domain windows");if(!1!==U(window,t))throw new Error("Can only use global to communicate between two different windows, not between frames");var n=Ft(t);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:O(),data:e})}};var de,pe="__domain_regex__";function ve(t){return Wt("responseListeners").get(t)}function ye(t){Wt("responseListeners").del(t)}function me(t){return Wt("erroredResponseListeners").has(t)}function we(t){var e=t.name,n=t.win,r=t.domain,o=Bt("requestListeners");if(n===Dt&&(n=null),r===Dt&&(r=null),!e)throw new Error("Name required to get request listener");for(var i=0,s=[n,Mt()];i<s.length;i++){var a=s[i];if(a){var u=o.get(a);if(u){var c=u[e];if(c){if(r&&"string"==typeof r){if(c[r])return c[r];if(c[pe])for(var f=0,l=c[pe];f<l.length;f++){var h=l[f],d=h.listener;if(M(h.regex,r))return d}}if(c[Dt])return c[Dt]}}}}}var ge=((de={}).postrobot_message_request=function(t,e,n,r){var o=r.on,s=r.send,a=we({name:n.name,win:t,domain:e});function u(r,a,u){void 0===u&&(u={}),n.fireAndForget||N(t)||he(t,e,i({type:r,ack:a,hash:n.hash,name:n.name},u),{on:o,send:s})}return p.all([u("postrobot_message_ack"),p.try(function(){if(!a)throw new Error("No handler found for post message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!M(a.domain,e))throw new Error("Request origin "+e+" does not match domain "+a.domain.toString());return a.handler({source:t,origin:e,data:n.data})}).then(function(t){return u("postrobot_message_response","success",{data:t})},function(t){return u("postrobot_message_response","error",{error:t})})]).then(et).catch(function(t){if(a&&a.handleError)return a.handleError(t);throw t})},de.postrobot_message_ack=function(t,e,n){if(!me(n.hash)){var r=ve(n.hash);if(!r)throw new Error("No handler found for post message ack for message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!M(r.domain,e))throw new Error("Ack origin "+e+" does not match domain "+r.domain.toString());if(t!==r.win)throw new Error("Ack source does not match registered window");r.ack=!0}},de.postrobot_message_response=function(t,e,n){if(!me(n.hash)){var r,o=ve(n.hash);if(!o)throw new Error("No handler found for post message response for message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!M(o.domain,e))throw new Error("Response origin "+e+" does not match domain "+(r=o.domain,Array.isArray(r)?"("+r.join(" | ")+")":v(r)?"RegExp("+r.toString():r.toString()));if(t!==o.win)throw new Error("Response source does not match registered window");ye(n.hash),"error"===n.ack?o.promise.reject(n.error):"success"===n.ack&&o.promise.resolve({source:t,origin:e,data:n.data})}},de);function _e(t,e){var n=e.on,r=e.send,o=Wt("receivedMessages");if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!t.source)return}catch(u){return}var i=t.source,s=t.origin,a=function(t,e,n,r){var o,i=r.on,s=r.send;try{o=fe(e,n,t,{on:i,send:s})}catch(u){return}if(o&&"object"==typeof o&&null!==o&&(o=o.__post_robot_10_0_18__)&&"object"==typeof o&&null!==o&&o.type&&"string"==typeof o.type&&ge[o.type])return o}(t.data,i,s,{on:n,send:r});a&&(Gt(i),o.has(a.id)||(o.set(a.id,!0),N(i)&&!a.fireAndForget||(0===a.origin.indexOf(y.FILE)&&(s=y.FILE+"//"),ge[a.type](i,s,a,{on:n,send:r}))))}function be(t,e,n){if(!t)throw new Error("Expected name");if("function"==typeof e&&(n=e,e={}),!n)throw new Error("Expected handler");(e=e||{}).name=t,e.handler=n||e.handler;var r=e.window,o=e.domain,i=function t(e,n){var r=e.name,o=e.win,i=e.domain,s=Bt("requestListeners");if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var a=[],u=0,c=o;u<c.length;u++)a.push(t({name:r,domain:i,win:c[u]},n));return{cancel:function(){for(var t=0;t<a.length;t++)a[t].cancel()}}}if(Array.isArray(i)){for(var f=[],l=0,h=i;l<h.length;l++)f.push(t({name:r,win:o,domain:h[l]},n));return{cancel:function(){for(var t=0;t<f.length;t++)f[t].cancel()}}}var d=we({name:r,win:o,domain:i});if(o&&o!==Dt||(o=Mt()),i=i||Dt,d)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===Mt()?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===Mt()?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var p,v,y=s.getOrSet(o,function(){return{}}),m=ft(y,r,function(){return{}}),w=i.toString();return ct(i)?(p=ft(m,pe,function(){return[]})).push(v={regex:i,listener:n}):m[w]=n,{cancel:function(){delete m[w],v&&(p.splice(p.indexOf(v,1)),p.length||delete m[pe]),Object.keys(m).length||delete y[r],o&&!Object.keys(y).length&&s.del(o)}}}({name:t,win:r,domain:o},{handler:e.handler,handleError:e.errorHandler||function(t){throw t},window:r,domain:o||Dt,name:t});return{cancel:function(){i.cancel()}}}var Ee,xe=function t(e,n,r,o){var i=(o=o||{}).domain||Dt,s=o.timeout||-1,a=o.timeout||5e3,u=o.fireAndForget||!1;return p.try(function(){return function(t,e,n){if(!t)throw new Error("Expected name");if(n&&"string"!=typeof n&&!Array.isArray(n)&&!ct(n))throw new TypeError("Expected domain to be a string, array, or regex");if(N(e))throw new Error("Target window is closed")}(n,e,i),function(t,e,n,r){var o=r.send;return p.try(function(){return function(t,e){var n=F(e);if(n)return n===t;if(e===t)return!1;if(k(e)===e)return!1;for(var r=0,o=A(t);r<o.length;r++)if(o[r]===e)return!0;return!1}(window,t)?function(t,e,n){void 0===e&&(e=5e3),void 0===n&&(n="Window");var r=qt(t);return-1!==e&&(r=r.timeout(e,new Error(n+" did not load after "+e+"ms"))),r}(t,n):ct(e)?Ht(t,{send:o}):{domain:e}}).then(function(t){return t.domain})}(e,i,a,{send:t})}).then(function(o){if(!M(i,o))throw new Error("Domain "+ot(i)+" does not match "+ot(o));i=o;var a=n===It.METHOD&&r&&"string"==typeof r.name?r.name+"()":n,c=new p,f=n+"_"+Q();if(!u){var l={name:n,win:e,domain:i,promise:c};!function(t,e){Wt("responseListeners").set(t,e)}(f,l);var h=Bt("requestPromises").getOrSet(e,function(){return[]});h.push(c),c.catch(function(){!function(t){Wt("erroredResponseListeners").set(t,!0)}(f),ye(f)});var d=function(t){return Bt("knownWindows").get(t,!1)}(e)?1e4:2e3,v=s,y=d,m=v,w=st(function(){return N(e)?c.reject(new Error("Window closed for "+n+" before "+(l.ack?"response":"ack"))):l.cancelled?c.reject(new Error("Response listener was cancelled for "+n)):(y=Math.max(y-500,0),-1!==m&&(m=Math.max(m-500,0)),l.ack||0!==y?0===m?c.reject(new Error("No response for postMessage "+a+" in "+O()+" in "+v+"ms")):void 0:c.reject(new Error("No ack for postMessage "+a+" in "+O()+" in "+d+"ms")))},500);c.finally(function(){w.cancel(),h.splice(h.indexOf(c,1))}).catch(et)}return he(e,i,{type:"postrobot_message_request",hash:f,name:n,data:r,fireAndForget:u},{on:be,send:t}),u?c.resolve():c})};function Ce(t,e,n){return ce(t,e,n,{on:be,send:xe})}function Oe(t,e,n){return fe(t,e,n,{on:be,send:xe})}function Pe(t){return ie.toProxyWindow(t,{send:xe})}function Te(t){if(void 0===t&&(t=window),!P(t))throw new Error("Can not get global for window on different domain");return t.__zoid_9_0_28__||(t.__zoid_9_0_28__={}),t.__zoid_9_0_28__}function Re(t){return{get:function(){var e=this;return p.try(function(){if(e.source&&e.source!==window)throw new Error("Can not call get on proxy object from a remote window");return t})}}}var Ae="zoid",je=Ae+"_delegate",ke=Ae+"_allow_delegate",Se={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},Ie={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},De=w,Ne="*",Fe={WIDTH:"300px",HEIGHT:"150px"},Le={RENDER:"zoid-render",RENDERED:"zoid-rendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",PROPS:"zoid-props",RESIZE:"zoid-resize"};function We(t,e,n,r,o){var s=t.getPropDefinition(n);return s&&"function"==typeof s.childDecorate?s.childDecorate(i({value:r},o)):r}function Ue(t){return tt(Ue,function(){if(!t)throw new Error("No window name");var n=t.split("__"),r=n[1],o=n[2],i=n[3];if(r!==Ae)throw new Error("Window not rendered by zoid - got "+r);if(!o)throw new Error("Expected component name");if(!i)throw new Error("Expected encoded payload");try{return JSON.parse(function(t){if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob(t);if("undefined"!=typeof e)return e.from(t,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(i))}catch(s){throw new Error("Can not decode window name payload: "+i+": "+rt(s))}},[t])}function Me(){try{return Ue(window.name)}catch(t){}}var Be=function(){function t(t){var e=this;this.component=void 0,this.props=void 0,this.context=void 0,this.parent=void 0,this.parentDomain=void 0,this.parentComponentWindow=void 0,this.onPropHandlers=void 0,this.autoResize=void 0,p.try(function(){e.component=t,e.onPropHandlers=[];var n=Me();if(!n)throw new Error("No child payload found");if("9_0_27"!==n.version)throw new Error("Parent window has zoid version "+n.version+", child window has version 9_0_27");var r=n.parent,o=n.parentDomain,i=n.exports,s=n.props;e.context=n.context,e.parentComponentWindow=e.getParentComponentWindow(r),e.parentDomain=o,e.parent=Oe(e.parentComponentWindow,o,i),e.checkParentDomain(o);var a=e.getPropsByRef(e.parentComponentWindow,o,s);return e.setProps(a,o),Gt(e.parentComponentWindow),e.watchForClose(),e.parent.init(e.buildExports())}).then(function(){return e.watchForResize()}).catch(function(t){e.onError(t)})}var e=t.prototype;return e.getHelpers=function(){var t=this;return{focus:function(){return t.focus()},close:function(){return t.close()},resize:function(e){return t.resize({width:e.width,height:e.height})},onError:function(e){return t.onError(e)},onProps:function(e){return t.onProps(e)},getParent:function(){return t.parentComponentWindow},getParentDomain:function(){return t.parentDomain}}},e.checkParentDomain=function(t){if(!M(this.component.allowedParentDomains,t))throw new Error("Can not be rendered by domain: "+t)},e.onProps=function(t){this.onPropHandlers.push(t)},e.getPropsByRef=function(t,e,n){var r,o=n.type,i=n.uid;if("raw"===o)r=n.value;else if("uid"===o){if(!P(t))throw new Error("Parent component window is on a different domain - expected "+O()+" - can not retrieve props");var s=Te(t);r=ht("props",s&&s.props[i])}if(!r)throw new Error("Could not find props");return Oe(t,e,r)},e.getParentComponentWindow=function(t){var e,n,r=t.type;if("opener"===r)return ht("opener",E(window));if("parent"===r&&"number"==typeof t.distance)return ht("parent",(e=window,void 0===(n=t.distance)&&(n=1),function(t,e){void 0===e&&(e=1);for(var n=t,r=0;r<e;r++){if(!n)return;n=b(n)}return n}(e,W(e)-n)));if("global"===r&&t.uid&&"string"==typeof t.uid){var o=t.uid,i=F(window);if(!i)throw new Error("Can not find ancestor window");for(var s=0,a=S(i);s<a.length;s++){var u=a[s];if(P(u)){var c=Te(u);if(c&&c.windows&&c.windows[o])return c.windows[o]}}}throw new Error("Unable to find "+r+" parent component window")},e.getProps=function(){return this.props=this.props||{},this.props},e.setProps=function(t,e,n){void 0===n&&(n=!1);var r=this.getHelpers(),o=this.getProps();it(o,function(t,e,n,r,o,i){void 0===i&&(i=!1);for(var s={},a=0,u=Object.keys(n);a<u.length;a++){var c=u[a],f=e.getPropDefinition(c);if(!f||!f.sameDomain||r===O(window)&&P(t)){var l=We(e,0,c,n[c],o);s[c]=l,f&&f.alias&&!s[f.alias]&&(s[f.alias]=l)}}if(!i)for(var h=0,d=e.getPropNames();h<d.length;h++){var p=d[h];n.hasOwnProperty(p)||(s[p]=We(e,0,p,n[p],o))}return s}(this.parentComponentWindow,this.component,t,e,r,n));for(var i=0,s=this.onPropHandlers;i<s.length;i++)s[i].call(this,o)},e.watchForClose=function(){var t=this;window.addEventListener("beforeunload",function(){t.parent.checkClose.fireAndForget()}),window.addEventListener("unload",function(){t.parent.checkClose.fireAndForget()}),z(this.parentComponentWindow,function(){t.destroy()})},e.getAutoResize=function(){var t=this.autoResize||this.component.autoResize||{},e=t.width,n=t.height,r=t.element,o=void 0===r?"body":r;return{width:void 0!==e&&e,height:void 0!==n&&n,element:o=gt(o)}},e.watchForResize=function(){var t=this;return vt().then(function(){if(document.body)return document.body;throw new Error("Document ready but document.body not present")}).then(function(){var e=t.getAutoResize(),n=e.width,r=e.height,o=e.element;o&&(n||r)&&t.context!==De.POPUP&&Rt(o,function(e){t.resize({width:n?e.width:void 0,height:r?e.height:void 0})},{width:n,height:r})})},e.buildExports=function(){var t=this;return{updateProps:function(e){var n=this;return p.try(function(){return t.setProps(e,n.__origin__,!0)})},close:function(){return p.try(function(){return t.destroy()})}}},e.resize=function(t){return this.parent.resize.fireAndForget({width:t.width,height:t.height})},e.close=function(){return this.parent.close()},e.destroy=function(){return p.try(function(){window.close()})},e.focus=function(){return p.try(function(){window.focus()})},e.onError=function(t){var e=this;return p.try(function(){if(e.parent&&e.parent.onError)return e.parent.onError(t);throw t})},t}(),ze={};function qe(t,e,n){return p.try(function(){return"function"==typeof t.queryParam?t.queryParam({value:n}):"string"==typeof t.queryParam?t.queryParam:e})}function He(t,e,n){return p.try(function(){return"function"==typeof t.queryValue&&ut(n)?t.queryValue({value:n}):n})}ze[De.IFRAME]={openOnClick:!1,openFrame:function(){return Re(Ct({attributes:i({title:this.component.name},this.component.attributes.iframe)}))},open:function(t){var e=this;if(!t)throw new Error("Expected proxy frame to be passed");return t.get().then(function(t){return xt(t).then(function(n){var r,o,i,s=(r=t,o=nt(o=function(){return e.close()}),Tt(r)?o():i=st(function(){Tt(r)&&(i.cancel(),o())},50),{cancel:function(){i&&i.cancel()}});return e.clean.register(function(){return s.cancel()}),e.clean.register(function(){return Pt(t)}),e.clean.register(function(){return function(t){for(var e=0,n=Bt("requestPromises").get(t,[]);e<n.length;e++)n[e].reject(new Error("Window cleaned up before response")).catch(et)}(n)}),Pe(n)})})},openPrerenderFrame:function(){return Re(Ct({attributes:i({name:"__zoid_prerender_frame__"+this.component.name+"_"+Q()+"__",title:"prerender__"+this.component.name},this.component.attributes.iframe)}))},openPrerender:function(t,e){var n=this;if(!e)throw new Error("Expected proxy frame to be passed");return e.get().then(function(t){return n.clean.register(function(){return Pt(t)}),xt(t).then(function(t){return T(t)}).then(function(t){return Pe(t)})})},delegate:["getProxyContainer","renderContainer","openFrame","openPrerenderFrame","prerender","open","openPrerender"]};var Ve=function(){function t(t,e){var n=this;this.component=void 0,this.driver=void 0,this.clean=void 0,this.event=void 0,this.initPromise=void 0,this.handledErrors=void 0,this.props=void 0,this.state=void 0,this.child=void 0,this.proxyWin=void 0,this.initPromise=new p,this.handledErrors=[],this.props={},this.clean=lt(this),this.state={},this.component=t,this.setupEvents(e.onError),this.setProps(e),this.component.registerActiveComponent(this),this.clean.register(function(){return n.component.destroyActiveComponent(n)}),this.watchForUnload()}var e=t.prototype;return e.setupEvents=function(t){var e,n,r=this;this.event=(e={},n={},{on:function(t,e){var r=n[t]=n[t]||[];r.push(e);var o=!1;return{cancel:function(){o||(o=!0,r.splice(r.indexOf(e),1))}}},once:function(t,e){var n=this.on(t,function(){n.cancel(),e()});return n},trigger:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var i=n[t],s=[];if(i)for(var a=function(t){var e=i[t];s.push(p.try(function(){return e.apply(void 0,r)}))},u=0;u<i.length;u++)a(u);return p.all(s).then(et)},triggerOnce:function(t){if(e[t])return p.resolve();e[t]=!0;for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.trigger.apply(this,[t].concat(r))}}),this.event.on(Le.RENDER,function(){return r.props.onRender()}),this.event.on(Le.DISPLAY,function(){return r.props.onDisplay()}),this.event.on(Le.RENDERED,function(){return r.props.onRendered()}),this.event.on(Le.CLOSE,function(){return r.props.onClose()}),this.event.on(Le.PROPS,function(t){return r.props.onProps(t)}),this.event.on(Le.ERROR,function(e){return r.props&&r.props.onError?r.props.onError(e):t?t(e):r.initPromise.reject(e).then(function(){setTimeout(function(){throw e},1)})})},e.render=function(t,e,n){var r=this;return p.try(function(){r.component.log("render"),r.driver=ze[n];var o=Ae+"-"+r.component.tag+"-"+Q(),i=r.getDomain(),s=r.getChildDomain();r.component.checkAllowRender(t,i,e),t!==window&&r.delegate(n,t);var a={},u=r.initPromise,c=r.buildUrl(),f=r.event.trigger(Le.RENDER),l=r.getProxyContainer(e),h=r.openFrame(),d=r.openPrerenderFrame(),v=p.hash({proxyContainer:l,proxyFrame:h,proxyPrerenderFrame:d}).then(function(t){return r.renderContainer(t.proxyContainer,{context:n,uid:o,proxyFrame:t.proxyFrame,proxyPrerenderFrame:t.proxyPrerenderFrame})}),y=r.driver.openOnClick?r.open():h.then(function(t){return r.open(t)}),m=p.hash({proxyWin:y,proxyPrerenderFrame:d}).then(function(t){return r.openPrerender(t.proxyWin,t.proxyPrerenderFrame)}),w=y.then(function(t){return r.proxyWin=t,r.setProxyWin(t)}),g=p.hash({proxyPrerenderWin:m,state:w}).then(function(t){return r.prerender(t.proxyPrerenderWin,{context:n,uid:o})}),_=y.then(function(e){return r.buildWindowName({proxyWin:e,childDomain:s,domain:i,target:t,context:n,uid:o})}),b=p.hash({proxyWin:y,windowName:_}).then(function(t){return t.proxyWin.setName(t.windowName)}),E=p.hash({proxyWin:y,url:c,windowName:b,prerender:g}).then(function(t){return t.proxyWin.setLocation(t.url)}),x=y.then(function(t){r.watchForClose(t)}),C=p.hash({container:v,prerender:g}).then(function(){return r.event.trigger(Le.DISPLAY)}),O=y.then(function(t){return r.openBridge(t,s,n)}),P=E.then(function(){return r.runTimeout()}),T=u.then(function(){return r.event.trigger(Le.RENDERED)});return p.hash({init:u,buildUrl:c,onRender:f,getProxyContainer:l,openFrame:h,openPrerenderFrame:d,renderContainer:v,open:y,openPrerender:m,setState:w,prerender:g,loadUrl:E,buildWindowName:_,setWindowName:b,watchForClose:x,onDisplay:C,openBridge:O,runTimeout:P,onRendered:T}).catch(function(t){for(var e=0,n=Object.keys(a);e<n.length;e++)a[n[e]].reject(t);throw t})}).catch(function(t){return p.all([r.onError(t),r.destroy(t)]).then(function(){throw t})}).then(et)},e.getProxyContainer=function(t){return p.try(function(){return _t(t)}).then(function(t){return Re(t)})},e.buildWindowName=function(t){var e=this.buildChildPayload({proxyWin:t.proxyWin,childDomain:t.childDomain,domain:t.domain,target:t.target,context:t.context,uid:t.uid});return"__"+Ae+"__"+this.component.name+"__"+J(JSON.stringify(e))+"__"},e.getPropsRef=function(t,e,n,r){var o=Ce(t,n,this.getPropsForChild(n)),i=e===O()?{type:"uid",uid:r}:{type:"raw",value:o};if("uid"===i.type){var s=Te(window);s.props=s.props||{},s.props[r]=o,this.clean.register(function(){delete s.props[r]})}return i},e.buildChildPayload=function(t){var e=void 0===t?{}:t,n=e.proxyWin,r=e.childDomain,o=e.domain,i=e.target,s=void 0===i?window:i,a=e.context,u=e.uid;return{uid:u,context:a,version:"9_0_27",childDomain:r,parentDomain:O(window),tag:this.component.tag,parent:this.getWindowRef(s,r,u,a),props:this.getPropsRef(n,r,o,u),exports:Ce(n,o,this.buildParentExports(n))}},e.setProxyWin=function(t){var e=this;return p.try(function(){e.proxyWin=t})},e.getHelpers=function(){var t=this;return{state:this.state,event:this.event,close:function(){return t.close()},focus:function(){return t.focus()},resize:function(e){return t.resize({width:e.width,height:e.height})},onError:function(e){return t.onError(e)},updateProps:function(e){return t.updateProps(e)}}},e.setProps=function(t,e){void 0===e&&(e=!1),this.component.validate&&this.component.validate({props:t});var n=this.getHelpers();!function(t,e,n,r,o){void 0===o&&(o=!1),it(e,n=n||{});for(var i=o?[]:[].concat(t.getPropNames()),s=0,a=Object.keys(n);s<a.length;s++){var u=a[s];-1===i.indexOf(u)&&i.push(u)}for(var c=[],f=r.state,l=r.close,h=r.focus,d=r.onError,p=0;p<i.length;p++){var v=i[p],y=t.getPropDefinition(v),m=n[v];if(y){var w=y.alias;if(w&&(!ut(m)&&ut(n[w])&&(m=n[w]),c.push(w)),y.value&&(m=y.value({props:e,state:f,close:l,focus:h,onError:d})),!ut(m)&&y.default&&(m=y.default({props:e,state:f,close:l,focus:h,onError:d})),ut(m)&&("array"===y.type?!Array.isArray(m):typeof m!==y.type))throw new TypeError("Prop is not of type "+y.type+": "+v);e[v]=m}}for(var g=0;g<c.length;g++)delete e[c[g]];for(var _=0,b=Object.keys(e);_<b.length;_++){var E=b[_],x=t.getPropDefinition(E),C=e[E];x&&(ut(C)&&x.validate&&x.validate({value:C,props:e}),ut(C)&&x.decorate&&(e[E]=x.decorate({value:C,props:e,state:f,close:l,focus:h,onError:d})))}for(var O=0,P=t.getPropNames();O<P.length;O++){var T=P[O];if(!1!==t.getPropDefinition(T).required&&!ut(e[T]))throw new Error('Expected prop "'+T+'" to be defined')}}(this.component,this.props,t,n,e)},e.buildUrl=function(){var t,e,n,r,o=this;return(t=i({},this.component.props,this.component.builtinProps),e=this.props,n={},r=Object.keys(e),p.all(r.map(function(r){var o=t[r];if(o)return p.resolve().then(function(){var t=e[r];if(t&&o.queryParam)return t}).then(function(t){if(null!=t)return p.all([qe(o,r,t),He(o,0,t)]).then(function(t){var e,i=t[0],s=t[1];if("boolean"==typeof s)e=s.toString();else if("string"==typeof s)e=s.toString();else if("object"==typeof s&&null!==s){if(o.serialization===Ie.JSON)e=JSON.stringify(s);else if(o.serialization===Ie.BASE64)e=btoa(JSON.stringify(s));else if(o.serialization===Ie.DOTIFY||!o.serialization){e=function t(e,n,r){for(var o in void 0===n&&(n=""),void 0===r&&(r={}),n=n?n+".":n,e)e.hasOwnProperty(o)&&null!=e[o]&&"function"!=typeof e[o]&&(e[o]&&Array.isArray(e[o])&&e[o].length&&e[o].every(function(t){return"object"!=typeof t})?r[""+n+o+"[]"]=e[o].join(","):e[o]&&"object"==typeof e[o]?r=t(e[o],""+n+o,r):r[""+n+o]=e[o].toString());return r}(s,r);for(var a=0,u=Object.keys(e);a<u.length;a++){var c=u[a];n[c]=e[c]}return}}else"number"==typeof s&&(e=s.toString());n[i]=e})})})).then(function(){return n})).then(function(t){return function(t,e){void 0===e&&(e={});var n,r,o=e.query||{},i=e.hash||{},s=t.split("#");r=s[1];var a=(n=s[0]).split("?");n=a[0];var u=mt(a[1],o),c=mt(r,i);return u&&(n=n+"?"+u),c&&(n=n+"#"+c),n}(function(t){if(0!==B(t).indexOf(y.MOCK))return t;throw new Error("Mock urls not supported out of test mode")}(o.component.getUrl(o.props)),{query:t})})},e.getDomain=function(){return this.component.getDomain(this.props)},e.getChildDomain=function(){return this.component.getChildDomain(this.props)},e.getPropsForChild=function(t){for(var e={},n=0,r=Object.keys(this.props);n<r.length;n++){var o=r[n],i=this.component.getPropDefinition(o);i&&!1===i.sendToChild||i&&i.sameDomain&&!M(t,O(window))||(e[o]=this.props[o])}return e},e.updateProps=function(t){var e=this;return this.setProps(t,!0),this.initPromise.then(function(){if(e.child)return e.child.updateProps(e.getPropsForChild(e.getDomain())).catch(function(t){if(e.child&&e.proxyWin)return e.checkClose(e.proxyWin).then(function(){if(e.child)throw t})})})},e.openFrame=function(){var t=this;return p.try(function(){if(t.driver.openFrame)return t.driver.openFrame.call(t)})},e.openPrerenderFrame=function(){var t=this;return p.try(function(){if(t.driver.openPrerenderFrame)return t.driver.openPrerenderFrame.call(t)})},e.open=function(t){var e=this;return p.try(function(){e.component.log("open");var n=e.props.window;return n?(e.clean.register(function(){return n.close()}),Pe(n)):e.driver.open.call(e,t)}).then(function(t){return e.proxyWin=t,t})},e.openPrerender=function(t,e){var n=this;return p.try(function(){return n.driver.openPrerender.call(n,t,e)})},e.focus=function(){var t=this;return p.try(function(){if(t.proxyWin)return t.proxyWin.focus().then(et)})},e.delegate=function(t,e){var n=this;this.component.log("delegate");for(var r={},o=0,i=this.component.getPropNames();o<i.length;o++){var s=i[o];this.component.getPropDefinition(s).allowDelegate&&(r[s]=this.props[s])}for(var a=xe(e,je+"_"+this.component.name,{context:t,props:r,overrides:{event:this.event,close:function(){return n.close()},onError:function(t){return n.onError(t)}}}).then(function(t){var e=t.data;return n.clean.register(e.destroy),e.overrides}).catch(function(t){throw new Error("Unable to delegate rendering. Possibly the component is not loaded in the target window.\n\n"+rt(t))}),u=function(t,e){var r=e[t];n[r]=function(){var t=this,e=arguments;return a.then(function(n){return n[r].apply(t,e)})}},c=0,f=this.driver.delegate;c<f.length;c++)u(c,f)},e.getWindowRef=function(t,e,n,r){if(e===O(window)){var o=Te(window);return o.windows=o.windows||{},o.windows[n]=window,this.clean.register(function(){delete o.windows[n]}),{type:"global",uid:n}}return r===De.POPUP?{type:"opener"}:{type:"parent",distance:W(window)}},e.watchForClose=function(t){var e=this,n=!1;return this.clean.register(function(){n=!0}),p.delay(2e3).then(function(){return t.isClosed()}).then(function(r){return r?(e.component.log("detect_close_child"),e.close()):n?void 0:e.watchForClose(t)})},e.watchForUnload=function(){var t=this,e=Ot(window,"unload",nt(function(){t.component.log("navigate_away"),t.destroy(new Error("Window navigated away"))}));this.clean.register(e.cancel)},e.runTimeout=function(){var t=this;return p.try(function(){var e=t.props.timeout;if(e)return t.initPromise.timeout(e,new Error("Loading component timed out after "+e+" milliseconds"))})},e.initChild=function(t){var e=this;return p.try(function(){e.clean.set("child",t),e.initPromise.resolve()})},e.buildParentExports=function(t){var e=this,n=function(t){return e.onError(t)},r=function(t){return e.initChild(t)};return r.onError=n,{init:r,close:function(){return e.close()},checkClose:function(){return e.checkClose(t)},resize:function(t){return e.resize({width:t.width,height:t.height})},onError:n}},e.resize=function(t){var e=this,n=t.width,r=t.height;return p.try(function(){e.event.trigger(Le.RESIZE,{width:n,height:r})})},e.checkClose=function(t){var e=this;return t.isClosed().then(function(n){return n?e.close():p.delay(200).then(function(){return t.isClosed()}).then(function(t){if(t)return e.close()})})},e.close=function(){var t=this;return p.try(function(){return t.component.log("close"),t.event.trigger(Le.CLOSE)}).then(function(){return t.child&&t.child.close.fireAndForget().catch(et),t.destroy(new Error("Window closed"),!1)})},e.prerender=function(t,e){var n=this,r=e.context,o=e.uid;return p.try(function(){var e=n.component.prerenderTemplate;if(e){var i=t.getWindow();if(i&&P(i)&&function(t){try{if(!t.location.href)return!0;if("about:blank"===t.location.href)return!0}catch(e){}return!1}(i)){var s=(i=T(i)).document,a=n.renderTemplate(e,{context:r,uid:o,doc:s});if(a){if(a.ownerDocument!==s)throw new Error("Expected prerender template to have been created with document from child window");!function(t,e){var n=e.tagName.toLowerCase();if("html"!==n)throw new Error("Expected element to be html, got "+n);for(var r=t.document.documentElement,o=0,i=at(r.children);o<i.length;o++)r.removeChild(i[o]);for(var s=0,a=at(e.children);s<a.length;s++)r.appendChild(a[s])}(i,a);var u=n.component.autoResize||{},c=u.width,f=void 0!==c&&c,l=u.height,h=void 0!==l&&l,d=u.element,p=void 0===d?"body":d;(p=gt(p,s))&&(f||h)&&Rt(p,function(t){n.resize({width:f?t.width:void 0,height:h?t.height:void 0})},{width:f,height:h,win:i})}}}})},e.renderTemplate=function(t,e){var n=this;return t.call(this,{container:e.container,context:e.context,uid:e.uid,doc:e.doc,frame:e.frame,prerenderFrame:e.prerenderFrame,focus:function(){return n.focus()},close:function(){return n.close()},state:this.state,props:this.props,tag:this.component.tag,dimensions:this.component.dimensions,event:this.event})},e.renderContainer=function(t,e){var n=this,r=e.proxyFrame,o=e.proxyPrerenderFrame,i=e.context,s=e.uid;return p.hash({container:t.get().then(_t),frame:r?r.get():null,prerenderFrame:o?o.get():null}).then(function(t){var e=t.container,r=n.renderTemplate(n.component.containerTemplate,{context:i,uid:s,container:e,frame:t.frame,prerenderFrame:t.prerenderFrame,doc:document});if(r)return function(t,e){t.appendChild(e)}(e,r),n.clean.register(function(){return Pt(r)}),Re(r)})},e.destroy=function(t,e){var n=this;return void 0===e&&(e=!0),p.try(function(){return t||(e=!1,t=new Error("Component destroyed")),n.component.log("destroy"),n.onError(t,e)}).then(function(){return n.clean.all()})},e.onError=function(t,e){var n=this;return void 0===e&&(e=!0),p.try(function(){if(-1===n.handledErrors.indexOf(t))return n.handledErrors.push(t),n.initPromise.asyncReject(t),e?n.event.trigger(Le.ERROR,t):void 0})},e.openBridge=function(t,e,n){},t}(),Ge=function(){function t(t,e,n){var r=this;this.component=void 0,this.source=void 0,this.context=void 0,this.driver=void 0,this.props=void 0,this.clean=void 0,this.focus=void 0,this.resize=void 0,this.renderTemplate=void 0,this.close=void 0,this.onError=void 0,this.event=void 0,this.component=t,this.context=n.context,this.driver=ze[n.context],this.clean=lt(this),this.focus=Ve.prototype.focus,this.resize=Ve.prototype.resize,this.renderTemplate=Ve.prototype.renderTemplate,this.props={};for(var o=0,i=Object.keys(n.props);o<i.length;o++){var s=i[o],a=this.component.getPropDefinition(s);a&&a.allowDelegate&&n.props[s]&&(this.props[s]=n.props[s])}this.close=n.overrides.close,this.onError=n.overrides.onError,this.event=n.overrides.event,this.component.registerActiveComponent(this),this.clean.register(function(){return r.component.destroyActiveComponent(r)}),this.watchForSourceClose(e)}var e=t.prototype;return e.getDelegate=function(){var t=this;return{overrides:this.getOverrides(),destroy:function(){return t.destroy()}}},e.watchForSourceClose=function(t){var e=this,n=z(t,function(){return e.destroy()},3e3);this.clean.register(n.cancel)},e.getOverrides=function(){for(var t={},e=this,n=function(n,r){var o=r[n];t[o]=function(){return Ve.prototype[o].apply(e,arguments)},t[o].__name__=o},r=0,o=this.driver.delegate;r<o.length;r++)n(r,o);return t},e.destroy=function(){return this.clean.all()},t}(),Ye={VISIBLE:"visible",INVISIBLE:"invisible"};function $e(t){var e=t.uid,n=t.frame,r=t.prerenderFrame,o=t.doc,i=t.props,s=t.event,a=t.dimensions,u=a.width,c=a.height;if(n&&r){var f=o.createElement("div");f.setAttribute("id",e);var l=o.createElement("style");return i.cspNonce&&l.setAttribute("nonce",i.cspNonce),l.appendChild(o.createTextNode("\n            #"+e+" {\n                display: inline-block;\n                position: relative;\n                width: "+u+";\n                height: "+c+";\n            }\n\n            #"+e+" > iframe {\n                display: inline-block;\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                transition: opacity .2s ease-in-out;\n            }\n\n            #"+e+" > iframe."+Ye.INVISIBLE+" {\n                opacity: 0;\n            }\n\n            #"+e+" > iframe."+Ye.VISIBLE+" {\n                opacity: 1;\n        }\n        ")),f.appendChild(n),f.appendChild(r),f.appendChild(l),r.classList.add(Ye.VISIBLE),n.classList.add(Ye.INVISIBLE),s.on(Le.RENDERED,function(){r.classList.remove(Ye.VISIBLE),r.classList.add(Ye.INVISIBLE),n.classList.remove(Ye.INVISIBLE),n.classList.add(Ye.VISIBLE),setTimeout(function(){Pt(r)},1)}),s.on(Le.RESIZE,function(t){var e=t.width,n=t.height;"number"==typeof e&&(f.style.width=St(e)),"number"==typeof n&&(f.style.height=St(n))}),f}}function Xe(t){var e=t.doc,n=t.props,r=e.createElement("html"),o=e.createElement("body"),i=e.createElement("style"),s=e.createElement("div");return s.classList.add("spinner"),n.cspNonce&&i.setAttribute("nonce",n.cspNonce),r.appendChild(o),o.appendChild(s),o.appendChild(i),i.appendChild(e.createTextNode("\n            html, body {\n                width: 100%;\n                height: 100%;\n            }\n\n            .spinner {\n                position: fixed;\n                max-height: 60vmin;\n                max-width: 60vmin;\n                height: 40px;\n                width: 40px;\n                top: 50%;\n                left: 50%;\n                box-sizing: border-box;\n                border: 3px solid rgba(0, 0, 0, .2);\n                border-top-color: rgba(33, 128, 192, 0.8);\n                border-radius: 100%;\n                animation: rotation .7s infinite linear;\n            }\n\n            @keyframes rotation {\n                from {\n                    transform: translateX(-50%) translateY(-50%) rotate(0deg);\n                }\n                to {\n                    transform: translateX(-50%) translateY(-50%) rotate(359deg);\n                }\n            }\n        ")),r}var Je=function(){return et},Qe=function(t){return nt(t.value)},Ze=function(){function t(t){this.tag=void 0,this.name=void 0,this.url=void 0,this.domain=void 0,this.bridgeUrl=void 0,this.props=void 0,this.builtinProps=void 0,this.dimensions=void 0,this.autoResize=void 0,this.allowedParentDomains=void 0,this.defaultContext=void 0,this.attributes=void 0,this.containerTemplate=void 0,this.prerenderTemplate=void 0,this.validate=void 0,this.driverCache=void 0,this.xprops=void 0,this.logger=void 0,this.propNames=void 0,function(t){if(!t)throw new Error("Expected options to be passed");if(!t.tag||!t.tag.match(/^([a-z0-9]+-)+[a-z0-9]+$/))throw new Error("Invalid options.tag: "+t.tag);if(function(t){if(t.props&&"object"!=typeof t.props)throw new Error("Expected options.props to be an object");var e=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}(Se);if(t.props)for(var n=0,r=Object.keys(t.props);n<r.length;n++){var o=r[n],i=t.props[o];if(!i||"object"!=typeof i)throw new Error("Expected options.props."+o+" to be an object");if(!i.type)throw new Error("Expected prop.type");if(-1===e.indexOf(i.type))throw new Error("Expected prop.type to be one of "+e.join(", "));if(i.required&&i.default)throw new Error("Required prop can not have a default value");if(i.type===Se.FUNCTION&&i.queryParam&&!i.queryValue)throw new Error("Do not pass queryParam for function prop")}}(t),t.dimensions){if(t.dimensions&&!jt(t.dimensions.width)&&!At(t.dimensions.width))throw new Error("Expected options.dimensions.width to be a px or % string value");if(t.dimensions&&!jt(t.dimensions.height)&&!At(t.dimensions.height))throw new Error("Expected options.dimensions.height to be a px or % string value")}if(t.defaultContext&&t.defaultContext!==De.IFRAME&&t.defaultContext!==De.POPUP)throw new Error("Unsupported context type: "+(t.defaultContext||"unknown"));if(!t.url)throw new Error("Must pass url");if("string"!=typeof t.url&&"function"!=typeof t.url)throw new TypeError("Expected url to be string or function");if(t.prerenderTemplate&&"function"!=typeof t.prerenderTemplate)throw new Error("Expected options.prerenderTemplate to be a function");if(t.containerTemplate&&"function"!=typeof t.containerTemplate)throw new Error("Expected options.containerTemplate to be a function")}(t),this.tag=t.tag,this.name=this.tag.replace(/-/g,"_"),this.allowedParentDomains=t.allowedParentDomains||Ne;var e=Te();if(e.components=e.components||{},e.components[this.tag])throw new Error("Can not register multiple components with the same tag: "+this.tag);this.builtinProps={window:{type:"object",sendToChild:!1,required:!1,allowDelegate:!0,validate:function(t){var e=t.value;if(!q(e)&&!ie.isProxyWindow(e))throw new Error("Expected Window or ProxyWindow")},decorate:function(t){return Pe(t.value)}},timeout:{type:"number",required:!1,sendToChild:!1},close:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.close}},focus:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.focus}},resize:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.resize}},cspNonce:{type:"string",required:!1},getParent:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.getParent}},getParentDomain:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.getParentDomain}},onDisplay:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:Je,decorate:Qe},onRendered:{type:"function",required:!1,sendToChild:!1,default:Je,decorate:Qe},onRender:{type:"function",required:!1,sendToChild:!1,default:Je,decorate:Qe},onClose:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:Je,decorate:Qe},onError:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.onError}},onProps:{type:"function",required:!1,sendToChild:!1,default:Je,childDecorate:function(t){return t.onProps}}},this.props=t.props||{};var n=t.dimensions||{},r=n.width,o=n.height;this.dimensions={width:void 0===r?Fe.WIDTH:r,height:void 0===o?Fe.HEIGHT:o},this.url=t.url,this.domain=t.domain,this.bridgeUrl=t.bridgeUrl,this.attributes=t.attributes||{},this.attributes.iframe=this.attributes.iframe||{},this.attributes.popup=this.attributes.popup||{},this.defaultContext=t.defaultContext||De.IFRAME,this.autoResize=t.autoResize,this.containerTemplate=t.containerTemplate?t.containerTemplate:$e,this.prerenderTemplate=t.prerenderTemplate?t.prerenderTemplate:Xe,this.validate=t.validate,this.logger=t.logger||{debug:et,info:et,warn:et,error:et},this.registerChild(),this.listenDelegate(),e.components[this.tag]=this}var e=t.prototype;return e.getPropNames=function(){if(this.propNames)return this.propNames;for(var t=Object.keys(this.props),e=0,n=Object.keys(this.builtinProps);e<n.length;e++){var r=n[e];-1===t.indexOf(r)&&t.push(r)}return this.propNames=t,t},e.getPropDefinition=function(t){return this.props[t]||this.builtinProps[t]},e.driver=function(t,e){throw new Error("Driver support not enabled")},e.registerChild=function(){if(this.isChild()){if(window.xprops)throw new Error("Can not register "+this.name+" as child - can not attach multiple components to the same window");var t=new Be(this);window.xprops=this.xprops=t.getProps()}},e.listenDelegate=function(){var t=this;be(ke+"_"+this.name,function(){return!0}),be(je+"_"+this.name,function(e){var n=e.data;return new Ge(t,e.source,{context:n.context,props:n.props,overrides:n.overrides}).getDelegate()})},e.canRenderTo=function(t){return xe(t,ke+"_"+this.name).then(function(t){return t.data}).catch(function(){return!1})},e.getUrl=function(t){return"function"==typeof this.url?this.url({props:t}):this.url},e.getChildDomain=function(t){return this.domain&&"string"==typeof this.domain?this.domain:B(this.getUrl(t))},e.getDomain=function(t){return this.domain&&ct(this.domain)?this.domain:this.getChildDomain(t)},e.getBridgeUrl=function(){if(this.bridgeUrl)return this.bridgeUrl},e.isChild=function(){var t=Me();return Boolean(t&&t.tag===this.tag&&t.childDomain===O())},e.getDefaultContainer=function(t,e){if(e){if("string"!=typeof e&&!wt(e))throw new TypeError("Expected string or element selector to be passed");return e}if(t===De.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")},e.getDefaultContext=function(t,e){if(e.window)return Pe(e.window).getType();if(t){if(t!==De.IFRAME&&t!==De.POPUP)throw new Error("Unrecognized context: "+t);return t}return this.defaultContext},e.init=function(t){var e=this,n=new Ve(this,t=t||{}),r=function(r,o,i){return p.try(function(){if(!q(r))throw new Error("Must pass window to renderTo");return i=e.getDefaultContext(i,t),o=e.getDefaultContainer(i,o),n.render(r,o,i)})};return i({},n.getHelpers(),{render:function(t,e){return r(window,t,e)},renderTo:function(t,e,n){return r(t,e,n)}})},e.checkAllowRender=function(t,e,n){if(t!==window){if(!U(window,t))throw new Error("Can only renderTo an adjacent frame");var r=O();if(!M(e,r)&&!P(t))throw new Error("Can not render remotely to "+e.toString()+" - can only render to "+r);if(n&&"string"!=typeof n)throw new Error("Container passed to renderTo must be a string selector, got "+typeof n+" }")}},e.log=function(t,e){this.logger.info(this.name+"_"+t,e)},e.registerActiveComponent=function(t){var e=Te();e.activeComponents=e.activeComponents||[],e.activeComponents.push(t)},e.destroyActiveComponent=function(t){var e=Te();e.activeComponents=e.activeComponents||[],e.activeComponents.splice(e.activeComponents.indexOf(t),1)},t}();function Ke(t){var e,n,r;Ft().initialized||(Ft().initialized=!0,function(t){var e=t.on,n=t.send,r=Ft();r.receiveMessage=r.receiveMessage||function(t){return _e(t,{on:e,send:n})}}({on:be,send:xe}),n=(e={on:be,send:xe}).on,r=e.send,Wt().getOrSet("postMessageListener",function(){return Ot(window,"message",function(t){!function(t,e){var n=e.on,r=e.send,o=t.source||t.sourceElement,i=t.origin||t.originalEvent&&t.originalEvent.origin,s=t.data;if("null"===i&&(i=y.FILE+"//"),o){if(!i)throw new Error("Post message did not have origin domain");_e({source:o,origin:i,data:s},{on:n,send:r})}}(t,{on:n,send:r})})}),function(t){var e=t.on,n=t.send;Wt("builtinListeners").getOrSet("helloListener",function(){var t=e(It.HELLO,{domain:Dt},function(t){var e=t.source,n=t.origin;return qt(e).resolve({win:e,domain:n}),{instanceID:zt()}}),r=F();return r&&Ht(r,{send:n}).catch(et),t})}({on:be,send:xe}));var o=new Ze(t),i=function(t){return o.init(t)};return i.driver=function(t,e){return o.driver(t,e)},i.isChild=function(){return o.isChild()},i.canRenderTo=function(t){return o.canRenderTo(t)},i.xprops=o.xprops,i}function tn(){Ee&&Ee.destroyBridges();var t=[],e=Te();for(e.activeComponents=e.activeComponents||[];e.activeComponents.length;)t.push(e.activeComponents[0].destroy(new Error("zoid destroyed all"),!1));return p.all(t).then(et)}var en=tn;function nn(){var t;tn(),delete window.__zoid_9_0_28__,function(){for(var t=Wt("responseListeners"),e=0,n=t.keys();e<n.length;e++){var r=n[e],o=t.get(r);o&&(o.cancelled=!0),t.del(r)}}(),(t=Wt().get("postMessageListener"))&&t.cancel(),delete window.__post_robot_10_0_18__}r.d(n,"PopupOpenError",function(){return bt}),r.d(n,"create",function(){return Ke}),r.d(n,"destroy",function(){return nn}),r.d(n,"destroyComponents",function(){return en}),r.d(n,"destroyAll",function(){return tn}),r.d(n,"Component",function(){return Ze}),r.d(n,"PROP_TYPE",function(){return Se}),r.d(n,"PROP_SERIALIZATION",function(){return Ie}),r.d(n,"CONTEXT",function(){return De}),r.d(n,"EVENT",function(){return Le})}])}).call(this,n(29).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],s=n[1],a=new i(function(t,e,n){return 3*(e+n)/4-n}(0,r,s)),u=0,f=s>0?r-4:r,l=0;l<f;l+=4)e=o[t.charCodeAt(l)]<<18|o[t.charCodeAt(l+1)]<<12|o[t.charCodeAt(l+2)]<<6|o[t.charCodeAt(l+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;2===s&&(e=o[t.charCodeAt(l)]<<2|o[t.charCodeAt(l+1)]>>4,a[u++]=255&e);1===s&&(e=o[t.charCodeAt(l)]<<10|o[t.charCodeAt(l+1)]<<4|o[t.charCodeAt(l+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],s=0,a=n-o;s<a;s+=16383)i.push(f(t,s,s+16383>a?a:s+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],o[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var o,i,s=[],a=e;a<n;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?o-1:0,h=n?-1:1,d=t[e+l];for(l+=h,i=d&(1<<-f)-1,d>>=-f,f+=a;f>0;i=256*i+t[e+l],l+=h,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=r;f>0;s=256*s+t[e+l],l+=h,f-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),i-=c}return(d?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,a,u,c=8*i-o-1,f=(1<<c)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,o),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;t[n+d]=255&a,d+=p,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;t[n+d]=255&s,d+=p,s/=256,c-=8);t[n+d-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(e){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return{}.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,n,r){"use strict";r.r(n);var o={};function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function s(t){try{if(!t)return!1;if("undefined"!=typeof Promise&&t instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&t instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&t instanceof window.constructor)return!1;var e={}.toString;if(e){var n=e.call(t);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof t.then)return!0}catch(r){return!1}return!1}r.r(o),r.d(o,"WeakMap",function(){return tt});var a,u=[],c=[],f=0;function l(){if(!f&&a){var t=a;a=null,t.resolve()}}function h(){f+=1}function d(){f-=1,l()}var p=function(){function t(t){var e=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var n,r,o=!1,i=!1,s=!1;h();try{t(function(t){s?e.resolve(t):(o=!0,n=t)},function(t){s?e.reject(t):(i=!0,r=t)})}catch(a){return d(),void this.reject(a)}d(),s=!0,o?this.resolve(n):i&&this.reject(r)}}var e=t.prototype;return e.resolve=function(t){if(this.resolved||this.rejected)return this;if(s(t))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=t,this.dispatch(),this},e.reject=function(t){var e=this;if(this.resolved||this.rejected)return this;if(s(t))throw new Error("Can not reject promise with another promise");if(!t){var n=t&&"function"==typeof t.toString?t.toString():{}.toString.call(t);t=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=t,this.errorHandled||setTimeout(function(){e.errorHandled||function(t,e){if(-1===u.indexOf(t)){u.push(t),setTimeout(function(){throw t},1);for(var n=0;n<c.length;n++)c[n](t,e)}}(t,e)},1),this.dispatch(),this},e.asyncReject=function(t){return this.errorHandled=!0,this.reject(t),this},e.dispatch=function(){var e=this,n=this.resolved,r=this.rejected,o=this.handlers;if(!this.dispatching&&(n||r)){this.dispatching=!0,h();for(var i=function(i){var a=o[i],u=a.onSuccess,c=a.onError,f=a.promise,l=void 0;if(n)try{l=u?u(e.value):e.value}catch(h){return f.reject(h),"continue"}else if(r){if(!c)return f.reject(e.error),"continue";try{l=c(e.error)}catch(h){return f.reject(h),"continue"}}l instanceof t&&(l.resolved||l.rejected)?(l.resolved?f.resolve(l.value):f.reject(l.error),l.errorHandled=!0):s(l)?l instanceof t&&(l.resolved||l.rejected)?l.resolved?f.resolve(l.value):f.reject(l.error):l.then(function(t){f.resolve(t)},function(t){f.reject(t)}):f.resolve(l)},a=0;a<o.length;a++)i(a);o.length=0,this.dispatching=!1,d()}},e.then=function(e,n){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new t;return this.handlers.push({promise:r,onSuccess:e,onError:n}),this.errorHandled=!0,this.dispatch(),r},e.catch=function(t){return this.then(void 0,t)},e.finally=function(e){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.finally expected a function");return this.then(function(n){return t.try(e).then(function(){return n})},function(n){return t.try(e).then(function(){throw n})})},e.timeout=function(t,e){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){n.resolved||n.rejected||n.reject(e||new Error("Promise timed out after "+t+"ms"))},t);return this.then(function(t){return clearTimeout(r),t})},e.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},t.resolve=function(e){return e instanceof t?e:s(e)?new t(function(t,n){return e.then(t,n)}):(new t).resolve(e)},t.reject=function(e){return(new t).reject(e)},t.asyncReject=function(e){return(new t).asyncReject(e)},t.all=function(e){var n=new t,r=e.length,o=[];if(!r)return n.resolve(o),n;for(var i=function(i){var a=e[i];if(a instanceof t){if(a.resolved)return o[i]=a.value,r-=1,"continue"}else if(!s(a))return o[i]=a,r-=1,"continue";t.resolve(a).then(function(t){o[i]=t,0==(r-=1)&&n.resolve(o)},function(t){n.reject(t)})},a=0;a<e.length;a++)i(a);return 0===r&&n.resolve(o),n},t.hash=function(e){var n={};return t.all(Object.keys(e).map(function(r){return t.resolve(e[r]).then(function(t){n[r]=t})})).then(function(){return n})},t.map=function(e,n){return t.all(e.map(n))},t.onPossiblyUnhandledException=function(t){return function(t){return c.push(t),{cancel:function(){c.splice(c.indexOf(t),1)}}}(t)},t.try=function(e,n,r){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var o;h();try{o=e.apply(n,r||[])}catch(i){return d(),t.reject(i)}return d(),t.resolve(o)},t.delay=function(e){return new t(function(t){setTimeout(t,e)})},t.isPromise=function(e){return!!(e&&e instanceof t)||s(e)},t.flush=function(){return e=a=a||new t,l(),e;var e},t}();function v(t){return"[object RegExp]"==={}.toString.call(t)}var y={MOCK:"mock:",FILE:"file:",ABOUT:"about:"},m="*",w={IFRAME:"iframe",POPUP:"popup"},g="Call was rejected by callee.\r\n";function _(t){return void 0===t&&(t=window),t.location.protocol===y.ABOUT}function b(t){if(void 0===t&&(t=window),t)try{if(t.parent&&t.parent!==t)return t.parent}catch(e){}}function E(t){if(void 0===t&&(t=window),t&&!b(t))try{return t.opener}catch(e){}}function x(t){try{return!0}catch(e){}return!1}function C(t){var e=(t=t||window).location;if(!e)throw new Error("Can not read window location");var n=e.protocol;if(!n)throw new Error("Can not read window protocol");if(n===y.FILE)return y.FILE+"//";if(n===y.ABOUT){var r=b(t);return r&&x()?C(r):y.ABOUT+"//"}var o=e.host;if(!o)throw new Error("Can not read window host");return n+"//"+o}function O(t){var e=C(t=t||window);return e&&t.mockDomain&&0===t.mockDomain.indexOf(y.MOCK)?t.mockDomain:e}function P(t){if(!function(t){try{if(t===window)return!0}catch(n){}try{var e=Object.getOwnPropertyDescriptor(t,"location");if(e&&!1===e.enumerable)return!1}catch(n){}try{if(_(t)&&x())return!0}catch(n){}try{if(C(t)===C(window))return!0}catch(n){}return!1}(t))return!1;try{if(t===window)return!0;if(_(t)&&x())return!0;if(O(window)===O(t))return!0}catch(e){}return!1}function T(t){if(!P(t))throw new Error("Expected window to be same domain");return t}function R(t,e){if(!t||!e)return!1;var n=b(e);return n?n===t:-1!==function(t){var e=[];try{for(;t.parent!==t;)e.push(t.parent),t=t.parent}catch(n){}return e}(e).indexOf(t)}function A(t){var e,n,r=[];try{e=t.frames}catch(u){e=t}try{n=e.length}catch(u){}if(0===n)return r;if(n){for(var o=0;o<n;o++){var i=void 0;try{i=e[o]}catch(u){continue}r.push(i)}return r}for(var s=0;s<100;s++){var a=void 0;try{a=e[s]}catch(u){return r}if(!a)return r;r.push(a)}return r}function j(t){for(var e=[],n=0,r=A(t);n<r.length;n++){var o=r[n];e.push(o);for(var i=0,s=j(o);i<s.length;i++)e.push(s[i])}return e}function k(t){if(t){try{if(t.top)return t.top}catch(o){}if(b(t)===t)return t;try{if(R(window,t)&&window.top)return window.top}catch(o){}try{if(R(t,window)&&window.top)return window.top}catch(o){}for(var e=0,n=j(t);e<n.length;e++){var r=n[e];try{if(r.top)return r.top}catch(o){}if(b(r)===r)return r}}}function S(t){var e=k(t);if(!e)throw new Error("Can not determine top window");return[].concat(j(e),[e])}var I=[],D=[];function N(t,e){void 0===e&&(e=!0);try{if(t===window)return!1}catch(o){return!0}try{if(!t)return!0}catch(o){return!0}try{if(t.closed)return!0}catch(o){return!o||o.message!==g}if(e&&P(t))try{if(t.mockclosed)return!0}catch(o){}try{if(!t.parent||!t.top)return!0}catch(o){}var n=function(t,e){for(var n=0;n<t.length;n++)try{if(t[n]===e)return n}catch(o){}return-1}(I,t);if(-1!==n){var r=D[n];if(r&&function(t){if(!t.contentWindow)return!0;if(!t.parentNode)return!0;var e=t.ownerDocument;return!(!e||!e.documentElement||e.documentElement.contains(t))}(r))return!0}return!1}function F(t){return(t=t||window).navigator.mockUserAgent||t.navigator.userAgent}function L(t,e){for(var n=A(t),r=0;r<n.length;r++){var o=n[r];try{if(P(o)&&o.name===e&&-1!==n.indexOf(o))return o}catch(i){}}try{if(-1!==n.indexOf(t.frames[e]))return t.frames[e]}catch(i){}try{if(-1!==n.indexOf(t[e]))return t[e]}catch(i){}}function W(t,e){return t===E(e)}function U(t){return void 0===t&&(t=window),E(t=t||window)||b(t)||void 0}function M(t,e){for(var n=0;n<t.length;n++)for(var r=t[n],o=0;o<e.length;o++)if(r===e[o])return!0;return!1}function B(t){void 0===t&&(t=window);for(var e=0,n=t;n;)(n=b(n))&&(e+=1);return e}function z(t,e){var n=k(t)||t,r=k(e)||e;try{if(n&&r)return n===r}catch(u){}var o=S(t),i=S(e);if(M(o,i))return!0;var s=E(n),a=E(r);return!(s&&M(S(s),i)||(a&&M(S(a),o),1))}function q(t,e){if("string"==typeof t){if("string"==typeof e)return t===m||e===t;if(v(e))return!1;if(Array.isArray(e))return!1}return v(t)?v(e)?t.toString()===e.toString():!Array.isArray(e)&&Boolean(e.match(t)):!!Array.isArray(t)&&(Array.isArray(e)?JSON.stringify(t)===JSON.stringify(e):!v(e)&&t.some(function(t){return q(t,e)}))}function H(t){return t.match(/^(https?|mock|file):\/\//)?t.split("/").slice(0,3).join("/"):O()}function V(t,e,n,r){var o;return void 0===n&&(n=1e3),void 0===r&&(r=1/0),function i(){if(N(t))return o&&clearTimeout(o),e();r<=0?clearTimeout(o):(r-=n,o=setTimeout(i,n))}(),{cancel:function(){o&&clearTimeout(o)}}}function G(t){try{if(t===window)return!0}catch(e){if(e&&e.message===g)return!0}try{if("[object Window]"==={}.toString.call(t))return!0}catch(e){if(e&&e.message===g)return!0}try{if(window.Window&&t instanceof window.Window)return!0}catch(e){if(e&&e.message===g)return!0}try{if(t&&t.self===t)return!0}catch(e){if(e&&e.message===g)return!0}try{if(t&&t.parent===t)return!0}catch(e){if(e&&e.message===g)return!0}try{if(t&&t.top===t)return!0}catch(e){if(e&&e.message===g)return!0}try{if(t&&"__unlikely_value__"===t.__cross_domain_utils_window_check__)return!1}catch(e){return!0}return!1}function Y(t){if(0!==H(t).indexOf(y.MOCK))return t;throw new Error("Mock urls not supported out of test mode")}function $(t){try{t.close()}catch(e){}}function X(t,e){for(var n=0;n<t.length;n++)try{if(t[n]===e)return n}catch(r){}return-1}var J,Q,Z=Object.defineProperty,K=Date.now()%1e9,tt=function(){function t(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,K+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+K,function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var t=new WeakMap,e={};return Object.freeze(e),t.set(e,"__testvalue__"),"__testvalue__"===t.get(e)}catch(n){return!1}}())try{this.weakmap=new WeakMap}catch(t){}this.keys=[],this.values=[]}var e=t.prototype;return e._cleanupClosedWindows=function(){for(var t=this.weakmap,e=this.keys,n=0;n<e.length;n++){var r=e[n];if(G(r)&&N(r)){if(t)try{t.delete(r)}catch(o){}e.splice(n,1),this.values.splice(n,1),n-=1}}},e.isSafeToReadWrite=function(t){return!G(t)},e.set=function(t,e){if(!t)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(t,e)}catch(u){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var r=this.name,o=t[r];return void(o&&o[0]===t?o[1]=e:Z(t,r,{value:[t,e],writable:!0}))}catch(u){}this._cleanupClosedWindows();var i=this.keys,s=this.values,a=X(i,t);-1===a?(i.push(t),s.push(e)):s[a]=e},e.get=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(t))return e.get(t)}catch(o){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];return n&&n[0]===t?n[1]:void 0}catch(o){}this._cleanupClosedWindows();var r=X(this.keys,t);if(-1!==r)return this.values[r]},e.delete=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.delete(t)}catch(i){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];n&&n[0]===t&&(n[0]=n[1]=void 0)}catch(i){}this._cleanupClosedWindows();var r=this.keys,o=X(r,t);-1!==o&&(r.splice(o,1),this.values.splice(o,1))},e.has=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(t))return!0}catch(r){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];return!(!n||n[0]!==t)}catch(r){}return this._cleanupClosedWindows(),-1!==X(this.keys,t)},e.getOrSet=function(t,e){if(this.has(t))return this.get(t);var n=e();return this.set(t,n),n},t}();function et(t){if("function"==typeof btoa)return btoa(t);if("undefined"!=typeof e)return e.from(t,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}function nt(){var t="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return t.charAt(Math.floor(Math.random()*t.length))})+"_"+et((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function rt(t){try{return JSON.stringify([].slice.call(t),function(t,e){return"function"==typeof e?"memoize["+function(t){if(J=J||new tt,null==t||"object"!=typeof t&&"function"!=typeof t)throw new Error("Invalid object");var e=J.get(t);return e||(e=typeof t+":"+nt(),J.set(t,e)),e}(e)+"]":e})}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}}function ot(t){var e={};function n(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=rt(r);return e.hasOwnProperty(i)?e[i]:(e[i]=t.apply(this,arguments).finally(function(){delete e[i]}),e[i])}return n.reset=function(){e={}},n}function it(t,e,n){void 0===n&&(n=[]);var r=t.__inline_memoize_cache__=t.__inline_memoize_cache__||{},o=rt(n);return r.hasOwnProperty(o)?r[o]:r[o]=e.apply(void 0,n)}function st(){}function at(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}function ut(t,e){if(void 0===e&&(e=1),e>=3)return"stringifyError stack overflow";try{if(!t)return"<unknown error: "+{}.toString.call(t)+">";if("string"==typeof t)return t;if(t instanceof Error){var n=t&&t.stack,r=t&&t.message;if(n&&r)return-1!==n.indexOf(r)?n:r+"\n"+n;if(n)return n;if(r)return r}return t&&t.toString&&"function"==typeof t.toString?t.toString():{}.toString.call(t)}catch(o){return"Error while stringifying error: "+ut(o,e+1)}}function ct(t){return"string"==typeof t?t:t&&t.toString&&"function"==typeof t.toString?t.toString():{}.toString.call(t)}function ft(t,e){if(!e)return t;if(Object.assign)return Object.assign(t,e);for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function lt(t,e){var n;return function r(){n=setTimeout(function(){t(),r()},e)}(),{cancel:function(){clearTimeout(n)}}}function ht(t){return[].slice.call(t)}function dt(t){return null!=t}function pt(t){return"[object RegExp]"==={}.toString.call(t)}function vt(t,e,n){if(t.hasOwnProperty(e))return t[e];var r=n();return t[e]=r,r}function yt(t){var e=[],n=!1;return{set:function(e,r){return n||(t[e]=r,this.register(function(){delete t[e]})),r},register:function(t){n?t():e.push(at(t))},all:function(){var t=[];for(n=!0;e.length;){var r=e.pop();t.push(r())}return p.all(t).then(st)}}}function mt(t,e){if(null==e)throw new Error("Expected "+t+" to be present");return e}function wt(){return Boolean(document.body)&&"complete"===document.readyState}function gt(t){return t.replace(/\?/g,"%3F").replace(/&/g,"%26").replace(/#/g,"%23").replace(/\+/g,"%2B")}function _t(){return it(_t,function(){return new p(function(t){if(wt())return t();var e=setInterval(function(){if(wt())return clearInterval(e),t()},10)})})}function bt(t){return it(bt,function(){var e={};if(!t)return e;if(-1===t.indexOf("="))return e;for(var n=0,r=t.split("&");n<r.length;n++){var o=r[n];(o=o.split("="))[0]&&o[1]&&(e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]))}return e},[t])}function Et(t,e){return void 0===e&&(e={}),e&&Object.keys(e).length?(void 0===(n=i({},bt(t),e))&&(n={}),Object.keys(n).filter(function(t){return"string"==typeof n[t]}).map(function(t){return gt(t)+"="+gt(n[t])}).join("&")):t;var n}function xt(t){return t instanceof window.Element||null!==t&&"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}function Ct(t,e){return void 0===e&&(e=document),xt(t)?t:"string"==typeof t?e.querySelector(t):void 0}function Ot(t){return new p(function(e,n){var r=ct(t),o=Ct(t);if(o)return e(o);if(wt())return n(new Error("Document is ready and element "+r+" does not exist"));var i=setInterval(function(){return(o=Ct(t))?(clearInterval(i),e(o)):wt()?(clearInterval(i),n(new Error("Document is ready and element "+r+" does not exist"))):void 0},10)})}function Pt(t){this.message=t}function Tt(t){if((Q=Q||new tt).has(t)){var e=Q.get(t);if(e)return e}var n=new p(function(e,n){t.addEventListener("load",function(){(function(t){if(function(){for(var t=0;t<I.length;t++){var e=!1;try{e=I[t].closed}catch(n){}e&&(D.splice(t,1),I.splice(t,1))}}(),t&&t.contentWindow)try{I.push(t.contentWindow),D.push(t)}catch(e){}})(t),e(t)}),t.addEventListener("error",function(r){t.contentWindow?e(t):n(r)})});return Q.set(t,n),n}function Rt(t){return Tt(t).then(function(t){if(!t.contentWindow)throw new Error("Could not find window in iframe");return t.contentWindow})}function At(t,e){void 0===t&&(t={});var n=t.style||{},r=function(t,e,n){void 0===t&&(t="div"),void 0===e&&(e={}),t=t.toLowerCase();var r,o,i,s=document.createElement(t);if(e.style&&ft(s.style,e.style),e.class&&(s.className=e.class.join(" ")),e.id&&s.setAttribute("id",e.id),e.attributes)for(var a=0,u=Object.keys(e.attributes);a<u.length;a++){var c=u[a];s.setAttribute(c,e.attributes[c])}if(e.styleSheet&&(r=s,o=e.styleSheet,void 0===i&&(i=window.document),r.styleSheet?r.styleSheet.cssText=o:r.appendChild(i.createTextNode(o))),e.html){if("iframe"===t)throw new Error("Iframe html can not be written unless container provided and iframe in DOM");s.innerHTML=e.html}return s}("iframe",{attributes:i({allowTransparency:"true"},t.attributes||{}),style:i({backgroundColor:"transparent",border:"none"},n),html:t.html,class:t.class}),o=window.navigator.userAgent.match(/MSIE|Edge/i);return r.hasAttribute("id")||r.setAttribute("id",nt()),Tt(r),e&&function(t,e){void 0===e&&(e=document);var n=Ct(t,e);if(n)return n;throw new Error("Can not find element: "+ct(t))}(e).appendChild(r),(t.url||o)&&r.setAttribute("src",t.url||"about:blank"),r}function jt(t,e,n){return t.addEventListener(e,n),{cancel:function(){t.removeEventListener(e,n)}}}function kt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function St(t){return!t||!t.parentNode}function It(t,e,n){var r=void 0===n?{}:n,o=r.width,i=void 0===o||o,s=r.height,a=void 0===s||s,u=r.interval,c=void 0===u?100:u,f=r.win,l=void 0===f?window:f,h=t.offsetWidth,d=t.offsetHeight;e({width:h,height:d});var p,v,y=function(){var n=t.offsetWidth,r=t.offsetHeight;(i&&n!==h||a&&r!==d)&&e({width:n,height:r}),h=n,d=r};return void 0!==l.ResizeObserver?(p=new l.ResizeObserver(y)).observe(t):void 0!==l.MutationObserver?((p=new l.MutationObserver(y)).observe(t,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),l.addEventListener("resize",y)):function t(){y(),v=setTimeout(t,c)}(),{cancel:function(){p.disconnect(),window.removeEventListener("resize",y),clearTimeout(v)}}}function Dt(t){return"string"==typeof t&&/^[0-9]+%$/.test(t)}function Nt(t){return"string"==typeof t&&/^[0-9]+px$/.test(t)}function Ft(t){if("number"==typeof t)return t;var e=t.match(/^([0-9]+)(px|%)$/);if(!e)throw new Error("Could not match css value from "+t);return parseInt(e[1],10)}function Lt(t){return Ft(t)+"px"}function Wt(t){return"number"==typeof t?Lt(t):Dt(t)?t:Lt(t)}function Ut(t,e){if("number"==typeof t)return t;if(Dt(t))return parseInt(e*Ft(t)/100,10);if(Nt(t))return Ft(t);throw new Error("Can not normalize dimension: "+t)}Pt.prototype=Object.create(Error.prototype);var Mt={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},Bt="__postrobot_bridge__",zt="*",qt={CROSS_DOMAIN_ZALGO_PROMISE:"cross_domain_zalgo_promise",CROSS_DOMAIN_FUNCTION:"cross_domain_function",CROSS_DOMAIN_WINDOW:"cross_domain_window"};function Ht(t){return void 0===t&&(t=window),t!==window?t.__post_robot_10_0_18__:t.__post_robot_10_0_18__=t.__post_robot_10_0_18__||{}}var Vt=function(){return{}};function Gt(t,e){return void 0===t&&(t="store"),void 0===e&&(e=Vt),vt(Ht(),t,function(){var t=e();return{has:function(e){return t.hasOwnProperty(e)},get:function(e,n){return t.hasOwnProperty(e)?t[e]:n},set:function(e,n){return t[e]=n,n},del:function(e){delete t[e]},getOrSet:function(e,n){return vt(t,e,n)},reset:function(){t=e()},keys:function(){return Object.keys(t)}}})}var Yt=function(){};function $t(){var t=Ht();return t.WINDOW_WILDCARD=t.WINDOW_WILDCARD||new Yt,t.WINDOW_WILDCARD}function Xt(t,e){return void 0===t&&(t="store"),void 0===e&&(e=Vt),Gt("windowStore").getOrSet(t,function(){var n=new tt,r=function(t){return n.getOrSet(t,e)};return{has:function(e){return r(e).hasOwnProperty(t)},get:function(e,n){var o=r(e);return o.hasOwnProperty(t)?o[t]:n},set:function(e,n){return r(e)[t]=n,n},del:function(e){delete r(e)[t]},getOrSet:function(e,n){return vt(r(e),t,n)}}})}function Jt(){return Gt("instance").getOrSet("instanceID",nt)}function Qt(t){return Xt("helloPromises").getOrSet(t,function(){return new p})}function Zt(t,e){return(0,e.send)(t,Mt.HELLO,{instanceID:Jt()},{domain:zt,timeout:-1}).then(function(e){var n=e.origin,r=e.data.instanceID;return Qt(t).resolve({win:t,domain:n}),{win:t,domain:n,instanceID:r}})}function Kt(t,e){var n=e.send;return Xt("windowInstanceIDPromises").getOrSet(t,function(){return Zt(t,{send:n}).then(function(t){return t.instanceID})})}function te(t,e,n){void 0===e&&(e=5e3),void 0===n&&(n="Window");var r=Qt(t);return-1!==e&&(r=r.timeout(e,new Error(n+" did not load after "+e+"ms"))),r}function ee(t){Xt("knownWindows").set(t,!0)}var ne,re={FUNCTION:"function",ERROR:"error",PROMISE:"promise",REGEX:"regex",DATE:"date",ARRAY:"array",OBJECT:"object",STRING:"string",NUMBER:"number",BOOLEAN:"boolean",NULL:"null",UNDEFINED:"undefined"};function oe(t){return"object"==typeof t&&null!==t&&"string"==typeof t.__type__}function ie(t){return void 0===t?re.UNDEFINED:null===t?re.NULL:Array.isArray(t)?re.ARRAY:"function"==typeof t?re.FUNCTION:"object"==typeof t?t instanceof Error?re.ERROR:"function"==typeof t.then?re.PROMISE:"[object RegExp]"==={}.toString.call(t)?re.REGEX:"[object Date]"==={}.toString.call(t)?re.DATE:re.OBJECT:"string"==typeof t?re.STRING:"number"==typeof t?re.NUMBER:"boolean"==typeof t?re.BOOLEAN:void 0}function se(t,e){return{__type__:t,__val__:e}}var ae,ue=((ne={})[re.FUNCTION]=function(){},ne[re.ERROR]=function(t){return se(re.ERROR,{message:t.message,stack:t.stack,code:t.code})},ne[re.PROMISE]=function(){},ne[re.REGEX]=function(t){return se(re.REGEX,t.source)},ne[re.DATE]=function(t){return se(re.DATE,t.toJSON())},ne[re.ARRAY]=function(t){return t},ne[re.OBJECT]=function(t){return t},ne[re.STRING]=function(t){return t},ne[re.NUMBER]=function(t){return t},ne[re.BOOLEAN]=function(t){return t},ne[re.NULL]=function(t){return t},ne),ce={},fe=((ae={})[re.FUNCTION]=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},ae[re.ERROR]=function(t){var e=t.stack,n=t.code,r=new Error(t.message);return r.code=n,r.stack=e+"\n\n"+r.stack,r},ae[re.PROMISE]=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},ae[re.REGEX]=function(t){return new RegExp(t)},ae[re.DATE]=function(t){return new Date(t)},ae[re.ARRAY]=function(t){return t},ae[re.OBJECT]=function(t){return t},ae[re.STRING]=function(t){return t},ae[re.NUMBER]=function(t){return t},ae[re.BOOLEAN]=function(t){return t},ae[re.NULL]=function(t){return t},ae),le={};function he(){return!!F(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function de(t){return!z(window,t)}function pe(t,e){if(t){if(O()!==H(t))return!0}else if(e&&!P(e))return!0;return!1}function ve(t){var e=t.win,n=t.domain;return!(!he()||n&&!pe(n,e)||e&&!de(e))}function ye(t){var e=(t=t||H(t)).replace(/[^a-zA-Z0-9]+/g,"_");return Bt+"_"+e}function me(){return Boolean(window.name&&window.name===ye(O()))}var we=new p(function(t){if(window.document&&window.document.body)return t(window.document.body);var e=setInterval(function(){if(window.document&&window.document.body)return clearInterval(e),t(window.document.body)},10)});function ge(t){Xt("remoteWindowPromises").getOrSet(t,function(){return new p})}function _e(t){var e=Xt("remoteWindowPromises").get(t);if(!e)throw new Error("Remote window promise not found");return e}function be(t,e,n){_e(t).resolve(function(r,o,i){if(r!==t)throw new Error("Remote window does not match window");if(!q(o,e))throw new Error("Remote domain "+o+" does not match domain "+e);n.fireAndForget(i)})}function Ee(t,e){_e(t).reject(e).catch(st)}function xe(t){for(var e=t.win,n=t.name,r=t.domain,o=Gt("popupWindowsByName"),i=Xt("popupWindowsByWin"),s=0,a=o.keys();s<a.length;s++){var u=a[s];N(o.get(u).win)&&o.del(u)}var c=i.getOrSet(e,function(){return n?o.getOrSet(n,function(){return{win:e,name:n}}):{win:e}});if(c.win&&c.win!==e)throw new Error("Different window already linked for window: "+(n||"undefined"));if(n){if(c.name&&c.name!==n)throw new Error("Different window already linked for name "+n+": "+c.name);c.name=n,o.set(n,c)}return r&&(c.domain=r,ge(e)),i.set(e,c),c}function Ce(t){var e,n=t.on,r=t.send,o=t.receiveMessage;e=window.open,window.open=function(t,n,r,o){var i=e.call(this,Y(t),n,r,o);return i?(xe({win:i,name:n,domain:t?H(t):null}),i):i},function(t){var e=t.on,n=t.send,r=t.receiveMessage,o=Gt("popupWindowsByName");e(Mt.OPEN_TUNNEL,function(t){var i=t.source,s=t.origin,a=t.data,u=Gt("bridges").get(s);if(!u)throw new Error("Can not find bridge promise for domain "+s);return u.then(function(t){if(i!==t)throw new Error("Message source does not matched registered bridge for domain "+s);if(!a.name)throw new Error("Register window expected to be passed window name");if(!a.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!o.has(a.name))throw new Error("Window with name "+a.name+" does not exist, or was not opened by this window");if(!o.get(a.name).domain)throw new Error("We do not have a registered domain for window "+a.name);if(o.get(a.name).domain!==s)throw new Error("Message origin "+s+" does not matched registered window origin "+o.get(a.name).domain);return be(o.get(a.name).win,s,a.sendMessage),{sendMessage:function(t){if(window&&!window.closed){var i=o.get(a.name);if(i)try{r({data:t,origin:i.domain,source:i.win},{on:e,send:n})}catch(s){p.reject(s)}}}}})})}({on:n,send:r,receiveMessage:o}),function(t){var e=t.send;Ht(window).openTunnelToParent=function(t){var n=t.name,r=t.source,o=t.canary,i=t.sendMessage,s=Gt("tunnelWindows"),a=b(window);if(!a)throw new Error("No parent window found to open tunnel to");var u=function(t){var e=t.name,n=t.source,r=t.canary,o=t.sendMessage;!function(){for(var t=Gt("tunnelWindows"),e=0,n=t.keys();e<n.length;e++){var r=n[e];N(t[r].source)&&t.del(r)}}();var i=nt();return Gt("tunnelWindows").set(i,{name:e,source:n,canary:r,sendMessage:o}),i}({name:n,source:r,canary:o,sendMessage:i});return e(a,Mt.OPEN_TUNNEL,{name:n,sendMessage:function(){var t=s.get(u);if(t&&t.source&&!N(t.source)){try{t.canary()}catch(e){return}t.sendMessage.apply(this,arguments)}}},{domain:zt})}}({on:n,send:r}),function(t){var e=t.on,n=t.send,r=t.receiveMessage;p.try(function(){var t,o=E(window);if(o&&ve({win:o}))return ge(o),(t=o,Xt("remoteBridgeAwaiters").getOrSet(t,function(){return p.try(function(){var e=L(t,ye(O()));if(e)return P(e)&&P(e)&&Ht(e)?e:new p(function(t){var n,r;n=setInterval(function(){if(e&&P(e)&&Ht(e))return clearInterval(n),clearTimeout(r),t(e)},100),r=setTimeout(function(){return clearInterval(n),t()},2e3)})})})).then(function(t){return t?window.name?Ht(t).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(t){if(window&&!window.closed)try{r({data:t,origin:this.origin,source:this.source},{on:e,send:n})}catch(o){p.reject(o)}}}).then(function(t){var e=t.source,n=t.origin,r=t.data;if(e!==o)throw new Error("Source does not match opener");be(e,n,r.sendMessage)}).catch(function(t){throw Ee(o,t),t}):Ee(o,new Error("Can not register with opener: window does not have a name")):Ee(o,new Error("Can not register with opener: no bridge found in opener"))})})}({on:n,send:r,receiveMessage:o})}function Oe(){for(var t=Gt("idToProxyWindow"),e=0,n=t.keys();e<n.length;e++){var r=n[e];t.get(r).shouldClean()&&t.del(r)}}function Pe(t,e,n){var r,o=n.send;return{id:t,type:E(e)?w.POPUP:w.IFRAME,getInstanceID:ot(function(){return Kt(e,{send:o})}),close:function(){return p.try(function(){$(e)})},getName:function(){return p.try(function(){if(!N(e))return r})},focus:function(){return p.try(function(){e.focus()})},isClosed:function(){return p.try(function(){return N(e)})},setLocation:function(t){return p.try(function(){if(P(e))try{if(e.location&&"function"==typeof e.location.replace)return void e.location.replace(t)}catch(n){}e.location=t})},setName:function(t){return p.try(function(){xe({win:e,name:t}),(e=T(e)).name=t,e.frameElement&&e.frameElement.setAttribute("name",t),r=t})}}}var Te=function(){function t(t,e,n){var r=n.send;this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.serializedWindow=t,this.actualWindowPromise=new p,this.send=r,e&&this.setWindow(e)}var e=t.prototype;return e.getType=function(){return this.serializedWindow.type},e.isPopup=function(){return this.getType()===w.POPUP},e.isIframe=function(){return this.getType()===w.IFRAME},e.setLocation=function(t){var e=this;return this.serializedWindow.setLocation(t).then(function(){return e})},e.setName=function(t){var e=this;return this.serializedWindow.setName(t).then(function(){return e})},e.close=function(){var t=this;return this.serializedWindow.close().then(function(){return t})},e.focus=function(){var t=this;return p.try(function(){return p.all([t.isPopup()&&t.serializedWindow.getName().then(function(t){t&&window.open("",t)}),t.serializedWindow.focus()])}).then(function(){return t})},e.isClosed=function(){return this.serializedWindow.isClosed()},e.getWindow=function(){return this.actualWindow},e.setWindow=function(t){this.actualWindow=t,this.serializedWindow=Pe(this.serializedWindow.id,t,{send:this.send}),this.actualWindowPromise.resolve(t)},e.awaitWindow=function(){return this.actualWindowPromise},e.matchWindow=function(t){var e=this;return p.try(function(){return e.actualWindow?t===e.actualWindow:p.hash({proxyInstanceID:e.getInstanceID(),knownWindowInstanceID:Kt(t,{send:e.send})}).then(function(n){var r=n.proxyInstanceID===n.knownWindowInstanceID;return r&&e.setWindow(t),r})})},e.unwrap=function(){return this.actualWindow||this},e.getInstanceID=function(){return this.serializedWindow.getInstanceID()},e.serialize=function(){return this.serializedWindow},e.shouldClean=function(){return this.actualWindow&&N(this.actualWindow)},t.unwrap=function(e){return t.isProxyWindow(e)?e.unwrap():e},t.serialize=function(e,n){var r=n.send;return Oe(),t.toProxyWindow(e,{send:r}).serialize()},t.deserialize=function(e,n){var r=n.on,o=n.send;return Oe(),Gt("idToProxyWindow").getOrSet(e.id,function(){return new t(e,null,{on:r,send:o})})},t.isProxyWindow=function(t){return Boolean(t&&!G(t)&&t.isProxyWindow)},t.toProxyWindow=function(e,n){var r=n.send;if(Oe(),t.isProxyWindow(e))return e;var o=e;return Xt("winToProxyWindow").getOrSet(e,function(){var e=nt(),n=new t(Pe(e,o,{send:r}),o,{send:r});return Gt("idToProxyWindow").set(e,n)})},t}();function Re(t,e,n,r,o){var i=Xt("methodStore"),s=Gt("proxyWindowMethods");Te.isProxyWindow(r)?s.set(t,{val:e,name:n,domain:o,source:r}):(s.del(t),i.getOrSet(r,function(){return{}})[t]={domain:o,name:n,val:e,source:r})}function Ae(t,e){var n=Xt("methodStore"),r=Gt("proxyWindowMethods");return n.getOrSet(t,function(){return{}})[e]||r.get(e)}function je(t,e,n,r,o){!function(t){var e=o.on;Gt("builtinListeners").getOrSet("functionCalls",function(){return e(Mt.METHOD,{domain:zt},function(t){var e=t.source,n=t.origin,r=t.data,o=r.id,i=r.name,s=Ae(e,o);if(!s)throw new Error("Could not find method '"+r.name+"' with id: "+r.id+" in "+O(window));var a=s.source,u=s.domain,c=s.val;return p.try(function(){if(!q(u,n))throw new Error("Method '"+r.name+"' domain "+JSON.stringify(pt(s.domain)?s.domain.source:s.domain)+" does not match origin "+n+" in "+O(window));if(Te.isProxyWindow(a))return a.matchWindow(e).then(function(t){if(!t)throw new Error("Method call '"+r.name+"' failed - proxy window does not match source in "+O(window))})}).then(function(){return c.apply({source:e,origin:n},r.args)},function(t){return p.try(function(){if(c.onError)return c.onError(t)}).then(function(){throw t.stack&&(t.stack="Remote call to "+i+"()\n\n"+t.stack),t})}).then(function(t){return{result:t,id:o,name:i}})})})}();var i=n.__id__||nt();t=Te.unwrap(t);var s=n.__name__||n.name||r;return Te.isProxyWindow(t)?(Re(i,n,s,t,e),t.awaitWindow().then(function(t){Re(i,n,s,t,e)})):Re(i,n,s,t,e),se(qt.CROSS_DOMAIN_FUNCTION,{id:i,name:s})}function ke(t,e,n,r){var o,i=r.on,s=r.send;return function(t,e){void 0===e&&(e=ce);var n=JSON.stringify(t,function(t){var n=this[t];if(oe(this))return n;var r=ie(n);if(!r)return n;var o=e[r]||ue[r];return o?o(n,t):n});return void 0===n?re.UNDEFINED:n}(n,((o={})[re.PROMISE]=function(n,r){return function(t,e,n,r,o){return se(qt.CROSS_DOMAIN_ZALGO_PROMISE,{then:je(t,e,function(t,e){return n.then(t,e)},r,{on:o.on,send:o.send})})}(t,e,n,r,{on:i,send:s})},o[re.FUNCTION]=function(n,r){return je(t,e,n,r,{on:i,send:s})},o[re.OBJECT]=function(t){return G(t)||Te.isProxyWindow(t)?se(qt.CROSS_DOMAIN_WINDOW,Te.serialize(t,{send:s})):t},o))}function Se(t,e,n,r){var o,i=r.on,s=r.send;return function(t,e){if(void 0===e&&(e=le),t!==re.UNDEFINED)return JSON.parse(t,function(t,n){if(oe(this))return n;var r,o;if(oe(n)?(r=n.__type__,o=n.__val__):(r=ie(n),o=n),!r)return o;var i=e[r]||fe[r];return i?i(o,t):o})}(n,((o={})[qt.CROSS_DOMAIN_ZALGO_PROMISE]=function(t){return new p(t.then)},o[qt.CROSS_DOMAIN_FUNCTION]=function(n){return function(t,e,r,o){var i=n.id,s=n.name,a=o.send,u=function(n){function r(){var o=arguments;return Te.toProxyWindow(t,{send:a}).awaitWindow().then(function(t){var u=Ae(t,i);if(u&&u.val!==r)return u.val.apply({source:window,origin:O()},o);var c={domain:e,fireAndForget:n.fireAndForget},f=[].slice.call(o);return a(t,Mt.METHOD,{id:i,name:s,args:f},c).then(function(t){if(!n.fireAndForget)return t.data.result})}).catch(function(t){throw t})}return void 0===n&&(n={}),r.__name__=s,r.__origin__=e,r.__source__=t,r.__id__=i,r.origin=e,r},c=u();return c.fireAndForget=u({fireAndForget:!0}),c}(t,e,0,{on:i,send:s})},o[qt.CROSS_DOMAIN_WINDOW]=function(t){return Te.deserialize(t,{on:(e={on:i,send:s}).on,send:e.send});var e},o))}var Ie={};function De(t,e,n,r){var o,s=r.on,a=r.send;if(N(t))throw new Error("Window is closed");for(var u=ke(t,e,((o={}).__post_robot_10_0_18__=i({id:nt(),origin:O(window)},n),o),{on:s,send:a}),c=Object.keys(Ie),f=[],l=0;l<c.length;l++){var h=c[l];try{Ie[h](t,u,e)}catch(d){f.push(d)}}if(f.length===c.length)throw new Error("All post-robot messaging strategies failed:\n\n"+f.map(ut).join("\n\n"))}Ie.postrobot_post_message=function(t,e,n){(Array.isArray(n)?n:"string"==typeof n?[n]:[zt]).map(function(t){return 0===t.indexOf(y.FILE)?zt:t}).forEach(function(n){t.postMessage(e,n)})},Ie.postrobot_bridge=function(t,e,n){if(he()||me()){if(P(t))throw new Error("Post message through bridge disabled between same domain windows");if(!1!==z(window,t))throw new Error("Can only use bridge to communicate between two different windows, not between frames");!function(t,e,n){var r=W(window,t),o=W(t,window);if(!r&&!o)throw new Error("Can only send messages to and from parent and popup windows");_e(t).then(function(r){return r(t,e,n)})}(t,n,e)}},Ie.postrobot_global=function(t,e){if(F(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i)){if(!P(t))throw new Error("Post message through global disabled between different domain windows");if(!1!==z(window,t))throw new Error("Can only use global to communicate between two different windows, not between frames");var n=Ht(t);if(!n)throw new Error("Can not find postRobot global on foreign window");n.receiveMessage({source:window,origin:O(),data:e})}};var Ne,Fe="__domain_regex__";function Le(t){return Gt("responseListeners").get(t)}function We(t){Gt("responseListeners").del(t)}function Ue(t){return Gt("erroredResponseListeners").has(t)}function Me(t){var e=t.name,n=t.win,r=t.domain,o=Xt("requestListeners");if(n===zt&&(n=null),r===zt&&(r=null),!e)throw new Error("Name required to get request listener");for(var i=0,s=[n,$t()];i<s.length;i++){var a=s[i];if(a){var u=o.get(a);if(u){var c=u[e];if(c){if(r&&"string"==typeof r){if(c[r])return c[r];if(c[Fe])for(var f=0,l=c[Fe];f<l.length;f++){var h=l[f],d=h.listener;if(q(h.regex,r))return d}}if(c[zt])return c[zt]}}}}}var Be=((Ne={}).postrobot_message_request=function(t,e,n,r){var o=r.on,s=r.send,a=Me({name:n.name,win:t,domain:e});function u(r,a,u){void 0===u&&(u={}),n.fireAndForget||N(t)||De(t,e,i({type:r,ack:a,hash:n.hash,name:n.name},u),{on:o,send:s})}return p.all([u("postrobot_message_ack"),p.try(function(){if(!a)throw new Error("No handler found for post message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!q(a.domain,e))throw new Error("Request origin "+e+" does not match domain "+a.domain.toString());return a.handler({source:t,origin:e,data:n.data})}).then(function(t){return u("postrobot_message_response","success",{data:t})},function(t){return u("postrobot_message_response","error",{error:t})})]).then(st).catch(function(t){if(a&&a.handleError)return a.handleError(t);throw t})},Ne.postrobot_message_ack=function(t,e,n){if(!Ue(n.hash)){var r=Le(n.hash);if(!r)throw new Error("No handler found for post message ack for message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!q(r.domain,e))throw new Error("Ack origin "+e+" does not match domain "+r.domain.toString());if(t!==r.win)throw new Error("Ack source does not match registered window");r.ack=!0}},Ne.postrobot_message_response=function(t,e,n){if(!Ue(n.hash)){var r,o=Le(n.hash);if(!o)throw new Error("No handler found for post message response for message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!q(o.domain,e))throw new Error("Response origin "+e+" does not match domain "+(r=o.domain,Array.isArray(r)?"("+r.join(" | ")+")":v(r)?"RegExp("+r.toString():r.toString()));if(t!==o.win)throw new Error("Response source does not match registered window");We(n.hash),"error"===n.ack?o.promise.reject(n.error):"success"===n.ack&&o.promise.resolve({source:t,origin:e,data:n.data})}},Ne);function ze(t,e){var n=e.on,r=e.send,o=Gt("receivedMessages");if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!t.source)return}catch(u){return}var i=t.source,s=t.origin,a=function(t,e,n,r){var o,i=r.on,s=r.send;try{o=Se(e,n,t,{on:i,send:s})}catch(u){return}if(o&&"object"==typeof o&&null!==o&&(o=o.__post_robot_10_0_18__)&&"object"==typeof o&&null!==o&&o.type&&"string"==typeof o.type&&Be[o.type])return o}(t.data,i,s,{on:n,send:r});a&&(ee(i),o.has(a.id)||(o.set(a.id,!0),N(i)&&!a.fireAndForget||(0===a.origin.indexOf(y.FILE)&&(s=y.FILE+"//"),Be[a.type](i,s,a,{on:n,send:r}))))}function qe(t,e,n){if(!t)throw new Error("Expected name");if("function"==typeof e&&(n=e,e={}),!n)throw new Error("Expected handler");(e=e||{}).name=t,e.handler=n||e.handler;var r=e.window,o=e.domain,i=function t(e,n){var r=e.name,o=e.win,i=e.domain,s=Xt("requestListeners");if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var a=[],u=0,c=o;u<c.length;u++)a.push(t({name:r,domain:i,win:c[u]},n));return{cancel:function(){for(var t=0;t<a.length;t++)a[t].cancel()}}}if(Array.isArray(i)){for(var f=[],l=0,h=i;l<h.length;l++)f.push(t({name:r,win:o,domain:h[l]},n));return{cancel:function(){for(var t=0;t<f.length;t++)f[t].cancel()}}}var d=Me({name:r,win:o,domain:i});if(o&&o!==zt||(o=$t()),i=i||zt,d)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===$t()?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===$t()?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var p,v,y=s.getOrSet(o,function(){return{}}),m=vt(y,r,function(){return{}}),w=i.toString();return pt(i)?(p=vt(m,Fe,function(){return[]})).push(v={regex:i,listener:n}):m[w]=n,{cancel:function(){delete m[w],v&&(p.splice(p.indexOf(v,1)),p.length||delete m[Fe]),Object.keys(m).length||delete y[r],o&&!Object.keys(y).length&&s.del(o)}}}({name:t,win:r,domain:o},{handler:e.handler,handleError:e.errorHandler||function(t){throw t},window:r,domain:o||zt,name:t});return{cancel:function(){i.cancel()}}}var He,Ve=function t(e,n,r,o){var i=(o=o||{}).domain||zt,s=o.timeout||-1,a=o.timeout||5e3,u=o.fireAndForget||!1;return p.try(function(){return function(t,e,n){if(!t)throw new Error("Expected name");if(n&&"string"!=typeof n&&!Array.isArray(n)&&!pt(n))throw new TypeError("Expected domain to be a string, array, or regex");if(N(e))throw new Error("Target window is closed")}(n,e,i),function(t,e,n,r){var o=r.send;return p.try(function(){return function(t,e){var n=U(e);if(n)return n===t;if(e===t)return!1;if(k(e)===e)return!1;for(var r=0,o=A(t);r<o.length;r++)if(o[r]===e)return!0;return!1}(window,t)?te(t,n):pt(e)?Zt(t,{send:o}):{domain:e}}).then(function(t){return t.domain})}(e,i,a,{send:t})}).then(function(o){if(!q(i,o))throw new Error("Domain "+ct(i)+" does not match "+ct(o));i=o;var a=n===Mt.METHOD&&r&&"string"==typeof r.name?r.name+"()":n,c=new p,f=n+"_"+nt();if(!u){var l={name:n,win:e,domain:i,promise:c};!function(t,e){Gt("responseListeners").set(t,e)}(f,l);var h=Xt("requestPromises").getOrSet(e,function(){return[]});h.push(c),c.catch(function(){!function(t){Gt("erroredResponseListeners").set(t,!0)}(f),We(f)});var d=function(t){return Xt("knownWindows").get(t,!1)}(e)?1e4:2e3,v=s,y=d,m=v,w=lt(function(){return N(e)?c.reject(new Error("Window closed for "+n+" before "+(l.ack?"response":"ack"))):l.cancelled?c.reject(new Error("Response listener was cancelled for "+n)):(y=Math.max(y-500,0),-1!==m&&(m=Math.max(m-500,0)),l.ack||0!==y?0===m?c.reject(new Error("No response for postMessage "+a+" in "+O()+" in "+v+"ms")):void 0:c.reject(new Error("No ack for postMessage "+a+" in "+O()+" in "+d+"ms")))},500);c.finally(function(){w.cancel(),h.splice(h.indexOf(c,1))}).catch(st)}return De(e,i,{type:"postrobot_message_request",hash:f,name:n,data:r,fireAndForget:u},{on:qe,send:t}),u?c.resolve():c})};function Ge(t,e,n){return ke(t,e,n,{on:qe,send:Ve})}function Ye(t,e,n){return Se(t,e,n,{on:qe,send:Ve})}function $e(t){return Te.toProxyWindow(t,{send:Ve})}function Xe(t){for(var e=0,n=Xt("requestPromises").get(t,[]);e<n.length;e++)n[e].reject(new Error("Window cleaned up before response")).catch(st)}function Je(t){if(void 0===t&&(t=window),!P(t))throw new Error("Can not get global for window on different domain");return t.__zoid_9_0_27__||(t.__zoid_9_0_27__={}),t.__zoid_9_0_27__}function Qe(t){return{get:function(){var e=this;return p.try(function(){if(e.source&&e.source!==window)throw new Error("Can not call get on proxy object from a remote window");return t})}}}He={setupBridge:Ce,openBridge:function(t,e){var n=Gt("bridges"),r=Gt("bridgeFrames");return e=e||H(t),n.getOrSet(e,function(){return p.try(function(){if(O()===e)throw new Error("Can not open bridge on the same domain as current domain: "+e);var n=ye(e);if(L(window,n))throw new Error("Frame with name "+n+" already exists on page");var o=function(t,e){var n=document.createElement("iframe");return n.setAttribute("name",t),n.setAttribute("id",t),n.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),n.setAttribute("frameborder","0"),n.setAttribute("border","0"),n.setAttribute("scrolling","no"),n.setAttribute("allowTransparency","true"),n.setAttribute("tabindex","-1"),n.setAttribute("hidden","true"),n.setAttribute("title",""),n.setAttribute("role","presentation"),n.src=e,n}(n,t);return r.set(e,o),we.then(function(e){e.appendChild(o);var n=o.contentWindow;return new p(function(t,e){o.addEventListener("load",t),o.addEventListener("error",e)}).then(function(){return te(n,5e3,"Bridge "+t)}).then(function(){return n})})})})},linkWindow:xe,linkUrl:function(t,e){xe({win:t,domain:H(e)})},isBridge:me,needsBridge:ve,needsBridgeForBrowser:he,hasBridge:function(t,e){return Gt("bridges").has(e||H(t))},needsBridgeForWin:de,needsBridgeForDomain:pe,destroyBridges:function(){for(var t=Gt("bridges"),e=Gt("bridgeFrames"),n=0,r=e.keys();n<r.length;n++){var o=e.get(r[n]);o&&o.parentNode&&o.parentNode.removeChild(o)}e.reset(),t.reset()}};var Ze="zoid",Ke=Ze+"_delegate",tn=Ze+"_allow_delegate",en={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},nn={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},rn=w,on="*",sn={WIDTH:"300px",HEIGHT:"150px"},an={RENDER:"zoid-render",RENDERED:"zoid-rendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",PROPS:"zoid-props",RESIZE:"zoid-resize"};function un(t,e,n,r,o){var s=t.getPropDefinition(n);return s&&"function"==typeof s.childDecorate?s.childDecorate(i({value:r},o)):r}function cn(t){return it(cn,function(){if(!t)throw new Error("No window name");var n=t.split("__"),r=n[1],o=n[2],i=n[3];if(r!==Ze)throw new Error("Window not rendered by zoid - got "+r);if(!o)throw new Error("Expected component name");if(!i)throw new Error("Expected encoded payload");try{return JSON.parse(function(t){if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob(t);if("undefined"!=typeof e)return e.from(t,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(i))}catch(s){throw new Error("Can not decode window name payload: "+i+": "+ut(s))}},[t])}function fn(){try{return cn(window.name)}catch(t){}}var ln=function(){function t(t){var e=this;this.component=void 0,this.props=void 0,this.context=void 0,this.parent=void 0,this.parentDomain=void 0,this.parentComponentWindow=void 0,this.onPropHandlers=void 0,this.autoResize=void 0,p.try(function(){e.component=t,e.onPropHandlers=[];var n=fn();if(!n)throw new Error("No child payload found");if("9_0_27"!==n.version)throw new Error("Parent window has zoid version "+n.version+", child window has version 9_0_27");var r=n.parent,o=n.parentDomain,i=n.exports,s=n.props;e.context=n.context,e.parentComponentWindow=e.getParentComponentWindow(r),e.parentDomain=o,e.parent=Ye(e.parentComponentWindow,o,i),e.checkParentDomain(o);var a=e.getPropsByRef(e.parentComponentWindow,o,s);return e.setProps(a,o),ee(e.parentComponentWindow),e.watchForClose(),e.parent.init(e.buildExports())}).then(function(){return e.watchForResize()}).catch(function(t){e.onError(t)})}var e=t.prototype;return e.getHelpers=function(){var t=this;return{focus:function(){return t.focus()},close:function(){return t.close()},resize:function(e){return t.resize({width:e.width,height:e.height})},onError:function(e){return t.onError(e)},onProps:function(e){return t.onProps(e)},getParent:function(){return t.parentComponentWindow},getParentDomain:function(){return t.parentDomain}}},e.checkParentDomain=function(t){if(!q(this.component.allowedParentDomains,t))throw new Error("Can not be rendered by domain: "+t)},e.onProps=function(t){this.onPropHandlers.push(t)},e.getPropsByRef=function(t,e,n){var r,o=n.type,i=n.uid;if("raw"===o)r=n.value;else if("uid"===o){if(!P(t))throw new Error("Parent component window is on a different domain - expected "+O()+" - can not retrieve props");var s=Je(t);r=mt("props",s&&s.props[i])}if(!r)throw new Error("Could not find props");return Ye(t,e,r)},e.getParentComponentWindow=function(t){var e,n,r=t.type;if("opener"===r)return mt("opener",E(window));if("parent"===r&&"number"==typeof t.distance)return mt("parent",(e=window,void 0===(n=t.distance)&&(n=1),function(t,e){void 0===e&&(e=1);for(var n=t,r=0;r<e;r++){if(!n)return;n=b(n)}return n}(e,B(e)-n)));if("global"===r&&t.uid&&"string"==typeof t.uid){var o=t.uid,i=U(window);if(!i)throw new Error("Can not find ancestor window");for(var s=0,a=S(i);s<a.length;s++){var u=a[s];if(P(u)){var c=Je(u);if(c&&c.windows&&c.windows[o])return c.windows[o]}}}throw new Error("Unable to find "+r+" parent component window")},e.getProps=function(){return this.props=this.props||{},this.props},e.setProps=function(t,e,n){void 0===n&&(n=!1);var r=this.getHelpers(),o=this.getProps();ft(o,function(t,e,n,r,o,i){void 0===i&&(i=!1);for(var s={},a=0,u=Object.keys(n);a<u.length;a++){var c=u[a],f=e.getPropDefinition(c);if(!f||!f.sameDomain||r===O(window)&&P(t)){var l=un(e,0,c,n[c],o);s[c]=l,f&&f.alias&&!s[f.alias]&&(s[f.alias]=l)}}if(!i)for(var h=0,d=e.getPropNames();h<d.length;h++){var p=d[h];n.hasOwnProperty(p)||(s[p]=un(e,0,p,n[p],o))}return s}(this.parentComponentWindow,this.component,t,e,r,n));for(var i=0,s=this.onPropHandlers;i<s.length;i++)s[i].call(this,o)},e.watchForClose=function(){var t=this;window.addEventListener("beforeunload",function(){t.parent.checkClose.fireAndForget()}),window.addEventListener("unload",function(){t.parent.checkClose.fireAndForget()}),V(this.parentComponentWindow,function(){t.destroy()})},e.getAutoResize=function(){var t=this.autoResize||this.component.autoResize||{},e=t.width,n=t.height,r=t.element,o=void 0===r?"body":r;return{width:void 0!==e&&e,height:void 0!==n&&n,element:o=Ct(o)}},e.watchForResize=function(){var t=this;return _t().then(function(){if(document.body)return document.body;throw new Error("Document ready but document.body not present")}).then(function(){var e=t.getAutoResize(),n=e.width,r=e.height,o=e.element;o&&(n||r)&&t.context!==rn.POPUP&&It(o,function(e){t.resize({width:n?e.width:void 0,height:r?e.height:void 0})},{width:n,height:r})})},e.buildExports=function(){var t=this;return{updateProps:function(e){var n=this;return p.try(function(){return t.setProps(e,n.__origin__,!0)})},close:function(){return p.try(function(){return t.destroy()})}}},e.resize=function(t){return this.parent.resize.fireAndForget({width:t.width,height:t.height})},e.close=function(){return this.parent.close()},e.destroy=function(){return p.try(function(){window.close()})},e.focus=function(){return p.try(function(){window.focus()})},e.onError=function(t){var e=this;return p.try(function(){if(e.parent&&e.parent.onError)return e.parent.onError(t);throw t})},t}(),hn={};function dn(t,e,n){return p.try(function(){return"function"==typeof t.queryParam?t.queryParam({value:n}):"string"==typeof t.queryParam?t.queryParam:e})}function pn(t,e,n){return p.try(function(){return"function"==typeof t.queryValue&&dt(n)?t.queryValue({value:n}):n})}hn[rn.IFRAME]={openOnClick:!1,openFrame:function(){return Qe(At({attributes:i({title:this.component.name},this.component.attributes.iframe)}))},open:function(t){var e=this;if(!t)throw new Error("Expected proxy frame to be passed");return t.get().then(function(t){return Rt(t).then(function(n){var r,o,i,s=(r=t,o=at(o=function(){return e.close()}),St(r)?o():i=lt(function(){St(r)&&(i.cancel(),o())},50),{cancel:function(){i&&i.cancel()}});return e.clean.register(function(){return s.cancel()}),e.clean.register(function(){return kt(t)}),e.clean.register(function(){return Xe(n)}),$e(n)})})},openPrerenderFrame:function(){return Qe(At({attributes:i({name:"__zoid_prerender_frame__"+this.component.name+"_"+nt()+"__",title:"prerender__"+this.component.name},this.component.attributes.iframe)}))},openPrerender:function(t,e){var n=this;if(!e)throw new Error("Expected proxy frame to be passed");return e.get().then(function(t){return n.clean.register(function(){return kt(t)}),Rt(t).then(function(t){return T(t)}).then(function(t){return $e(t)})})},delegate:["getProxyContainer","renderContainer","openFrame","openPrerenderFrame","prerender","open","openPrerender"]},hn[rn.POPUP]={openOnClick:!0,open:function(){var t=this;return p.try(function(){var e=t.component.dimensions,n=e.width,r=e.height,o=function(t,e){var n=(e=e||{}).width,r=e.height,o=0,s=0;n&&(window.outerWidth?s=Math.round((window.outerWidth-n)/2)+window.screenX:window.screen.width&&(s=Math.round((window.screen.width-n)/2))),r&&(window.outerHeight?o=Math.round((window.outerHeight-r)/2)+window.screenY:window.screen.height&&(o=Math.round((window.screen.height-r)/2)));var a=(e=i({top:o,left:s,width:n,height:r,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},e)).name||"";delete e.name;var u,c,f=Object.keys(e).map(function(t){if(e[t])return t+"="+ct(e[t])}).filter(Boolean).join(",");try{u=window.open("",a,f,!0)}catch(c){throw new Pt("Can not open popup window - "+(c.stack||c.message))}if(N(u))throw new Pt("Can not open popup window - blocked");return window.addEventListener("unload",function(){return u.close()}),u}(0,i({width:n=Ut(n,window.outerWidth),height:r=Ut(r,window.outerWidth)},t.component.attributes.popup));return t.clean.register(function(){$(o),Xe(o)}),$e(o)})},openPrerender:function(t){return p.try(function(){return t})},delegate:["getProxyContainer","renderContainer","setProxyWin"]};var vn=function(){function t(t,e){var n=this;this.component=void 0,this.driver=void 0,this.clean=void 0,this.event=void 0,this.initPromise=void 0,this.handledErrors=void 0,this.props=void 0,this.state=void 0,this.child=void 0,this.proxyWin=void 0,this.initPromise=new p,this.handledErrors=[],this.props={},this.clean=yt(this),this.state={},this.component=t,this.setupEvents(e.onError),this.setProps(e),this.component.registerActiveComponent(this),this.clean.register(function(){return n.component.destroyActiveComponent(n)}),this.watchForUnload()}var e=t.prototype;return e.setupEvents=function(t){var e,n,r=this;this.event=(e={},n={},{on:function(t,e){var r=n[t]=n[t]||[];r.push(e);var o=!1;return{cancel:function(){o||(o=!0,r.splice(r.indexOf(e),1))}}},once:function(t,e){var n=this.on(t,function(){n.cancel(),e()});return n},trigger:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var i=n[t],s=[];if(i)for(var a=function(t){var e=i[t];s.push(p.try(function(){return e.apply(void 0,r)}))},u=0;u<i.length;u++)a(u);return p.all(s).then(st)},triggerOnce:function(t){if(e[t])return p.resolve();e[t]=!0;for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.trigger.apply(this,[t].concat(r))}}),this.event.on(an.RENDER,function(){return r.props.onRender()}),this.event.on(an.DISPLAY,function(){return r.props.onDisplay()}),this.event.on(an.RENDERED,function(){return r.props.onRendered()}),this.event.on(an.CLOSE,function(){return r.props.onClose()}),this.event.on(an.PROPS,function(t){return r.props.onProps(t)}),this.event.on(an.ERROR,function(e){return r.props&&r.props.onError?r.props.onError(e):t?t(e):r.initPromise.reject(e).then(function(){setTimeout(function(){throw e},1)})})},e.render=function(t,e,n){var r=this;return p.try(function(){r.component.log("render"),r.driver=hn[n];var o=Ze+"-"+r.component.tag+"-"+nt(),i=r.getDomain(),s=r.getChildDomain();r.component.checkAllowRender(t,i,e),t!==window&&r.delegate(n,t);var a={},u=r.initPromise,c=r.buildUrl(),f=r.event.trigger(an.RENDER),l=r.getProxyContainer(e),h=r.openFrame(),d=r.openPrerenderFrame(),v=p.hash({proxyContainer:l,proxyFrame:h,proxyPrerenderFrame:d}).then(function(t){return r.renderContainer(t.proxyContainer,{context:n,uid:o,proxyFrame:t.proxyFrame,proxyPrerenderFrame:t.proxyPrerenderFrame})}),y=r.driver.openOnClick?r.open():h.then(function(t){return r.open(t)}),m=p.hash({proxyWin:y,proxyPrerenderFrame:d}).then(function(t){return r.openPrerender(t.proxyWin,t.proxyPrerenderFrame)}),w=y.then(function(t){return r.proxyWin=t,r.setProxyWin(t)}),g=p.hash({proxyPrerenderWin:m,state:w}).then(function(t){return r.prerender(t.proxyPrerenderWin,{context:n,uid:o})}),_=y.then(function(e){return r.buildWindowName({proxyWin:e,childDomain:s,domain:i,target:t,context:n,uid:o})}),b=p.hash({proxyWin:y,windowName:_}).then(function(t){return t.proxyWin.setName(t.windowName)}),E=p.hash({proxyWin:y,url:c,windowName:b,prerender:g}).then(function(t){return t.proxyWin.setLocation(t.url)}),x=y.then(function(t){r.watchForClose(t)}),C=p.hash({container:v,prerender:g}).then(function(){return r.event.trigger(an.DISPLAY)}),O=y.then(function(t){return r.openBridge(t,s,n)}),P=E.then(function(){return r.runTimeout()}),T=u.then(function(){return r.event.trigger(an.RENDERED)});return p.hash({init:u,buildUrl:c,onRender:f,getProxyContainer:l,openFrame:h,openPrerenderFrame:d,renderContainer:v,open:y,openPrerender:m,setState:w,prerender:g,loadUrl:E,buildWindowName:_,setWindowName:b,watchForClose:x,onDisplay:C,openBridge:O,runTimeout:P,onRendered:T}).catch(function(t){for(var e=0,n=Object.keys(a);e<n.length;e++)a[n[e]].reject(t);throw t})}).catch(function(t){return p.all([r.onError(t),r.destroy(t)]).then(function(){throw t})}).then(st)},e.getProxyContainer=function(t){return p.try(function(){return Ot(t)}).then(function(t){return Qe(t)})},e.buildWindowName=function(t){var e=this.buildChildPayload({proxyWin:t.proxyWin,childDomain:t.childDomain,domain:t.domain,target:t.target,context:t.context,uid:t.uid});return"__"+Ze+"__"+this.component.name+"__"+et(JSON.stringify(e))+"__"},e.getPropsRef=function(t,e,n,r){var o=Ge(t,n,this.getPropsForChild(n)),i=e===O()?{type:"uid",uid:r}:{type:"raw",value:o};if("uid"===i.type){var s=Je(window);s.props=s.props||{},s.props[r]=o,this.clean.register(function(){delete s.props[r]})}return i},e.buildChildPayload=function(t){var e=void 0===t?{}:t,n=e.proxyWin,r=e.childDomain,o=e.domain,i=e.target,s=void 0===i?window:i,a=e.context,u=e.uid;return{uid:u,context:a,version:"9_0_27",childDomain:r,parentDomain:O(window),tag:this.component.tag,parent:this.getWindowRef(s,r,u,a),props:this.getPropsRef(n,r,o,u),exports:Ge(n,o,this.buildParentExports(n))}},e.setProxyWin=function(t){var e=this;return p.try(function(){e.proxyWin=t})},e.getHelpers=function(){var t=this;return{state:this.state,event:this.event,close:function(){return t.close()},focus:function(){return t.focus()},resize:function(e){return t.resize({width:e.width,height:e.height})},onError:function(e){return t.onError(e)},updateProps:function(e){return t.updateProps(e)}}},e.setProps=function(t,e){void 0===e&&(e=!1),this.component.validate&&this.component.validate({props:t});var n=this.getHelpers();!function(t,e,n,r,o){void 0===o&&(o=!1),ft(e,n=n||{});for(var i=o?[]:[].concat(t.getPropNames()),s=0,a=Object.keys(n);s<a.length;s++){var u=a[s];-1===i.indexOf(u)&&i.push(u)}for(var c=[],f=r.state,l=r.close,h=r.focus,d=r.onError,p=0;p<i.length;p++){var v=i[p],y=t.getPropDefinition(v),m=n[v];if(y){var w=y.alias;if(w&&(!dt(m)&&dt(n[w])&&(m=n[w]),c.push(w)),y.value&&(m=y.value({props:e,state:f,close:l,focus:h,onError:d})),!dt(m)&&y.default&&(m=y.default({props:e,state:f,close:l,focus:h,onError:d})),dt(m)&&("array"===y.type?!Array.isArray(m):typeof m!==y.type))throw new TypeError("Prop is not of type "+y.type+": "+v);e[v]=m}}for(var g=0;g<c.length;g++)delete e[c[g]];for(var _=0,b=Object.keys(e);_<b.length;_++){var E=b[_],x=t.getPropDefinition(E),C=e[E];x&&(dt(C)&&x.validate&&x.validate({value:C,props:e}),dt(C)&&x.decorate&&(e[E]=x.decorate({value:C,props:e,state:f,close:l,focus:h,onError:d})))}for(var O=0,P=t.getPropNames();O<P.length;O++){var T=P[O];if(!1!==t.getPropDefinition(T).required&&!dt(e[T]))throw new Error('Expected prop "'+T+'" to be defined')}}(this.component,this.props,t,n,e)},e.buildUrl=function(){var t,e,n,r,o=this;return(t=i({},this.component.props,this.component.builtinProps),e=this.props,n={},r=Object.keys(e),p.all(r.map(function(r){var o=t[r];if(o)return p.resolve().then(function(){var t=e[r];if(t&&o.queryParam)return t}).then(function(t){if(null!=t)return p.all([dn(o,r,t),pn(o,0,t)]).then(function(t){var e,i=t[0],s=t[1];if("boolean"==typeof s)e=s.toString();else if("string"==typeof s)e=s.toString();else if("object"==typeof s&&null!==s){if(o.serialization===nn.JSON)e=JSON.stringify(s);else if(o.serialization===nn.BASE64)e=btoa(JSON.stringify(s));else if(o.serialization===nn.DOTIFY||!o.serialization){e=function t(e,n,r){for(var o in void 0===n&&(n=""),void 0===r&&(r={}),n=n?n+".":n,e)e.hasOwnProperty(o)&&null!=e[o]&&"function"!=typeof e[o]&&(e[o]&&Array.isArray(e[o])&&e[o].length&&e[o].every(function(t){return"object"!=typeof t})?r[""+n+o+"[]"]=e[o].join(","):e[o]&&"object"==typeof e[o]?r=t(e[o],""+n+o,r):r[""+n+o]=e[o].toString());return r}(s,r);for(var a=0,u=Object.keys(e);a<u.length;a++){var c=u[a];n[c]=e[c]}return}}else"number"==typeof s&&(e=s.toString());n[i]=e})})})).then(function(){return n})).then(function(t){return function(t,e){void 0===e&&(e={});var n,r,o=e.query||{},i=e.hash||{},s=t.split("#");r=s[1];var a=(n=s[0]).split("?");n=a[0];var u=Et(a[1],o),c=Et(r,i);return u&&(n=n+"?"+u),c&&(n=n+"#"+c),n}(Y(o.component.getUrl(o.props)),{query:t})})},e.getDomain=function(){return this.component.getDomain(this.props)},e.getChildDomain=function(){return this.component.getChildDomain(this.props)},e.getPropsForChild=function(t){for(var e={},n=0,r=Object.keys(this.props);n<r.length;n++){var o=r[n],i=this.component.getPropDefinition(o);i&&!1===i.sendToChild||i&&i.sameDomain&&!q(t,O(window))||(e[o]=this.props[o])}return e},e.updateProps=function(t){var e=this;return this.setProps(t,!0),this.initPromise.then(function(){if(e.child)return e.child.updateProps(e.getPropsForChild(e.getDomain())).catch(function(t){if(e.child&&e.proxyWin)return e.checkClose(e.proxyWin).then(function(){if(e.child)throw t})})})},e.openFrame=function(){var t=this;return p.try(function(){if(t.driver.openFrame)return t.driver.openFrame.call(t)})},e.openPrerenderFrame=function(){var t=this;return p.try(function(){if(t.driver.openPrerenderFrame)return t.driver.openPrerenderFrame.call(t)})},e.open=function(t){var e=this;return p.try(function(){e.component.log("open");var n=e.props.window;return n?(e.clean.register(function(){return n.close()}),$e(n)):e.driver.open.call(e,t)}).then(function(t){return e.proxyWin=t,t})},e.openPrerender=function(t,e){var n=this;return p.try(function(){return n.driver.openPrerender.call(n,t,e)})},e.focus=function(){var t=this;return p.try(function(){if(t.proxyWin)return t.proxyWin.focus().then(st)})},e.delegate=function(t,e){var n=this;this.component.log("delegate");for(var r={},o=0,i=this.component.getPropNames();o<i.length;o++){var s=i[o];this.component.getPropDefinition(s).allowDelegate&&(r[s]=this.props[s])}for(var a=Ve(e,Ke+"_"+this.component.name,{context:t,props:r,overrides:{event:this.event,close:function(){return n.close()},onError:function(t){return n.onError(t)}}}).then(function(t){var e=t.data;return n.clean.register(e.destroy),e.overrides}).catch(function(t){throw new Error("Unable to delegate rendering. Possibly the component is not loaded in the target window.\n\n"+ut(t))}),u=function(t,e){var r=e[t];n[r]=function(){var t=this,e=arguments;return a.then(function(n){return n[r].apply(t,e)})}},c=0,f=this.driver.delegate;c<f.length;c++)u(c,f)},e.getWindowRef=function(t,e,n,r){if(e===O(window)){var o=Je(window);return o.windows=o.windows||{},o.windows[n]=window,this.clean.register(function(){delete o.windows[n]}),{type:"global",uid:n}}return r===rn.POPUP?{type:"opener"}:{type:"parent",distance:B(window)}},e.watchForClose=function(t){var e=this,n=!1;return this.clean.register(function(){n=!0}),p.delay(2e3).then(function(){return t.isClosed()}).then(function(r){return r?(e.component.log("detect_close_child"),e.close()):n?void 0:e.watchForClose(t)})},e.watchForUnload=function(){var t=this,e=jt(window,"unload",at(function(){t.component.log("navigate_away"),t.destroy(new Error("Window navigated away"))}));this.clean.register(e.cancel)},e.runTimeout=function(){var t=this;return p.try(function(){var e=t.props.timeout;if(e)return t.initPromise.timeout(e,new Error("Loading component timed out after "+e+" milliseconds"))})},e.initChild=function(t){var e=this;return p.try(function(){e.clean.set("child",t),e.initPromise.resolve()})},e.buildParentExports=function(t){var e=this,n=function(t){return e.onError(t)},r=function(t){return e.initChild(t)};return r.onError=n,{init:r,close:function(){return e.close()},checkClose:function(){return e.checkClose(t)},resize:function(t){return e.resize({width:t.width,height:t.height})},onError:n}},e.resize=function(t){var e=this,n=t.width,r=t.height;return p.try(function(){e.event.trigger(an.RESIZE,{width:n,height:r})})},e.checkClose=function(t){var e=this;return t.isClosed().then(function(n){return n?e.close():p.delay(200).then(function(){return t.isClosed()}).then(function(t){if(t)return e.close()})})},e.close=function(){var t=this;return p.try(function(){return t.component.log("close"),t.event.trigger(an.CLOSE)}).then(function(){return t.child&&t.child.close.fireAndForget().catch(st),t.destroy(new Error("Window closed"),!1)})},e.prerender=function(t,e){var n=this,r=e.context,o=e.uid;return p.try(function(){var e=n.component.prerenderTemplate;if(e){var i=t.getWindow();if(i&&P(i)&&function(t){try{if(!t.location.href)return!0;if("about:blank"===t.location.href)return!0}catch(e){}return!1}(i)){var s=(i=T(i)).document,a=n.renderTemplate(e,{context:r,uid:o,doc:s});if(a){if(a.ownerDocument!==s)throw new Error("Expected prerender template to have been created with document from child window");!function(t,e){var n=e.tagName.toLowerCase();if("html"!==n)throw new Error("Expected element to be html, got "+n);for(var r=t.document.documentElement,o=0,i=ht(r.children);o<i.length;o++)r.removeChild(i[o]);for(var s=0,a=ht(e.children);s<a.length;s++)r.appendChild(a[s])}(i,a);var u=n.component.autoResize||{},c=u.width,f=void 0!==c&&c,l=u.height,h=void 0!==l&&l,d=u.element,p=void 0===d?"body":d;(p=Ct(p,s))&&(f||h)&&It(p,function(t){n.resize({width:f?t.width:void 0,height:h?t.height:void 0})},{width:f,height:h,win:i})}}}})},e.renderTemplate=function(t,e){var n=this;return t.call(this,{container:e.container,context:e.context,uid:e.uid,doc:e.doc,frame:e.frame,prerenderFrame:e.prerenderFrame,focus:function(){return n.focus()},close:function(){return n.close()},state:this.state,props:this.props,tag:this.component.tag,dimensions:this.component.dimensions,event:this.event})},e.renderContainer=function(t,e){var n=this,r=e.proxyFrame,o=e.proxyPrerenderFrame,i=e.context,s=e.uid;return p.hash({container:t.get().then(Ot),frame:r?r.get():null,prerenderFrame:o?o.get():null}).then(function(t){var e=t.container,r=n.renderTemplate(n.component.containerTemplate,{context:i,uid:s,container:e,frame:t.frame,prerenderFrame:t.prerenderFrame,doc:document});if(r)return function(t,e){t.appendChild(e)}(e,r),n.clean.register(function(){return kt(r)}),Qe(r)})},e.destroy=function(t,e){var n=this;return void 0===e&&(e=!0),p.try(function(){return t||(e=!1,t=new Error("Component destroyed")),n.component.log("destroy"),n.onError(t,e)}).then(function(){return n.clean.all()})},e.onError=function(t,e){var n=this;return void 0===e&&(e=!0),p.try(function(){if(-1===n.handledErrors.indexOf(t))return n.handledErrors.push(t),n.initPromise.asyncReject(t),e?n.event.trigger(an.ERROR,t):void 0})},e.openBridge=function(t,e,n){var r=this;return p.try(function(){return t.awaitWindow()}).then(function(t){if(He&&He.needsBridge({win:t,domain:e})&&!He.hasBridge(e,e)){var o=r.component.getBridgeUrl();if(!o)throw new Error("Bridge needed to render "+n);var i=H(o);return He.linkUrl(t,e),He.openBridge(Y(o),i)}})},t}(),yn=function(){function t(t,e,n){var r=this;this.component=void 0,this.source=void 0,this.context=void 0,this.driver=void 0,this.props=void 0,this.clean=void 0,this.focus=void 0,this.resize=void 0,this.renderTemplate=void 0,this.close=void 0,this.onError=void 0,this.event=void 0,this.component=t,this.context=n.context,this.driver=hn[n.context],this.clean=yt(this),this.focus=vn.prototype.focus,this.resize=vn.prototype.resize,this.renderTemplate=vn.prototype.renderTemplate,this.props={};for(var o=0,i=Object.keys(n.props);o<i.length;o++){var s=i[o],a=this.component.getPropDefinition(s);a&&a.allowDelegate&&n.props[s]&&(this.props[s]=n.props[s])}this.close=n.overrides.close,this.onError=n.overrides.onError,this.event=n.overrides.event,this.component.registerActiveComponent(this),this.clean.register(function(){return r.component.destroyActiveComponent(r)}),this.watchForSourceClose(e)}var e=t.prototype;return e.getDelegate=function(){var t=this;return{overrides:this.getOverrides(),destroy:function(){return t.destroy()}}},e.watchForSourceClose=function(t){var e=this,n=V(t,function(){return e.destroy()},3e3);this.clean.register(n.cancel)},e.getOverrides=function(){for(var t={},e=this,n=function(n,r){var o=r[n];t[o]=function(){return vn.prototype[o].apply(e,arguments)},t[o].__name__=o},r=0,o=this.driver.delegate;r<o.length;r++)n(r,o);return t},e.destroy=function(){return this.clean.all()},t}(),mn={VISIBLE:"visible",INVISIBLE:"invisible"};function wn(t){var e=t.uid,n=t.frame,r=t.prerenderFrame,o=t.doc,i=t.props,s=t.event,a=t.dimensions,u=a.width,c=a.height;if(n&&r){var f=o.createElement("div");f.setAttribute("id",e);var l=o.createElement("style");return i.cspNonce&&l.setAttribute("nonce",i.cspNonce),l.appendChild(o.createTextNode("\n            #"+e+" {\n                display: inline-block;\n                position: relative;\n                width: "+u+";\n                height: "+c+";\n            }\n\n            #"+e+" > iframe {\n                display: inline-block;\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                transition: opacity .2s ease-in-out;\n            }\n\n            #"+e+" > iframe."+mn.INVISIBLE+" {\n                opacity: 0;\n            }\n\n            #"+e+" > iframe."+mn.VISIBLE+" {\n                opacity: 1;\n        }\n        ")),f.appendChild(n),f.appendChild(r),f.appendChild(l),r.classList.add(mn.VISIBLE),n.classList.add(mn.INVISIBLE),s.on(an.RENDERED,function(){r.classList.remove(mn.VISIBLE),r.classList.add(mn.INVISIBLE),n.classList.remove(mn.INVISIBLE),n.classList.add(mn.VISIBLE),setTimeout(function(){kt(r)},1)}),s.on(an.RESIZE,function(t){var e=t.width,n=t.height;"number"==typeof e&&(f.style.width=Wt(e)),"number"==typeof n&&(f.style.height=Wt(n))}),f}}function gn(t){var e=t.doc,n=t.props,r=e.createElement("html"),o=e.createElement("body"),i=e.createElement("style"),s=e.createElement("div");return s.classList.add("spinner"),n.cspNonce&&i.setAttribute("nonce",n.cspNonce),r.appendChild(o),o.appendChild(s),o.appendChild(i),i.appendChild(e.createTextNode("\n            html, body {\n                width: 100%;\n                height: 100%;\n            }\n\n            .spinner {\n                position: fixed;\n                max-height: 60vmin;\n                max-width: 60vmin;\n                height: 40px;\n                width: 40px;\n                top: 50%;\n                left: 50%;\n                box-sizing: border-box;\n                border: 3px solid rgba(0, 0, 0, .2);\n                border-top-color: rgba(33, 128, 192, 0.8);\n                border-radius: 100%;\n                animation: rotation .7s infinite linear;\n            }\n\n            @keyframes rotation {\n                from {\n                    transform: translateX(-50%) translateY(-50%) rotate(0deg);\n                }\n                to {\n                    transform: translateX(-50%) translateY(-50%) rotate(359deg);\n                }\n            }\n        ")),r}var _n=function(){return st},bn=function(t){return at(t.value)},En=function(){function t(t){this.tag=void 0,this.name=void 0,this.url=void 0,this.domain=void 0,this.bridgeUrl=void 0,this.props=void 0,this.builtinProps=void 0,this.dimensions=void 0,this.autoResize=void 0,this.allowedParentDomains=void 0,this.defaultContext=void 0,this.attributes=void 0,this.containerTemplate=void 0,this.prerenderTemplate=void 0,this.validate=void 0,this.driverCache=void 0,this.xprops=void 0,this.logger=void 0,this.propNames=void 0,function(t){if(!t)throw new Error("Expected options to be passed");if(!t.tag||!t.tag.match(/^([a-z0-9]+-)+[a-z0-9]+$/))throw new Error("Invalid options.tag: "+t.tag);if(function(t){if(t.props&&"object"!=typeof t.props)throw new Error("Expected options.props to be an object");var e=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}(en);if(t.props)for(var n=0,r=Object.keys(t.props);n<r.length;n++){var o=r[n],i=t.props[o];if(!i||"object"!=typeof i)throw new Error("Expected options.props."+o+" to be an object");if(!i.type)throw new Error("Expected prop.type");if(-1===e.indexOf(i.type))throw new Error("Expected prop.type to be one of "+e.join(", "));if(i.required&&i.default)throw new Error("Required prop can not have a default value");if(i.type===en.FUNCTION&&i.queryParam&&!i.queryValue)throw new Error("Do not pass queryParam for function prop")}}(t),t.dimensions){if(t.dimensions&&!Nt(t.dimensions.width)&&!Dt(t.dimensions.width))throw new Error("Expected options.dimensions.width to be a px or % string value");if(t.dimensions&&!Nt(t.dimensions.height)&&!Dt(t.dimensions.height))throw new Error("Expected options.dimensions.height to be a px or % string value")}if(t.defaultContext&&t.defaultContext!==rn.IFRAME&&t.defaultContext!==rn.POPUP)throw new Error("Unsupported context type: "+(t.defaultContext||"unknown"));if(!t.url)throw new Error("Must pass url");if("string"!=typeof t.url&&"function"!=typeof t.url)throw new TypeError("Expected url to be string or function");if(t.prerenderTemplate&&"function"!=typeof t.prerenderTemplate)throw new Error("Expected options.prerenderTemplate to be a function");if(t.containerTemplate&&"function"!=typeof t.containerTemplate)throw new Error("Expected options.containerTemplate to be a function")}(t),this.tag=t.tag,this.name=this.tag.replace(/-/g,"_"),this.allowedParentDomains=t.allowedParentDomains||on;var e=Je();if(e.components=e.components||{},e.components[this.tag])throw new Error("Can not register multiple components with the same tag: "+this.tag);this.builtinProps={window:{type:"object",sendToChild:!1,required:!1,allowDelegate:!0,validate:function(t){var e=t.value;if(!G(e)&&!Te.isProxyWindow(e))throw new Error("Expected Window or ProxyWindow")},decorate:function(t){return $e(t.value)}},timeout:{type:"number",required:!1,sendToChild:!1},close:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.close}},focus:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.focus}},resize:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.resize}},cspNonce:{type:"string",required:!1},getParent:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.getParent}},getParentDomain:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.getParentDomain}},onDisplay:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:_n,decorate:bn},onRendered:{type:"function",required:!1,sendToChild:!1,default:_n,decorate:bn},onRender:{type:"function",required:!1,sendToChild:!1,default:_n,decorate:bn},onClose:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:_n,decorate:bn},onError:{type:"function",required:!1,sendToChild:!1,childDecorate:function(t){return t.onError}},onProps:{type:"function",required:!1,sendToChild:!1,default:_n,childDecorate:function(t){return t.onProps}}},this.props=t.props||{};var n=t.dimensions||{},r=n.width,o=n.height;this.dimensions={width:void 0===r?sn.WIDTH:r,height:void 0===o?sn.HEIGHT:o},this.url=t.url,this.domain=t.domain,this.bridgeUrl=t.bridgeUrl,this.attributes=t.attributes||{},this.attributes.iframe=this.attributes.iframe||{},this.attributes.popup=this.attributes.popup||{},this.defaultContext=t.defaultContext||rn.IFRAME,this.autoResize=t.autoResize,this.containerTemplate=t.containerTemplate?t.containerTemplate:wn,this.prerenderTemplate=t.prerenderTemplate?t.prerenderTemplate:gn,this.validate=t.validate,this.logger=t.logger||{debug:st,info:st,warn:st,error:st},this.registerChild(),this.listenDelegate(),e.components[this.tag]=this}var e=t.prototype;return e.getPropNames=function(){if(this.propNames)return this.propNames;for(var t=Object.keys(this.props),e=0,n=Object.keys(this.builtinProps);e<n.length;e++){var r=n[e];-1===t.indexOf(r)&&t.push(r)}return this.propNames=t,t},e.getPropDefinition=function(t){return this.props[t]||this.builtinProps[t]},e.driver=function(t,e){throw new Error("Driver support not enabled")},e.registerChild=function(){if(this.isChild()){if(window.xprops)throw new Error("Can not register "+this.name+" as child - can not attach multiple components to the same window");var t=new ln(this);window.xprops=this.xprops=t.getProps()}},e.listenDelegate=function(){var t=this;qe(tn+"_"+this.name,function(){return!0}),qe(Ke+"_"+this.name,function(e){var n=e.data;return new yn(t,e.source,{context:n.context,props:n.props,overrides:n.overrides}).getDelegate()})},e.canRenderTo=function(t){return Ve(t,tn+"_"+this.name).then(function(t){return t.data}).catch(function(){return!1})},e.getUrl=function(t){return"function"==typeof this.url?this.url({props:t}):this.url},e.getChildDomain=function(t){return this.domain&&"string"==typeof this.domain?this.domain:H(this.getUrl(t))},e.getDomain=function(t){return this.domain&&pt(this.domain)?this.domain:this.getChildDomain(t)},e.getBridgeUrl=function(){if(this.bridgeUrl)return this.bridgeUrl},e.isChild=function(){var t=fn();return Boolean(t&&t.tag===this.tag&&t.childDomain===O())},e.getDefaultContainer=function(t,e){if(e){if("string"!=typeof e&&!xt(e))throw new TypeError("Expected string or element selector to be passed");return e}if(t===rn.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")},e.getDefaultContext=function(t,e){if(e.window)return $e(e.window).getType();if(t){if(t!==rn.IFRAME&&t!==rn.POPUP)throw new Error("Unrecognized context: "+t);return t}return this.defaultContext},e.init=function(t){var e=this,n=new vn(this,t=t||{}),r=function(r,o,i){return p.try(function(){if(!G(r))throw new Error("Must pass window to renderTo");return i=e.getDefaultContext(i,t),o=e.getDefaultContainer(i,o),n.render(r,o,i)})};return i({},n.getHelpers(),{render:function(t,e){return r(window,t,e)},renderTo:function(t,e,n){return r(t,e,n)}})},e.checkAllowRender=function(t,e,n){if(t!==window){if(!z(window,t))throw new Error("Can only renderTo an adjacent frame");var r=O();if(!q(e,r)&&!P(t))throw new Error("Can not render remotely to "+e.toString()+" - can only render to "+r);if(n&&"string"!=typeof n)throw new Error("Container passed to renderTo must be a string selector, got "+typeof n+" }")}},e.log=function(t,e){this.logger.info(this.name+"_"+t,e)},e.registerActiveComponent=function(t){var e=Je();e.activeComponents=e.activeComponents||[],e.activeComponents.push(t)},e.destroyActiveComponent=function(t){var e=Je();e.activeComponents=e.activeComponents||[],e.activeComponents.splice(e.activeComponents.indexOf(t),1)},t}();function xn(t){var e,n,r;Ht().initialized||(Ht().initialized=!0,function(t){var e=t.on,n=t.send,r=Ht();r.receiveMessage=r.receiveMessage||function(t){return ze(t,{on:e,send:n})}}({on:qe,send:Ve}),n=(e={on:qe,send:Ve}).on,r=e.send,Gt().getOrSet("postMessageListener",function(){return jt(window,"message",function(t){!function(t,e){var n=e.on,r=e.send,o=t.source||t.sourceElement,i=t.origin||t.originalEvent&&t.originalEvent.origin,s=t.data;if("null"===i&&(i=y.FILE+"//"),o){if(!i)throw new Error("Post message did not have origin domain");ze({source:o,origin:i,data:s},{on:n,send:r})}}(t,{on:n,send:r})})}),Ce({on:qe,send:Ve,receiveMessage:ze}),function(t){var e=t.on,n=t.send;Gt("builtinListeners").getOrSet("helloListener",function(){var t=e(Mt.HELLO,{domain:zt},function(t){var e=t.source,n=t.origin;return Qt(e).resolve({win:e,domain:n}),{instanceID:Jt()}}),r=U();return r&&Zt(r,{send:n}).catch(st),t})}({on:qe,send:Ve}));var o=new En(t),i=function(t){return o.init(t)};return i.driver=function(t,e){return o.driver(t,e)},i.isChild=function(){return o.isChild()},i.canRenderTo=function(t){return o.canRenderTo(t)},i.xprops=o.xprops,i}function Cn(){He&&He.destroyBridges();var t=[],e=Je();for(e.activeComponents=e.activeComponents||[];e.activeComponents.length;)t.push(e.activeComponents[0].destroy(new Error("zoid destroyed all"),!1));return p.all(t).then(st)}var On=Cn;function Pn(){var t;Cn(),delete window.__zoid_9_0_27__,function(){for(var t=Gt("responseListeners"),e=0,n=t.keys();e<n.length;e++){var r=n[e],o=t.get(r);o&&(o.cancelled=!0),t.del(r)}}(),(t=Gt().get("postMessageListener"))&&t.cancel(),delete window.__post_robot_10_0_18__}r.d(n,"PopupOpenError",function(){return Pt}),r.d(n,"create",function(){return xn}),r.d(n,"destroy",function(){return Pn}),r.d(n,"destroyComponents",function(){return On}),r.d(n,"destroyAll",function(){return Cn}),r.d(n,"Component",function(){return En}),r.d(n,"PROP_TYPE",function(){return en}),r.d(n,"PROP_SERIALIZATION",function(){return nn}),r.d(n,"CONTEXT",function(){return rn}),r.d(n,"EVENT",function(){return an})}])}).call(this,n(29).Buffer)},function(t,e,n){var r=n(61),o=n(93);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(9),o=n(62),i=n(65),s=n(90);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(s(t))}},function(t,e,n){var r=n(9),o=n(17),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||s.test(t)||!i.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(18),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(u){}var o=s.call(t);return r&&(e?t[a]=n:delete t[a]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(66),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,s=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)}),e});t.exports=s},function(t,e,n){var r=n(67),o=500;t.exports=function(t){var e=r(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(31),o="Expected a function";function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(69),o=n(12),i=n(32);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(70),o=n(76),i=n(77),s=n(78),a=n(79);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(11);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){var r=n(20),o=n(72),i=n(2),s=n(74),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,f=u.toString,l=c.hasOwnProperty,h=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:a).test(s(t))}},function(t,e,n){var r=n(73),o=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(6)["__core-js_shared__"];t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(11),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===o?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(11),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(11),o="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?o:e,this}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(13),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(13);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(13);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(13);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(15);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(15);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(15);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(15);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(91);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(18),o=n(92),i=n(9),s=n(17),a=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(s(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-a?"-0":n}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(17),o=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}},function(t,e,n){var r=n(33),o=n(34),i=n(100),s=n(132),a=o(function(t){return t.push(void 0,i),r(s,void 0,t)});t.exports=a},function(t,e,n){var r=n(33),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,s=-1,a=o(i.length-e,0),u=Array(a);++s<a;)u[s]=i[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=i[s];return c[e]=n(u),r(t,this,c)}}},function(t,e,n){var r=n(97),o=n(99)(r);t.exports=o},function(t,e,n){var r=n(98),o=n(36),i=n(35),s=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=s},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,r=16,o=Date.now;t.exports=function(t){var e=0,i=0;return function(){var s=o(),a=r-(s-i);if(i=s,a>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(37),o=n(2);t.exports=function t(e,n,i,s,a,u){return o(e)&&o(n)&&(u.set(n,e),r(e,n,void 0,t,u),u.delete(n)),e}},function(t,e,n){var r=n(12),o=n(102),i=n(103),s=n(104),a=n(105),u=n(106);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,t.exports=c},function(t,e,n){var r=n(12);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(12),o=n(32),i=n(31),s=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<s-1)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(108)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++o];if(!1===n(i[u],u,i))break}return e}}},function(t,e,n){var r=n(38),o=n(110),i=n(111),s=n(114),a=n(115),u=n(41),c=n(9),f=n(119),l=n(43),h=n(20),d=n(2),p=n(121),v=n(44),y=n(45),m=n(125);t.exports=function(t,e,n,w,g,_,b){var E=y(t,n),x=y(e,n),C=b.get(x);if(C)r(t,n,C);else{var O=_?_(E,x,n+"",t,e,b):void 0,P=void 0===O;if(P){var T=c(x),R=!T&&l(x),A=!T&&!R&&v(x);O=x,T||R||A?c(E)?O=E:f(E)?O=s(E):R?(P=!1,O=o(x,!0)):A?(P=!1,O=i(x,!0)):O=[]:p(x)||u(x)?(O=E,u(E)?O=m(E):d(E)&&!h(E)||(O=a(x))):P=!1}P&&(b.set(x,O),g(O,x,w,_,b),b.delete(x)),r(t,n,O)}}},function(t,e,n){(function(t){var r=n(6),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===o?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(22)(t))},function(t,e,n){var r=n(112);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(113);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(6).Uint8Array;t.exports=r},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(116),o=n(39),i=n(40);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(2),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(10),o=n(7),i="[object Arguments]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){var r=n(23),o=n(7);t.exports=function(t){return o(t)&&r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(10),o=n(39),i=n(7),s="[object Object]",a=Function.prototype,u=Object.prototype,c=a.toString,f=u.hasOwnProperty,l=c.call(Object);t.exports=function(t){if(!i(t)||r(t)!=s)return!1;var e=o(t);if(null===e)return!0;var n=f.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},function(t,e,n){var r=n(10),o=n(42),i=n(7),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!s[r(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(30),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=i&&i.exports===o&&r.process,a=function(){try{var t=i&&i.require&&i.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=a}).call(this,n(22)(t))},function(t,e,n){var r=n(126),o=n(46);t.exports=function(t){return r(t,o(t))}},function(t,e,n){var r=n(127),o=n(21);t.exports=function(t,e,n,i){var s=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var c=e[a],f=i?i(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),s?o(n,c,f):r(n,c,f)}return n}},function(t,e,n){var r=n(21),o=n(14),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];i.call(t,e)&&o(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(129),o=n(41),i=n(9),s=n(43),a=n(47),u=n(44),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),l=!n&&!f&&s(t),h=!n&&!f&&!l&&u(t),d=n||f||l||h,p=d?r(t.length,String):[],v=p.length;for(var y in t)!e&&!c.call(t,y)||d&&("length"==y||l&&("offset"==y||"parent"==y)||h&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,v))||p.push(y);return p}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(2),o=n(40),i=n(131),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(37),o=n(133)(function(t,e,n,o){r(t,e,n,o)});t.exports=o},function(t,e,n){var r=n(34),o=n(134);t.exports=function(t){return r(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(i--,s):void 0,a&&o(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,s)}return e})}},function(t,e,n){var r=n(14),o=n(23),i=n(47),s=n(2);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?o(n)&&i(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},function(t,e,n){(function(e,n,r){var o;o=function(){var t,i,s;return function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return o(n||t)},f,f.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,n,r){"use strict";var i;try{throw new Error}catch(o){i=o}var s=t("./schedule"),a=t("./queue"),u=t("./util");function c(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=s}function f(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function l(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function h(t){this._normalQueue._pushOne(t),this._queueTick()}function d(t){for(;t.length()>0;)p(t)}function p(t){var e=t.shift();if("function"!==typeof e)e._settlePromises();else{var n=t.shift(),r=t.shift();e.call(n,r)}}c.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},c.prototype.hasCustomScheduler=function(){return this._customScheduler},c.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},c.prototype.disableTrampolineIfNecessary=function(){u.hasDevTools&&(this._trampolineEnabled=!1)},c.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},c.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},c.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!==typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(o){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},u.hasDevTools?(c.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?f.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},c.prototype.invoke=function(t,e,n){this._trampolineEnabled?l.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},c.prototype.settlePromises=function(t){this._trampolineEnabled?h.call(this,t):this._schedule(function(){t._settlePromises()})}):(c.prototype.invokeLater=f,c.prototype.invoke=l,c.prototype.settlePromises=h),c.prototype._drainQueues=function(){d(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,d(this._lateQueue)},c.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},c.prototype._reset=function(){this._isTickUsed=!1},n.exports=c,n.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var o=!1,i=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(i,i,null,this,t)},a=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(i){o||(o=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(i),f=new t(e);f._propagateFrom(this,1);var l=this._target();if(f._setBoundTo(c),c instanceof t){var h={promiseRejectionQueued:!1,promise:f,target:l,bindingPromise:c};l._then(e,s,void 0,f,h),c._then(a,u,void 0,f,h),f._setOnCancel(c)}else f._resolveCallback(l);return f},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var r;"undefined"!==typeof Promise&&(r=Promise);var i=t("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(o){}return i},e.exports=i},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var o=r(null),i=r(null);o[" size"]=i[" size"]=0}e.exports=function(e){var n=t("./util"),r=n.canEvaluate;n.isIdentifier;function o(t){return function(t,r){var o;if(null!=t&&(o=t[r]),"function"!==typeof o){var i="Object "+n.classString(t)+" has no method '"+n.toString(r)+"'";throw new e.TypeError(i)}return o}(t,this.pop()).apply(t,this)}function i(t){return t[this]}function s(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(o,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"===typeof t)e=s;else if(r){var n=(void 0)(t);e=null!==n?n:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,o){var i=t("./util"),s=i.tryCatch,a=i.errorObj,u=e._async;e.prototype.break=e.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(i.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"===typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=t("./es5").keys,o=n.tryCatch,i=n.errorObj;return function(t,s,a){return function(u){var c=a._boundValue();t:for(var f=0;f<t.length;++f){var l=t[f];if(l===Error||null!=l&&l.prototype instanceof Error){if(u instanceof l)return o(s).call(c,u)}else if("function"===typeof l){var h=o(l).call(c,u);if(h===i)return h;if(h)return o(s).call(c,u)}else if(n.isObject(u)){for(var d=r(l),p=0;p<d.length;++p){var v=d[p];if(l[v]!=u[v])continue t}return o(s).call(c,u)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function r(){this._trace=new r.CapturedTrace(o())}function o(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},r.CapturedTrace=null,r.create=function(){if(e)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=t.prototype._pushContext,i=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,u=t.prototype._promiseCreated;r.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=i,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=u,e=!1},e=!0,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,t._peekContext=t.prototype._peekContext=o,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},r}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){var i,s,a,u=n._getDomain,c=n._async,f=t("./errors").Warning,l=t("./util"),h=t("./es5"),d=l.canAttachTrace,p=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,v=/\((?:timers\.js):\d+:\d+\)/,y=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,m=null,w=null,g=!1,_=!(0==l.env("BLUEBIRD_DEBUG")),b=!(0==l.env("BLUEBIRD_WARNINGS")||!_&&!l.env("BLUEBIRD_WARNINGS")),E=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!_&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),x=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(b||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){G("rejectionHandled",i,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),G("unhandledRejection",s,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return z(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=u();s="function"===typeof t?null===e?t:l.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=u();i="function"===typeof t?null===e?t:l.domainBind(e,t):void 0};var C=function(){};n.longStackTraces=function(){if(c.haveItemsQueued()&&!tt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!tt.longStackTraces&&$()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace,o=n.prototype._dereferenceTrace;tt.longStackTraces=!0,C=function(){if(c.haveItemsQueued()&&!tt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,n.prototype._dereferenceTrace=o,r.deactivateLongStackTraces(),c.enableTrampoline(),tt.longStackTraces=!1},n.prototype._captureStackTrace=U,n.prototype._attachExtraTrace=M,n.prototype._dereferenceTrace=B,r.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return tt.longStackTraces&&$()};var O=function(){try{if("function"===typeof CustomEvent){var t=new CustomEvent("CustomEvent");return l.global.dispatchEvent(t),function(t,e){var n={detail:e,cancelable:!0};h.defineProperty(n,"promise",{value:e.promise}),h.defineProperty(n,"reason",{value:e.reason});var r=new CustomEvent(t.toLowerCase(),n);return!l.global.dispatchEvent(r)}}if("function"===typeof Event){t=new Event("CustomEvent");return l.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,h.defineProperty(n,"promise",{value:e.promise}),h.defineProperty(n,"reason",{value:e.reason}),!l.global.dispatchEvent(n)}}return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!l.global.dispatchEvent(n)}}catch(o){}return function(){return!1}}(),P=l.isNode?function(){return e.emit.apply(e,arguments)}:l.global?function(t){var e="on"+t.toLowerCase(),n=l.global[e];return!!n&&(n.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function T(t,e){return{promise:e}}var R={promiseCreated:T,promiseFulfilled:T,promiseRejected:T,promiseResolved:T,promiseCancelled:T,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:T},A=function(t){var e=!1;try{e=P.apply(null,arguments)}catch(o){c.throwLater(o),e=!0}var n=!1;try{n=O(t,R[t].apply(null,arguments))}catch(o){c.throwLater(o),n=!0}return n||e};function j(){return!1}function k(t,e,n){var r=this;try{t(e,n,function(t){if("function"!==typeof t)throw new TypeError("onCancel must be a function, got: "+l.toString(t));r._attachCancellationCallback(t)})}catch(o){return o}}function S(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?l.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function I(){return this._onCancelField}function D(t){this._onCancelField=t}function N(){this._cancellationParent=void 0,this._onCancelField=void 0}function F(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}n.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&C()),"warnings"in t){var e=t.warnings;tt.warnings=!!e,x=tt.warnings,l.isObject(e)&&"wForgottenReturn"in e&&(x=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!tt.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=N,n.prototype._propagateFrom=F,n.prototype._onCancel=I,n.prototype._setOnCancel=D,n.prototype._attachCancellationCallback=S,n.prototype._execute=k,L=F,tt.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!tt.monitoring?(tt.monitoring=!0,n.prototype._fireEvent=A):!t.monitoring&&tt.monitoring&&(tt.monitoring=!1,n.prototype._fireEvent=j)),n},n.prototype._fireEvent=j,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(o){return o}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._dereferenceTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var L=function(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function W(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function U(){this._trace=new Z(this._peekContext())}function M(t,e){if(d(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=H(t);l.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),l.notEnumerableProp(t,"__stackCleaned__",!0)}}}function B(){this._trace=void 0}function z(t,e,r){if(tt.warnings){var o,i=new f(t);if(e)r._attachExtraTrace(i);else if(tt.longStackTraces&&(o=n._peekContext()))o.attachExtraTrace(i);else{var s=H(i);i.stack=s.message+"\n"+s.stack.join("\n")}A("warning",i)||V(i,"",!0)}}function q(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],o="    (No stack trace)"===r||m.test(r),i=o&&X(r);o&&!i&&(g&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function H(t){var e=t.stack,n=t.toString();return e="string"===typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||m.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:q(e)}}function V(t,e,n){if("undefined"!==typeof console){var r;if(l.isObject(t)){var o=t.stack;r=e+w(o,t)}else r=e+String(t);"function"===typeof a?a(r,n):"function"!==typeof console.log&&"object"!==typeof console.log||console.log(r)}}function G(t,e,n,r){var i=!1;try{"function"===typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){c.throwLater(o)}"unhandledRejection"===t?A(t,n,r)||i||V(n,"Unhandled rejection "):A(t,r)}function Y(t){var e;if("function"===typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"===typeof t.toString?t.toString():l.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(o){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}function $(){return"function"===typeof K}var X=function(){return!1},J=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Q(t){var e=t.match(J);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function Z(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);K(this,Z),e>32&&this.uncycle()}l.inherits(Z,Error),r.CapturedTrace=Z,Z.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,o=this;void 0!==o;++r)e.push(o),o=o._parent;for(r=(t=this._length=r)-1;r>=0;--r){var i=e[r].stack;void 0===n[i]&&(n[i]=r)}for(r=0;r<t;++r){var s=n[e[r].stack];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var a=r>0?e[r-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,c=r-2;c>=0;--c)e[c]._length=u,u++;return}}}},Z.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=H(t),n=e.message,r=[e.stack],o=this;void 0!==o;)r.push(q(o.stack.split("\n"))),o=o._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],o=e.length-1,i=e[o],s=-1,a=r.length-1;a>=0;--a)if(r[a]===i){s=a;break}for(a=s;a>=0;--a){var u=r[a];if(e[o]!==u)break;e.pop(),o--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),l.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),l.notEnumerableProp(t,"__stackCleaned__",!0)}};var K=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"===typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():Y(e)};if("number"===typeof Error.stackTraceLimit&&"function"===typeof Error.captureStackTrace){Error.stackTraceLimit+=6,m=t,w=e;var n=Error.captureStackTrace;return X=function(t){return p.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"===typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return m=/@/,w=e,g=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(o){r="stack"in o}return"stack"in i||!r||"number"!==typeof Error.stackTraceLimit?(w=function(t,e){return"string"===typeof t?t:"object"!==typeof e&&"function"!==typeof e||void 0===e.name||void 0===e.message?Y(e):e.toString()},null):(m=t,w=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(o){t.stack=o.stack}Error.stackTraceLimit-=6})}();"undefined"!==typeof console&&"undefined"!==typeof console.warn&&(a=function(t){console.warn(t)},l.isNode&&e.stderr.isTTY?a=function(t,e){var n=e?"\x1b[33m":"\x1b[31m";console.warn(n+t+"\x1b[0m\n")}:l.isNode||"string"!==typeof(new Error).stack||(a=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var tt={warnings:b,longStackTraces:!1,cancellation:!1,monitoring:!1};return E&&n.longStackTraces(),{longStackTraces:function(){return tt.longStackTraces},warnings:function(){return tt.warnings},cancellation:function(){return tt.cancellation},monitoring:function(){return tt.monitoring},propagateFromFunction:function(){return L},boundValueFunction:function(){return W},checkForgottenReturns:function(t,e,n,r,o){if(void 0===t&&null!==e&&x){if(void 0!==o&&o._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var i="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),u=q(a),c=u.length-1;c>=0;--c){var f=u[c];if(!v.test(f)){var l=f.match(y);l&&(i="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(u.length>0){var h=u[0];for(c=0;c<a.length;++c)if(a[c]===h){c>0&&(s="\n"+a[c-1]);break}}}var d="a promise was created in a "+n+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(d,!0,e)}},setBounds:function(t,e){if($()){for(var n,r,o=(t.stack||"").split("\n"),i=(e.stack||"").split("\n"),s=-1,a=-1,u=0;u<o.length;++u)if(c=Q(o[u])){n=c.fileName,s=c.line;break}for(u=0;u<i.length;++u){var c;if(c=Q(i[u])){r=c.fileName,a=c.line;break}}s<0||a<0||!n||!r||n!==r||s>=a||(X=function(t){if(p.test(t))return!0;var e=Q(t);return!!(e&&e.fileName===n&&s<=e.line&&e.line<=a)})}},warn:z,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),z(n)},CapturedTrace:Z,fireDomEvent:O,fireGlobalEvent:P}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();return this.caught(n,function(){return r})}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,r=t.all;function o(){return r(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(o,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,r){return n(t,r,e,0)._then(o,void 0,void 0,t,void 0)},t.mapSeries=function(t,r){return n(t,r,e,e)}}},{}],12:[function(t,e,n){"use strict";var r,i,s=t("./es5"),a=s.freeze,u=t("./util"),c=u.inherits,f=u.notEnumerableProp;function l(t,e){function n(r){if(!(this instanceof n))return new n(r);f(this,"message","string"===typeof r?r:e),f(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}var h=l("Warning","warning"),d=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),v=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(o){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<y.length;++m)"function"===typeof Array.prototype[y[m]]&&(v.prototype[y[m]]=Array.prototype[y[m]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var w=0;function g(t){if(!(this instanceof g))return new g(t);f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}v.prototype.toString=function(){var t=Array(4*w+1).join(" "),e="\n"+t+"AggregateError of:\n";w++,t=Array(4*w+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",o=r.split("\n"),i=0;i<o.length;++i)o[i]=t+o[i];e+=(r=o.join("\n"))+"\n"}return w--,e},c(g,Error);var _=Error.__BluebirdErrorTypes__;_||(_=a({CancellationError:d,TimeoutError:p,OperationalError:g,RejectionError:g,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,s={}.toString,a={}.constructor.prototype,u=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===s.call(t)}catch(o){return!1}},keys:u,names:u,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(o){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,o){return n(t,r,o,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){var o=t("./util"),i=e.CancellationError,s=o.errorObj,a=t("./catch_filter")(r);function u(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function c(t){this.finallyHandler=t}function f(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function l(){return d.call(this,this.promise._target()._settledValue())}function h(t){if(!f(this,t))return s.e=t,s}function d(t){var o=this.promise,a=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?a.call(o._boundValue()):a.call(o._boundValue(),t);if(u===r)return u;if(void 0!==u){o._setReturnedNonUndefined();var d=n(u,o);if(d instanceof e){if(null!=this.cancelPromise){if(d._isCancelled()){var p=new i("late cancellation observer");return o._attachExtraTrace(p),s.e=p,s}d.isPending()&&d._attachCancellationCallback(new c(this))}return d._then(l,h,void 0,this,void 0)}}}return o.isRejected()?(f(this),s.e=t,s):(f(this),t)}return u.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){f(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!==typeof t?this.then():this._then(n,r,void 0,new u(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,d,d)},e.prototype.tap=function(t){return this._passThrough(t,1,d)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,d);var r,i=new Array(n-1),s=0;for(r=0;r<n-1;++r){var u=arguments[r];if(!o.isObject(u))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+o.classString(u)));i[s++]=u}i.length=s;var c=arguments[r];return this._passThrough(a(i,c,this),1,void 0,d)},u}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,o,i,s){var a=t("./errors").TypeError,u=t("./util"),c=u.errorObj,f=u.tryCatch,l=[];function h(t,n,o,i){if(s.cancellation()){var a=new e(r),u=this._finallyPromise=new e(r);this._promise=a.lastly(function(){return u}),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new e(r))._captureStackTrace()}this._stack=i,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"===typeof o?[o].concat(l):l,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(h,i),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if("undefined"!==typeof this._generator.return)this._promise._pushContext(),t=f(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=f(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},h.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(t){var n=this._promise;if(t===c)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var i=o(r,this._promise);if(i instanceof e||null!==(i=function(t,n,r){for(var i=0;i<n.length;++i){r._pushContext();var s=f(n[i])(t);if(r._popContext(),s===c){r._pushContext();var a=e.reject(c.e);return r._popContext(),a}var u=o(s,r);if(u instanceof e)return u}return null}(i,this._yieldHandlers,this._promise))){var s=(i=i._target())._bitField;0===(50397184&s)?(this._yieldedPromise=i,i._proxy(this,null)):0!==(33554432&s)?e._async.invoke(this._promiseFulfilled,this,i._value()):0!==(16777216&s)?e._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!==typeof t)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=h,o=(new Error).stack;return function(){var e=t.apply(this,arguments),i=new r(void 0,void 0,n,o),s=i.promise();return i._generator=e,i._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!==typeof t)throw new a("expecting a function but got "+u.classString(t));l.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!==typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new h(t,this),o=r.promise();return r._run(e.spawn),o}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,o,i,s){var a=t("./util");a.canEvaluate,a.tryCatch,a.errorObj;e.join=function(){var t,e=arguments.length-1;e>0&&"function"===typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var o=new n(r).promise();return void 0!==t?o.spread(t):o}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,o,i,s){var a=e._getDomain,u=t("./util"),c=u.tryCatch,f=u.errorObj,l=e._async;function h(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var o=a();this._callback=null===o?e:u.domainBind(o,e),this._preservedValues=r===i?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],l.invoke(this._asyncInit,this,void 0)}function d(t,n,o,i){if("function"!==typeof n)return r("expecting a function but got "+u.classString(n));var s=0;if(void 0!==o){if("object"!==typeof o||null===o)return e.reject(new TypeError("options argument must be an object but it is "+u.classString(o)));if("number"!==typeof o.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(o.concurrency)));s=o.concurrency}return new h(t,n,s="number"===typeof s&&isFinite(s)&&s>=1?s:0,i).promise()}u.inherits(h,n),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(t,n){var r=this._values,i=this.length(),a=this._preservedValues,u=this._limit;if(n<0){if(r[n=-1*n-1]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var l=this._promise,h=this._callback,d=l._boundValue();l._pushContext();var p=c(h).call(d,t,n,i),v=l._popContext();if(s.checkForgottenReturns(p,v,null!==a?"Promise.filter":"Promise.map",l),p===f)return this._reject(p.e),!0;var y=o(p,this._promise);if(y instanceof e){var m=(y=y._target())._bitField;if(0===(50397184&m))return u>=1&&this._inFlight++,r[n]=y,y._proxy(this,-1*(n+1)),!1;if(0===(33554432&m))return 0!==(16777216&m)?(this._reject(y._reason()),!0):(this._cancel(),!0);p=y._value()}r[n]=p}return++this._totalResolved>=i&&(null!==a?this._filter(r,a):this._resolve(r),!0)},h.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},h.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),o=0,i=0;i<n;++i)t[i]&&(r[o++]=e[i]);r.length=o,this._resolve(r)},h.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return d(this,t,e,null)},e.map=function(t,e,n,r){return d(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,o,i){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!==typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var o=a(t).apply(this,arguments),s=r._popContext();return i.checkForgottenReturns(o,s,"Promise.method",r),r._resolveFromSyncValue(o),r}},e.attempt=e.try=function(t){if("function"!==typeof t)return o("expecting a function but got "+s.classString(t));var r,u=new e(n);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],f=arguments[2];r=s.isArray(c)?a(t).apply(f,c):a(t).call(f,c)}else r=a(t)();var l=u._popContext();return i.checkForgottenReturns(r,l,"Promise.try",u),u._resolveFromSyncValue(r),u},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var r=t("./util"),o=r.maybeWrapAsError,i=t("./errors").OperationalError,s=t("./es5");var a=/^(?:name|message|stack|cause)$/;function u(t){var e;if(function(t){return t instanceof Error&&s.getPrototypeOf(t)===Error.prototype}(t)){(e=new i(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=s.keys(t),o=0;o<n.length;++o){var u=n[o];a.test(u)||(e[u]=t[u])}return e}return r.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,r){if(null!==t){if(n){var i=u(o(n));t._attachExtraTrace(i),t._reject(i)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=e._async,o=n.tryCatch,i=n.errorObj;function s(t,e){if(!n.isArray(t))return a.call(this,t,e);var s=o(e).apply(this._boundValue(),[null].concat(t));s===i&&r.throwLater(s.e)}function a(t,e){var n=this._boundValue(),s=void 0===t?o(e).call(n,null):o(e).call(n,null,t);s===i&&r.throwLater(s.e)}function u(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var s=o(e).call(this._boundValue(),t);s===i&&r.throwLater(s.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=a;void 0!==e&&Object(e).spread&&(n=s),this._then(n,u,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){var r=function(){return new p("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},o=function(){return new A.PromiseInspection(this._target())},i=function(t){return A.reject(new p(t))};function s(){}var a,u={},c=t("./util");a=c.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},c.notEnumerableProp(A,"_getDomain",a);var f=t("./es5"),l=t("./async"),h=new l;f.defineProperty(A,"_async",{value:h});var d=t("./errors"),p=A.TypeError=d.TypeError;A.RangeError=d.RangeError;var v=A.CancellationError=d.CancellationError;A.TimeoutError=d.TimeoutError,A.OperationalError=d.OperationalError,A.RejectionError=d.OperationalError,A.AggregateError=d.AggregateError;var y=function(){},m={},w={},g=t("./thenables")(A,y),_=t("./promise_array")(A,y,g,i,s),b=t("./context")(A),E=b.create,x=t("./debuggability")(A,b),C=(x.CapturedTrace,t("./finally")(A,g,w)),O=t("./catch_filter")(w),P=t("./nodeback"),T=c.errorObj,R=c.tryCatch;function A(t){t!==y&&function(t,e){if(null==t||t.constructor!==A)throw new p("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!==typeof e)throw new p("expecting a function but got "+c.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function j(t){this.promise._resolveCallback(t)}function k(t){this.promise._rejectCallback(t,!1)}function S(t){var e=new A(y);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return A.prototype.toString=function(){return"[object Promise]"},A.prototype.caught=A.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),o=0;for(n=0;n<e-1;++n){var s=arguments[n];if(!c.isObject(s))return i("Catch statement predicate: expecting an object but got "+c.classString(s));r[o++]=s}if(r.length=o,"function"!==typeof(t=arguments[n]))throw new p("The last argument to .catch() must be a function, got "+c.toString(t));return this.then(void 0,O(r,t,this))}return this.then(void 0,t)},A.prototype.reflect=function(){return this._then(o,o,void 0,this,void 0)},A.prototype.then=function(t,e){if(x.warnings()&&arguments.length>0&&"function"!==typeof t&&"function"!==typeof e){var n=".then() only accepts functions but was passed: "+c.classString(t);arguments.length>1&&(n+=", "+c.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},A.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},A.prototype.spread=function(t){return"function"!==typeof t?i("expecting a function but got "+c.classString(t)):this.all()._then(t,void 0,void 0,m,void 0)},A.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},A.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},A.prototype.error=function(t){return this.caught(c.originatesFromRejection,t)},A.getNewLibraryCopy=n.exports,A.is=function(t){return t instanceof A},A.fromNode=A.fromCallback=function(t){var e=new A(y);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=R(t)(P(e,n));return r===T&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},A.all=function(t){return new _(t).promise()},A.cast=function(t){var e=g(t);return e instanceof A||((e=new A(y))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},A.resolve=A.fulfilled=A.cast,A.reject=A.rejected=function(t){var e=new A(y);return e._captureStackTrace(),e._rejectCallback(t,!0),e},A.setScheduler=function(t){if("function"!==typeof t)throw new p("expecting a function but got "+c.classString(t));return h.setScheduler(t)},A.prototype._then=function(t,e,n,r,o){var i=void 0!==o,s=i?o:new A(y),u=this._target(),f=u._bitField;i||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&f)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var l=a();if(0!==(50397184&f)){var d,p,m=u._settlePromiseCtx;0!==(33554432&f)?(p=u._rejectionHandler0,d=t):0!==(16777216&f)?(p=u._fulfillmentHandler0,d=e,u._unsetRejectionIsUnhandled()):(m=u._settlePromiseLateCancellationObserver,p=new v("late cancellation observer"),u._attachExtraTrace(p),d=e),h.invoke(m,u,{handler:null===l?d:"function"===typeof d&&c.domainBind(l,d),promise:s,receiver:r,value:p})}else u._addCallbacks(t,e,s,r,l);return s},A.prototype._length=function(){return 65535&this._bitField},A.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},A.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},A.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},A.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},A.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},A.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},A.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},A.prototype._isFinal=function(){return(4194304&this._bitField)>0},A.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},A.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},A.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},A.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},A.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==u)return void 0===e&&this._isBound()?this._boundValue():e},A.prototype._promiseAt=function(t){return this[4*t-4+2]},A.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},A.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},A.prototype._boundValue=function(){},A.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,o=t._receiverAt(0);void 0===o&&(o=u),this._addCallbacks(e,n,r,o,null)},A.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),o=t._promiseAt(e),i=t._receiverAt(e);void 0===i&&(i=u),this._addCallbacks(n,r,o,i,null)},A.prototype._addCallbacks=function(t,e,n,r,o){var i=this._length();if(i>=65531&&(i=0,this._setLength(0)),0===i)this._promise0=n,this._receiver0=r,"function"===typeof t&&(this._fulfillmentHandler0=null===o?t:c.domainBind(o,t)),"function"===typeof e&&(this._rejectionHandler0=null===o?e:c.domainBind(o,e));else{var s=4*i-4;this[s+2]=n,this[s+3]=r,"function"===typeof t&&(this[s+0]=null===o?t:c.domainBind(o,t)),"function"===typeof e&&(this[s+1]=null===o?e:c.domainBind(o,e))}return this._setLength(i+1),i},A.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},A.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(r(),!1);var n=g(t,this);if(!(n instanceof A))return this._fulfill(t);e&&this._propagateFrom(n,2);var o=n._target();if(o!==this){var i=o._bitField;if(0===(50397184&i)){var s=this._length();s>0&&o._migrateCallback0(this);for(var a=1;a<s;++a)o._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(o)}else if(0!==(33554432&i))this._fulfill(o._value());else if(0!==(16777216&i))this._reject(o._reason());else{var u=new v("late cancellation observer");o._attachExtraTrace(u),this._reject(u)}}else this._reject(r())}},A.prototype._rejectCallback=function(t,e,n){var r=c.ensureErrorObject(t),o=r===t;if(!o&&!n&&x.warnings()){var i="a promise was rejected with a non-error: "+c.classString(t);this._warn(i,!0)}this._attachExtraTrace(r,!!e&&o),this._reject(t)},A.prototype._resolveFromExecutor=function(t){if(t!==y){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},A.prototype._settlePromiseFromHandler=function(t,e,n,r){var o=r._bitField;if(0===(65536&o)){var i;r._pushContext(),e===m?n&&"number"===typeof n.length?i=R(t).apply(this._boundValue(),n):(i=T).e=new p("cannot .spread() a non-array: "+c.classString(n)):i=R(t).call(e,n);var s=r._popContext();0===(65536&(o=r._bitField))&&(i===w?r._reject(n):i===T?r._rejectCallback(i.e,!1):(x.checkForgottenReturns(i,s,"",r,this),r._resolveCallback(i)))}},A.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},A.prototype._followee=function(){return this._rejectionHandler0},A.prototype._setFollowee=function(t){this._rejectionHandler0=t},A.prototype._settlePromise=function(t,e,n,r){var i=t instanceof A,a=this._bitField,u=0!==(134217728&a);0!==(65536&a)?(i&&t._invokeInternalOnCancel(),n instanceof C&&n.isFinallyHandler()?(n.cancelPromise=t,R(e).call(n,r)===T&&t._reject(T.e)):e===o?t._fulfill(o.call(n)):n instanceof s?n._promiseCancelled(t):i||t instanceof _?t._cancel():n.cancel()):"function"===typeof e?i?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof s?n._isResolved()||(0!==(33554432&a)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):i&&(u&&t._setAsyncGuaranteed(),0!==(33554432&a)?t._fulfill(r):t._reject(r))},A.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"===typeof e?n instanceof A?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof A&&n._reject(o)},A.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},A.prototype._settlePromise0=function(t,e,n){var r=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,o,e)},A.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},A.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():h.settlePromises(this),this._dereferenceTrace())}},A.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return h.fatalError(t,c.isNode);(65535&e)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},A.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,e)}},A.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),o=this._promiseAt(n),i=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(o,r,i,e)}},A.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},A.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},"undefined"!==typeof Symbol&&Symbol.toStringTag&&f.defineProperty(A.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),A.defer=A.pending=function(){return x.deprecated("Promise.defer","new Promise"),{promise:new A(y),resolve:j,reject:k}},c.notEnumerableProp(A,"_makeSelfResolutionError",r),t("./method")(A,y,g,i,x),t("./bind")(A,y,g,x),t("./cancel")(A,_,i,x),t("./direct_resolve")(A),t("./synchronous_inspection")(A),t("./join")(A,_,g,y,h,a),A.Promise=A,A.version="3.5.5",t("./call_get.js")(A),t("./generators.js")(A,i,y,g,s,x),t("./map.js")(A,_,i,g,y,x),t("./nodeify.js")(A),t("./promisify.js")(A,y),t("./props.js")(A,_,g,i),t("./race.js")(A,y,g,i),t("./reduce.js")(A,_,i,g,y,x),t("./settle.js")(A,_,x),t("./some.js")(A,_,i),t("./timers.js")(A,y,x),t("./using.js")(A,i,g,E,y,x),t("./any.js")(A),t("./each.js")(A,y),t("./filter.js")(A,y),c.toFastProperties(A),c.toFastProperties(A.prototype),S({a:1}),S({b:2}),S({c:3}),S(1),S(function(){}),S(void 0),S(!1),S(new A(y)),x.setBounds(l.firstLineError,c.lastLineError),A}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,o,i){var s=t("./util");s.isArray;function a(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(a,i),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function t(n,i){var a=r(this._values,this._promise);if(a instanceof e){var u=(a=a._target())._bitField;if(this._values=a,0===(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(t,this._reject,void 0,this,i);if(0===(33554432&u))return 0!==(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===i?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(i));else{var c=o("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(c,!1)}},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var o=this._promise,i=!1,s=null,a=0;a<n;++a){var u=r(t[a],o);s=u instanceof e?(u=u._target())._bitField:null,i?null!==s&&u.suppressUnhandledRejections():null!==s?0===(50397184&s)?(u._proxy(this,a),this._values[a]=u):i=0!==(33554432&s)?this._promiseFulfilled(u._value(),a):0!==(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):i=this._promiseFulfilled(u,a)}i||o._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var r={},i=t("./util"),s=t("./nodeback"),a=i.withAppended,u=i.maybeWrapAsError,c=i.canEvaluate,f=t("./errors").TypeError,l={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!h.test(t)}function v(t){try{return!0===t.__isPromisified__}catch(o){return!1}}function y(t,e,n){var r=i.getDataPropertyOrDefault(t,e+n,l);return!!r&&v(r)}function m(t,e,n,r){for(var o=i.inheritedDataKeys(t),s=[],a=0;a<o.length;++a){var u=o[a],c=t[u],l=r===d||d(u,c,t);"function"!==typeof c||v(c)||y(t,u,e)||!r(u,c,t,l)||s.push(u,c)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var o=t[r];if(n.test(o))for(var i=o.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===i)throw new f("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(s,e,n),s}var w=function(t){return t.replace(/([$])/,"\\$")};var g=c?void 0:function(t,c,f,l,h,d){var p=function(){return this}(),v=t;function y(){var i=c;c===r&&(i=this);var f=new e(n);f._captureStackTrace();var l="string"===typeof v&&this!==p?this[v]:t,h=s(f,d);try{l.apply(i,a(arguments,h))}catch(o){f._rejectCallback(u(o),!0,!0)}return f._isFateSealed()||f._setAsyncGuaranteed(),f}return"string"===typeof v&&(t=l),i.notEnumerableProp(y,"__isPromisified__",!0),y};function _(t,e,n,o,s){for(var a=new RegExp(w(e)+"$"),u=m(t,e,a,n),c=0,f=u.length;c<f;c+=2){var l=u[c],h=u[c+1],d=l+e;if(o===g)t[d]=g(l,r,l,h,e,s);else{var p=o(h,function(){return g(l,r,l,h,e,s)});i.notEnumerableProp(p,"__isPromisified__",!0),t[d]=p}}return i.toFastProperties(t),t}e.promisify=function(t,e){if("function"!==typeof t)throw new f("expecting a function but got "+i.classString(t));if(v(t))return t;var n=function(t,e,n){return g(t,e,void 0,t,null,n)}(t,void 0===(e=Object(e)).context?r:e.context,!!e.multiArgs);return i.copyDescriptors(t,n,p),n},e.promisifyAll=function(t,e){if("function"!==typeof t&&"object"!==typeof t)throw new f("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!==typeof r&&(r="Async");var o=e.filter;"function"!==typeof o&&(o=d);var s=e.promisifier;if("function"!==typeof s&&(s=g),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(t),u=0;u<a.length;++u){var c=t[a[u]];"constructor"!==a[u]&&i.isClass(c)&&(_(c.prototype,r,o,s,n),_(c,r,o,s,n))}return _(t,r,o,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,o){var i,s=t("./util"),a=s.isObject,u=t("./es5");"function"===typeof Map&&(i=Map);var c=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var o=new Array(2*r.size);return r.forEach(n,o),o}}();function f(t){var e,n=!1;if(void 0!==i&&t instanceof i)e=c(t),n=!0;else{var r=u.keys(t),o=r.length;e=new Array(2*o);for(var s=0;s<o;++s){var a=r[s];e[s]=t[a],e[s+o]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function l(t){var n,i=r(t);return a(i)?(n=i instanceof e?i._then(e.props,void 0,void 0,void 0,void 0):new f(i).promise(),i instanceof e&&n._propagateFrom(i,2),n):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(f,n),f.prototype._init=function(){},f.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new i,n=t.length/2|0,r=0;r<n;++r){var o=t[n+r],s=t[r];e.set(o,s)}return e}(this._values);else{n={};for(var r=this.length(),o=0,s=this.length();o<s;++o)n[this._values[o+r]]=this._values[o]}return this._resolve(n),!0}return!1},f.prototype.shouldCopyValues=function(){return!1},f.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return l(this)},e.props=function(t){return l(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var o=this._front+r-3;this._checkCapacity(r);var i=this._capacity-1;this[o+0&i]=t,this[o+1&i]=e,this[o+2&i]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,r,o){for(var i=0;i<o;++i)n[i+r]=t[i+e],t[i+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,o){var i=t("./util"),s=function(t){return t.then(function(e){return a(e,t)})};function a(t,a){var u=r(t);if(u instanceof e)return s(u);if(null===(t=i.asArray(t)))return o("expecting an array or an iterable object but got "+i.classString(t));var c=new e(n);void 0!==a&&c._propagateFrom(a,3);for(var f=c._fulfill,l=c._reject,h=0,d=t.length;h<d;++h){var p=t[h];(void 0!==p||h in t)&&e.cast(p)._then(f,l,void 0,c,null)}return c}e.race=function(t){return a(t,void 0)},e.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,o,i,s){var a=e._getDomain,u=t("./util"),c=u.tryCatch;function f(t,n,r,o){this.constructor$(t);var s=a();this._fn=null===s?n:u.domainBind(s,n),void 0!==r&&(r=e.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=o===i?Array(this._length):0===o?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function h(t,e,n,o){return"function"!==typeof e?r("expecting a function but got "+u.classString(e)):new f(t,e,n,o).promise()}function d(t){this.accum=t,this.array._gotAccum(t);var n=o(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(t){var n,r=this.array,o=r._promise,i=c(r._fn);o._pushContext(),(n=void 0!==r._eachValues?i.call(o._boundValue(),t,this.index,this.length):i.call(o._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=n);var a=o._popContext();return s.checkForgottenReturns(n,a,void 0!==r._eachValues?"Promise.each":"Promise.reduce",o),n}u.inherits(f,n),f.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==i&&this._eachValues.push(t)},f.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},f.prototype._init=function(){},f.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},f.prototype.shouldCopyValues=function(){return!1},f.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},f.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},f.prototype._iterate=function(t){var n,r;this._values=t;var o=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<o;++r){var i={accum:null,value:t[r],index:r,length:o,array:this};n=n._then(d,void 0,void 0,i,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(l,l,void 0,n,this)},e.prototype.reduce=function(t,e){return h(this,t,e,null)},e.reduce=function(t,e,n,r){return h(t,e,n,r)}}},{"./util":36}],29:[function(t,o,i){"use strict";var s,a=t("./util"),u=a.getNativePromise();if(a.isNode&&"undefined"===typeof MutationObserver){var c=n.setImmediate,f=e.nextTick;s=a.isRecentNode?function(t){c.call(n,t)}:function(t){f.call(e,t)}}else if("function"===typeof u&&"function"===typeof u.resolve){var l=u.resolve();s=function(t){l.then(t)}}else s="undefined"!==typeof MutationObserver&&("undefined"===typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){t.classList.toggle("foo"),n=!1}).observe(r,e);return function(o){var i=new MutationObserver(function(){i.disconnect(),o()});i.observe(t,e),n||(n=!0,r.classList.toggle("foo"))}}():"undefined"!==typeof r?function(t){r(t)}:"undefined"!==typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};o.exports=s},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){var o=e.PromiseInspection;function i(t){this.constructor$(t)}t("./util").inherits(i,n),i.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){var o=t("./util"),i=t("./errors").RangeError,s=t("./errors").AggregateError,a=o.isArray,u={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function f(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(t),o=n.promise();return n.setHowMany(e),n.init(),o}o.inherits(c,n),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=a(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new s,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new i(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return f(t,e)},e.prototype.some=function(t){return f(this,t)},e._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},i=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return i.call(this._target())},t.prototype.isFulfilled=function(){return o.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util"),i=r.errorObj,s=r.isObject;var a={}.hasOwnProperty;return function(t,u){if(s(t)){if(t instanceof e)return t;var c=function(t){try{return function(t){return t.then}(t)}catch(o){return i.e=o,i}}(t);if(c===i){u&&u._pushContext();var f=e.reject(c.e);return u&&u._popContext(),f}if("function"===typeof c)return function(t){try{return a.call(t,"_promise0")}catch(o){return!1}}(t)?(f=new e(n),t._then(f._fulfill,f._reject,void 0,f,null),f):function(t,o,s){var a=new e(n),u=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var c=!0,f=r.tryCatch(o).call(t,function(t){a&&(a._resolveCallback(t),a=null)},function(t){a&&(a._rejectCallback(t,c,!0),a=null)});return c=!1,a&&f===i&&(a._rejectCallback(f.e,!0,!0),a=null),u}(t,c,u)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){var o=t("./util"),i=e.TimeoutError;function s(t){this.handle=t}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,o){var i,u;return void 0!==o?(i=e.resolve(o)._then(a,null,null,t,void 0),r.cancellation()&&o instanceof e&&i._setOnCancel(o)):(i=new e(n),u=setTimeout(function(){i._fulfill()},+t),r.cancellation()&&i._setOnCancel(new s(u)),i._captureStackTrace()),i._setAsyncGuaranteed(),i};e.prototype.delay=function(t){return u(t,this)};function c(t){return clearTimeout(this.handle),t}function f(t){throw clearTimeout(this.handle),t}e.prototype.timeout=function(t,e){var n,a;t=+t;var u=new s(setTimeout(function(){n.isPending()&&function(t,e,n){var r;r="string"!==typeof e?e instanceof Error?e:new i("operation timed out"):new i(e),o.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()}(n,e,a)},t));return r.cancellation()?(a=this.then(),(n=a._then(c,f,void 0,u,void 0))._setOnCancel(u)):n=this._then(c,f,void 0,u,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,s,a){var u=t("./util"),c=t("./errors").TypeError,f=t("./util").inherits,l=u.errorObj,h=u.tryCatch,d={};function p(t){setTimeout(function(){throw t},0)}function v(t,n){var i=0,a=t.length,u=new e(s);return function s(){if(i>=a)return u._fulfill();var c=function(t){var e=r(t);return e!==t&&"function"===typeof t._isDisposable&&"function"===typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[i++]);if(c instanceof e&&c._isDisposable()){try{c=r(c._getDisposer().tryDispose(n),t.promise)}catch(o){return p(o)}if(c instanceof e)return c._then(s,p,null,null,null)}s()}(),u}function y(t,e,n){this._data=t,this._promise=e,this._context=n}function m(t,e,n){this.constructor$(t,e,n)}function w(t){return y.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function g(t){this.length=t,this.promise=null,this[t-1]=null}y.prototype.data=function(){return this._data},y.prototype.promise=function(){return this._promise},y.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},y.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==d?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},y.isDisposer=function(t){return null!=t&&"function"===typeof t.resource&&"function"===typeof t.tryDispose},f(m,y),m.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},g.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var o,i=arguments[t-1];if("function"!==typeof i)return n("expecting a function but got "+u.classString(i));var s=!0;2===t&&Array.isArray(arguments[0])?(t=(o=arguments[0]).length,s=!1):(o=arguments,t--);for(var c=new g(t),f=0;f<t;++f){var d=o[f];if(y.isDisposer(d)){var p=d;(d=d.promise())._setDisposable(p)}else{var m=r(d);m instanceof e&&(d=m._then(w,null,null,{resources:c,index:f},void 0))}c[f]=d}var _=new Array(c.length);for(f=0;f<_.length;++f)_[f]=e.resolve(c[f]).reflect();var b=e.all(_).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled())return void b.cancel();t[e]=n.value()}E._pushContext(),i=h(i);var r=s?i.apply(void 0,t):i(t),o=E._popContext();return a.checkForgottenReturns(r,o,"Promise.using",E),r}),E=b.lastly(function(){var t=new e.PromiseInspection(b);return v(c,t)});return c.promise=E,E._setOnCancel(c),E},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"===typeof t)return new m(t,this,i());throw new c}}},{"./errors":12,"./util":36}],36:[function(t,r,i){"use strict";var s=t("./es5"),a="undefined"==typeof navigator,u={e:{}},c,f="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n?n:void 0!==this?this:null;function l(){try{var t=c;return c=null,t.apply(this,arguments)}catch(o){return u.e=o,u}}function h(t){return c=t,l}var d=function(t,e){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype};function p(t){return null==t||!0===t||!1===t||"string"===typeof t||"number"===typeof t}function v(t){return"function"===typeof t||"object"===typeof t&&null!==t}function y(t){return p(t)?new Error(R(t)):t}function m(t,e){var n,r=t.length,o=new Array(r+1);for(n=0;n<r;++n)o[n]=t[n];return o[n]=e,o}function w(t,e,n){if(!s.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function g(t,e,n){if(p(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return s.defineProperty(t,e,r),t}function _(t){throw t}var b=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(s.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var a;try{a=n(t)}catch(o){return r}for(var u=0;u<a.length;++u){var c=a[u];if(!i[c]){i[c]=!0;var f=Object.getOwnPropertyDescriptor(t,c);null!=f&&null==f.get&&null==f.set&&r.push(c)}}t=s.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var o=[];t:for(var i in n)if(r.call(n,i))o.push(i);else{for(var s=0;s<t.length;++s)if(r.call(t[s],i))continue t;o.push(i)}return o}}(),E=/this\s*\.\s*\S+\s*=/;function x(t){try{if("function"===typeof t){var e=s.names(t.prototype),n=s.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=E.test(t+"")&&s.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function C(t){function e(){}e.prototype=t;var n=new e;function r(){return typeof n.foo}return r(),r(),t}var O=/^[a-z$_][a-z$_0-9]*$/i;function P(t){return O.test(t)}function T(t,e,n){for(var r=new Array(t),o=0;o<t;++o)r[o]=e+o+n;return r}function R(t){try{return t+""}catch(o){return"[no string representation]"}}function A(t){return t instanceof Error||null!==t&&"object"===typeof t&&"string"===typeof t.message&&"string"===typeof t.name}function j(t){try{g(t,"isOperational",!0)}catch(e){}}function k(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function S(t){return A(t)&&s.propertyIsWritable(t,"stack")}var I="stack"in new Error?function(t){return S(t)?t:new Error(R(t))}:function(t){if(S(t))return t;try{throw new Error(R(t))}catch(e){return e}};function D(t){return{}.toString.call(t)}function N(t,e,n){for(var r=s.names(t),o=0;o<r.length;++o){var i=r[o];if(n(i))try{s.defineProperty(e,i,s.getDescriptor(t,i))}catch(a){}}}var F=function(t){return s.isArray(t)?t:null};if("undefined"!==typeof Symbol&&Symbol.iterator){var L="function"===typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};F=function(t){return s.isArray(t)?t:null!=t&&"function"===typeof t[Symbol.iterator]?L(t):null}}var W="undefined"!==typeof e&&"[object process]"===D(e).toLowerCase(),U="undefined"!==typeof e&&!0;function M(t){return U?Object({NODE_ENV:"production",TMAUTHADAPTOR_TAG:"secure-accounts-widget",TMAUTHADAPTOR_URL:void 0,IFRAME_URL:"https://identity.ticketmaster.com/sign-in",BIND_PHONE_IFRAME_URL:"https://identity.ticketmaster.com/bind-phone",DESTINATION_DOMAIN:"https://auth.ticketmaster.com",IS_SIGNED_IN:"https://identity.ticketmaster.com/json/signed-in",SIGNED_OUT:"https://identity.ticketmaster.com/json/sign-out",AUTH_SIGNED_OUT:"https://auth.ticketmaster.com/sign-out",GET_USER:"https://identity.ticketmaster.com/json/user",REDIRECT_URI:"https%3A%2F%2Fauth.ticketmaster.com%2Fsecure-accounts%2Fwidget%2Fcomplete",SSO_DOMAINS:"https://identity.ticketmaster.com/v1/me/sso,https://identity.concerts.livenation.com/v1/me/sso,https://identity.livenation.com/v1/me/sso,https://identity.ticketmaster.ca/v1/me/sso,https://identity.ticketmaster.com.mx/v1/me/sso,https://identity.ticketmaster.com.au/v1/me/sso,https://identity.ticketmaster.co.nz/v1/me/sso,https://identity.tmverifiedfan.com/v1/me/sso,https://identity.ontouraccess.com/v1/me/sso,https://identity.ticketsnow.com/v1/me/sso,https://identity.eventinventory.com/v1/me/sso,https://identity.ticketexchangebyticketmaster.com/v1/me/sso,https://identity.houseofblues.com/v1/me/sso,https://identity.ticketstoday.com/v1/me/sso,https://identity.ticketmaster.co.uk/v1/me/sso,https://identity.ticketmaster.ie/v1/me/sso"})[t]:void 0}function B(){if("function"===typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(o){}}function z(t,e){return t.bind(e)}var q={isClass:x,isIdentifier:P,inheritedDataKeys:b,getDataPropertyOrDefault:w,thrower:_,isArray:s.isArray,asArray:F,notEnumerableProp:g,isPrimitive:p,isObject:v,isError:A,canEvaluate:a,errorObj:u,tryCatch:h,inherits:d,withAppended:m,maybeWrapAsError:y,toFastProperties:C,filledRange:T,toString:R,canAttachTrace:S,ensureErrorObject:I,originatesFromRejection:k,markAsOriginatingFromRejection:j,classString:D,copyDescriptors:N,hasDevTools:"undefined"!==typeof chrome&&chrome&&"function"===typeof chrome.loadTimes,isNode:W,hasEnvVariables:U,env:M,global:f,getNativePromise:B,domainBind:z};q.isRecentNode=q.isNode&&function(){var t;return e.versions&&e.versions.node?t=e.versions.node.split(".").map(Number):e.version&&(t=e.version.split(".").map(Number)),0===t[0]&&t[1]>10||t[0]>0}(),q.isNode&&q.toFastProperties(e);try{throw new Error}catch(o){q.lastLineError=o}r.exports=q},{"./es5":13}]},{},[4])(4)},t.exports=o(),"undefined"!==typeof window&&null!==window?window.P=window.Promise:"undefined"!==typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(48),n(5),n(136).setImmediate)},function(t,e,n){(function(t){var r="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(137),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(5))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o=1,i={},s=!1,a=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){f(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&f(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){f(t.data)},r=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;r=function(e){var n=a.createElement("script");n.onreadystatechange=function(){f(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(f,0,t)},u.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return i[o]=s,r(o),o++},u.clearImmediate=c}function c(t){delete i[t]}function f(t){if(s)setTimeout(f,0,t);else{var e=i[t];if(e){s=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{c(t),s=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n(5),n(48))},function(t,e,n){var r;"undefined"!==typeof window?r=window:"undefined"!==typeof self?r=self:(console.warn("Using browser-only version of superagent in non-browser environment"),r=this);var o=n(139),i=n(140),s=n(49),a=n(141),u=n(143);function c(){}var f=e=t.exports=function(t,n){return"function"==typeof n?new e.Request("GET",t).end(n):1==arguments.length?new e.Request("GET",t):new e.Request(t,n)};e.Request=m,f.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};var l="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function h(t){if(!s(t))return t;var e=[];for(var n in t)d(e,n,t[n]);return e.join("&")}function d(t,e,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){d(t,e,n)});else if(s(n))for(var r in n)d(t,e+"["+r+"]",n[r]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));else null===n&&t.push(encodeURIComponent(e))}function p(t){for(var e,n,r={},o=t.split("&"),i=0,s=o.length;i<s;++i)-1==(n=(e=o[i]).indexOf("="))?r[decodeURIComponent(e)]="":r[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return r}function v(t){return/[\/+]json($|[^-\w])/.test(t)}function y(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"===typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.header=this.headers=function(t){for(var e,n,r,o,i=t.split(/\r?\n/),s={},a=0,u=i.length;a<u;++a)-1!==(e=(n=i[a]).indexOf(":"))&&(r=n.slice(0,e).toLowerCase(),o=l(n.slice(e+1)),s[r]=o);return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function m(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t,e=null,r=null;try{r=new y(n)}catch(o){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=o,n.xhr?(e.rawResponse="undefined"==typeof n.xhr.responseType?n.xhr.responseText:n.xhr.response,e.status=n.xhr.status?n.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),n.callback(e)}n.emit("response",r);try{n._isResponseOK(r)||(t=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(i){t=i}t?(t.original=e,t.response=r,t.status=r.status,n.callback(t,r)):n.callback(null,r)})}function w(t,e,n){var r=f("DELETE",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}f.serializeObject=h,f.parseString=p,f.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},f.serialize={"application/x-www-form-urlencoded":h,"application/json":JSON.stringify},f.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},a(y.prototype),y.prototype._parseBody=function(t){var e=f.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&v(this.type)&&(e=f.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null)},y.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",o=new Error(r);return o.status=this.status,o.method=e,o.url=n,o},f.Response=y,o(m.prototype),i(m.prototype),m.prototype.type=function(t){return this.set("Content-Type",f.types[t]||t),this},m.prototype.accept=function(t){return this.set("Accept",f.types[t]||t),this},m.prototype.auth=function(t,e,n){1===arguments.length&&(e=""),"object"===typeof e&&null!==e&&(n=e,e=""),n||(n={type:"function"===typeof btoa?"basic":"auto"});return this._auth(t,e,n,function(t){if("function"===typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")})},m.prototype.query=function(t){return"string"!=typeof t&&(t=h(t)),t&&this._query.push(t),this},m.prototype.attach=function(t,e,n){if(e){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,n||e.name)}return this},m.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},m.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var n=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),n(t,e)},m.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},m.prototype.buffer=m.prototype.ca=m.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},m.prototype.pipe=m.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},m.prototype._isHost=function(t){return t&&"object"===typeof t&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},m.prototype.end=function(t){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||c,this._finalizeQueryString(),this._end()},m.prototype._end=function(){var t=this,e=this.xhr=f.getXHR(),n=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var n=e.readyState;if(n>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==n){var r;try{r=e.status}catch(o){r=0}if(!r){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var r=function(e,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=e,t.emit("progress",n)};if(this.hasListeners("progress"))try{e.onprogress=r.bind(null,"download"),e.upload&&(e.upload.onprogress=r.bind(null,"upload"))}catch(a){}try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(u){return this.callback(u)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var o=this._header["content-type"],i=this._serializer||f.serialize[o?o.split(";")[0]:""];!i&&v(o)&&(i=f.serialize["application/json"]),i&&(n=i(n))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&e.setRequestHeader(s,this.header[s]);return this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send("undefined"!==typeof n?n:null),this},f.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(t){u.prototype[t.toLowerCase()]=function(e,n){var r=new f.Request(t,e);return this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete,f.get=function(t,e,n){var r=f("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},f.head=function(t,e,n){var r=f("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},f.options=function(t,e,n){var r=f("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},f.del=w,f.delete=w,f.patch=function(t,e,n){var r=f("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},f.post=function(t,e,n){var r=f("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},f.put=function(t,e,n){var r=f("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}},function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){"use strict";var r=n(49);function o(t){if(t)return function(t){for(var e in o.prototype)t[e]=o.prototype[e];return t}(t)}t.exports=o,o.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},o.prototype.parse=function(t){return this._parser=t,this},o.prototype.responseType=function(t){return this._responseType=t,this},o.prototype.serialize=function(t){return this._serializer=t,this},o.prototype.timeout=function(t){if(!t||"object"!==typeof t)return this._timeout=t,this._responseTimeout=0,this;for(var e in t)switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;default:console.warn("Unknown timeout option",e)}return this},o.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var i=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];o.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(t,e);if(!0===n)return!0;if(!1===n)return!1}catch(r){console.error(r)}if(e&&e.status&&e.status>=500&&501!=e.status)return!0;if(t){if(t.code&&~i.indexOf(t.code))return!0;if(t.timeout&&"ECONNABORTED"==t.code)return!0;if(t.crossDomain)return!0}return!1},o.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},o.prototype.then=function(t,e){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(t,e){n.end(function(n,r){n?e(n):t(r)})})}return this._fullfilledPromise.then(t,e)},o.prototype.catch=function(t){return this.then(void 0,t)},o.prototype.use=function(t){return t(this),this},o.prototype.ok=function(t){if("function"!==typeof t)throw Error("Callback required");return this._okCallback=t,this},o.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},o.prototype.get=function(t){return this._header[t.toLowerCase()]},o.prototype.getHeader=o.prototype.get,o.prototype.set=function(t,e){if(r(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},o.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},o.prototype.field=function(t,e){if(null===t||void 0===t)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(t)){for(var n in t)this.field(n,t[n]);return this}if(Array.isArray(e)){for(var o in e)this.field(t,e[o]);return this}if(null===e||void 0===e)throw new Error(".field(name, val) val can not be empty");return"boolean"===typeof e&&(e=""+e),this._getFormData().append(t,e),this},o.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},o.prototype._auth=function(t,e,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(t+":"+e));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer "+t)}return this},o.prototype.withCredentials=function(t){return void 0==t&&(t=!0),this._withCredentials=t,this},o.prototype.redirects=function(t){return this._maxRedirects=t,this},o.prototype.maxResponseSize=function(t){if("number"!==typeof t)throw TypeError("Invalid argument");return this._maxResponseSize=t,this},o.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},o.prototype.send=function(t){var e=r(t),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(e&&r(this._data))for(var o in t)this._data[o]=t[o];else"string"==typeof t?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(n||this.type("json"),this)},o.prototype.sortQuery=function(t){return this._sort="undefined"===typeof t||t,this},o.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var n=this.url.substring(e+1).split("&");"function"===typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,e)+"?"+n.join("&")}}},o.prototype._appendQueryString=function(){console.trace("Unsupported")},o.prototype._timeoutError=function(t,e,n){if(!this._aborted){var r=new Error(t+e+"ms exceeded");r.timeout=e,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},o.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(t,e,n){"use strict";var r=n(142);function o(t){if(t)return function(t){for(var e in o.prototype)t[e]=o.prototype[e];return t}(t)}t.exports=o,o.prototype.get=function(t){return this.header[t.toLowerCase()]},o.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=r.type(e);var n=r.params(e);for(var o in n)this[o]=n[o];this.links={};try{t.link&&(this.links=r.parseLinks(t.link))}catch(i){}},o.prototype._setStatusProperties=function(t){var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.created=201==t,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.forbidden=403==t,this.notFound=404==t,this.unprocessableEntity=422==t}},function(t,e,n){"use strict";e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){return t.split(/ *; */).reduce(function(t,e){var n=e.split(/ *= */),r=n.shift(),o=n.shift();return r&&o&&(t[r]=o),t},{})},e.parseLinks=function(t){return t.split(/ *, */).reduce(function(t,e){var n=e.split(/ *; */),r=n[0].slice(1,-1);return t[n[1].split(/ *= */)[1].slice(1,-1)]=r,t},{})},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},function(t,e){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(t){n.prototype[t]=function(){return this._defaults.push({fn:t,arguments:arguments}),this}}),n.prototype._setDefaults=function(t){this._defaults.forEach(function(e){t[e.fn].apply(t,e.arguments)})},t.exports=n},function(t,e){t.exports=function(t){return null!=t&&null!=t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}}]);
//# sourceMappingURL=http://localhost:3001/templates/default/acai/tmauthadaptor.js.map